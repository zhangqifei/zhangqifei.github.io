<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>老朋友好久不见！</title>
  <icon>https://www.gravatar.com/avatar/a5e53349669dc1fb687a74eb208773ae</icon>
  <subtitle>一天进步一点</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.zhangqifei.top/"/>
  <updated>2019-06-28T07:29:31.127Z</updated>
  <id>https://www.zhangqifei.top/</id>
  
  <author>
    <name>咻一咻</name>
    <email>1353250703@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>压缩、解压缩及归档</title>
    <link href="https://www.zhangqifei.top/2019/06/28/linux%E6%80%BB%E7%BB%93/%E5%8E%8B%E7%BC%A9%E3%80%81%E5%BD%92%E6%A1%A3/"/>
    <id>https://www.zhangqifei.top/2019/06/28/linux总结/压缩、归档/</id>
    <published>2019-06-28T07:27:59.739Z</published>
    <updated>2019-06-28T07:29:31.127Z</updated>
    
    <content type="html"><![CDATA[<h1 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h1><h1 id="jar"><a href="#jar" class="headerlink" title="jar"></a>jar</h1><h1 id="unzip、zip"><a href="#unzip、zip" class="headerlink" title="unzip、zip"></a>unzip、zip</h1><h1 id="gz"><a href="#gz" class="headerlink" title="gz"></a>gz</h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;tar&quot;&gt;&lt;a href=&quot;#tar&quot; class=&quot;headerlink&quot; title=&quot;tar&quot;&gt;&lt;/a&gt;tar&lt;/h1&gt;&lt;h1 id=&quot;jar&quot;&gt;&lt;a href=&quot;#jar&quot; class=&quot;headerlink&quot; title=&quot;jar&quot;&gt;&lt;/a&gt;jar&lt;/h
      
    
    </summary>
    
      <category term="linux总结" scheme="https://www.zhangqifei.top/categories/linux%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="压缩、解压缩及归档" scheme="https://www.zhangqifei.top/tags/%E5%8E%8B%E7%BC%A9%E3%80%81%E8%A7%A3%E5%8E%8B%E7%BC%A9%E5%8F%8A%E5%BD%92%E6%A1%A3/"/>
    
  </entry>
  
  <entry>
    <title>nginx日志分析</title>
    <link href="https://www.zhangqifei.top/2019/06/28/shell%E8%84%9A%E6%9C%AC/nginx%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/"/>
    <id>https://www.zhangqifei.top/2019/06/28/shell脚本/nginx日志分析/</id>
    <published>2019-06-28T06:39:22.719Z</published>
    <updated>2019-07-01T06:26:43.076Z</updated>
    
    <content type="html"><![CDATA[<h1 id="统计PV-UV数"><a href="#统计PV-UV数" class="headerlink" title="统计PV,UV数"></a>统计PV,UV数</h1><h2 id="统计所有的PV数"><a href="#统计所有的PV数" class="headerlink" title="统计所有的PV数"></a>统计所有的PV数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log | wc -l</span><br></pre></td></tr></table></figure><h2 id="统计当天的PV数"><a href="#统计当天的PV数" class="headerlink" title="统计当天的PV数"></a>统计当天的PV数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log | sed -n /`date <span class="string">"+%d\/%b\/%Y"</span>`/p | wc -l</span><br></pre></td></tr></table></figure><h2 id="统计指定某一天的PV数"><a href="#统计指定某一天的PV数" class="headerlink" title="统计指定某一天的PV数"></a>统计指定某一天的PV数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log | sed -n <span class="string">'/20\/Aug\/2019/p'</span> | wc -l</span><br></pre></td></tr></table></figure><h2 id="根据访问IP统计UV"><a href="#根据访问IP统计UV" class="headerlink" title="根据访问IP统计UV"></a>根据访问IP统计UV</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $1&#125;'</span> access.log|sort | uniq -c |wc -l</span><br></pre></td></tr></table></figure><h2 id="统计指定某一天访问IP统计UV"><a href="#统计指定某一天访问IP统计UV" class="headerlink" title="统计指定某一天访问IP统计UV"></a>统计指定某一天访问IP统计UV</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log | grep <span class="string">"07/Apr/2019:0[4-5]"</span> | awk <span class="string">'&#123;print $1&#125;'</span> access.log|sort | uniq -c |wc -l</span><br></pre></td></tr></table></figure><h1 id="IP相关统计"><a href="#IP相关统计" class="headerlink" title="IP相关统计"></a>IP相关统计</h1><h2 id="统计IP访问量（独立ip访问数量）"><a href="#统计IP访问量（独立ip访问数量）" class="headerlink" title="统计IP访问量（独立ip访问数量）"></a>统计IP访问量（独立ip访问数量）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $1&#125;'</span> access.log | sort -n | uniq | wc -l</span><br></pre></td></tr></table></figure><h2 id="查看某一时间段的IP访问量-4-5点"><a href="#查看某一时间段的IP访问量-4-5点" class="headerlink" title="查看某一时间段的IP访问量(4-5点)"></a>查看某一时间段的IP访问量(4-5点)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"07/Apr/2019:0[4-5]"</span> access.log | awk <span class="string">'&#123;print $1&#125;'</span> | sort | uniq -c| sort -nr | wc -l</span><br></pre></td></tr></table></figure><h2 id="查看访问最频繁的前100个IP"><a href="#查看访问最频繁的前100个IP" class="headerlink" title="查看访问最频繁的前100个IP"></a>查看访问最频繁的前100个IP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $1&#125;'</span> access.log | sort -n |uniq -c | sort -rn | head -n 100</span><br></pre></td></tr></table></figure><h2 id="查看访问100次以上的IP"><a href="#查看访问100次以上的IP" class="headerlink" title="查看访问100次以上的IP"></a>查看访问100次以上的IP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $1&#125;'</span> access.log | sort -n |uniq -c |awk <span class="string">'&#123;if($1 &gt;100) print $0&#125;'</span>|sort -rn</span><br></pre></td></tr></table></figure><h2 id="查询某个IP的详细访问情况-按访问频率排序"><a href="#查询某个IP的详细访问情况-按访问频率排序" class="headerlink" title="查询某个IP的详细访问情况,按访问频率排序"></a>查询某个IP的详细访问情况,按访问频率排序</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">'127.0.01'</span> access.log |awk <span class="string">'&#123;print $7&#125;'</span>|sort |uniq -c |sort -rn |head -n 100</span><br></pre></td></tr></table></figure><h1 id="页面访问统计"><a href="#页面访问统计" class="headerlink" title="页面访问统计"></a>页面访问统计</h1><h2 id="查看访问最频的页面-TOP100"><a href="#查看访问最频的页面-TOP100" class="headerlink" title="查看访问最频的页面(TOP100)"></a>查看访问最频的页面(TOP100)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $7&#125;'</span> access.log | sort |uniq -c | sort -rn | head -n 100</span><br></pre></td></tr></table></figure><h2 id="查看访问最频的页面-排除php页面】-TOP100"><a href="#查看访问最频的页面-排除php页面】-TOP100" class="headerlink" title="查看访问最频的页面([排除php页面】(TOP100)"></a>查看访问最频的页面([排除php页面】(TOP100)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v <span class="string">".php"</span>  access.log | awk <span class="string">'&#123;print $7&#125;'</span> | sort |uniq -c | sort -rn | head -n 100</span><br></pre></td></tr></table></figure><h2 id="查询访问最频繁的URL"><a href="#查询访问最频繁的URL" class="headerlink" title="查询访问最频繁的URL"></a>查询访问最频繁的URL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $7&#125;'</span> access.log|sort | uniq -c |sort -n -k 1 -r|more</span><br></pre></td></tr></table></figure><h2 id="查看页面访问次数超过100次的页面"><a href="#查看页面访问次数超过100次的页面" class="headerlink" title="查看页面访问次数超过100次的页面"></a>查看页面访问次数超过100次的页面</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log | cut -d <span class="string">' '</span> -f 7 | sort |uniq -c | awk <span class="string">'&#123;if ($1 &gt; 100) print $0&#125;'</span> | less</span><br></pre></td></tr></table></figure><h2 id="查看最近1000条记录，访问量最高的页面"><a href="#查看最近1000条记录，访问量最高的页面" class="headerlink" title="查看最近1000条记录，访问量最高的页面"></a>查看最近1000条记录，访问量最高的页面</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -1000 access.log |awk <span class="string">'&#123;print $7&#125;'</span>|sort|uniq -c|sort -nr|less</span><br></pre></td></tr></table></figure><h1 id="每秒每分钟每小时请求量统计"><a href="#每秒每分钟每小时请求量统计" class="headerlink" title="每秒每分钟每小时请求量统计"></a>每秒每分钟每小时请求量统计</h1><h2 id="统计每秒的请求数-top100的时间点-精确到秒"><a href="#统计每秒的请求数-top100的时间点-精确到秒" class="headerlink" title="统计每秒的请求数,top100的时间点(精确到秒)"></a>统计每秒的请求数,top100的时间点(精确到秒)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $4&#125;'</span> access.log |cut -c 14-21|sort|uniq -c|sort -nr|head -n 100</span><br></pre></td></tr></table></figure><h2 id="统计每分钟的请求数-top100的时间点-精确到分钟"><a href="#统计每分钟的请求数-top100的时间点-精确到分钟" class="headerlink" title="统计每分钟的请求数,top100的时间点(精确到分钟)"></a>统计每分钟的请求数,top100的时间点(精确到分钟)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $4&#125;'</span> access.log |cut -c 14-18|sort|uniq -c|sort -nr|head -n 100</span><br></pre></td></tr></table></figure><h2 id="每小时的请求数-top100的时间点-精确到小时"><a href="#每小时的请求数-top100的时间点-精确到小时" class="headerlink" title="每小时的请求数,top100的时间点(精确到小时)"></a>每小时的请求数,top100的时间点(精确到小时)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;print $4&#125;'</span> access.log |cut -c 14-15|sort|uniq -c|sort -nr|head -n 100</span><br></pre></td></tr></table></figure><h1 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h1><blockquote><p>*在nginx log中最后一个字段加入$request_time</p></blockquote><h2 id="列出传输时间超过-3-秒的页面，显示前20条"><a href="#列出传输时间超过-3-秒的页面，显示前20条" class="headerlink" title="列出传输时间超过 3 秒的页面，显示前20条"></a>列出传输时间超过 3 秒的页面，显示前20条</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log|awk <span class="string">'($NF &gt; 3)&#123;print $7&#125;'</span>|sort -n|uniq -c|sort -nr|head -20</span><br></pre></td></tr></table></figure><h2 id="列出php页面请求时间超过3秒的页面，并统计其出现的次数，显示前100条"><a href="#列出php页面请求时间超过3秒的页面，并统计其出现的次数，显示前100条" class="headerlink" title="列出php页面请求时间超过3秒的页面，并统计其出现的次数，显示前100条"></a>列出php页面请求时间超过3秒的页面，并统计其出现的次数，显示前100条</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat access.log|awk <span class="string">'($NF &gt; 1 &amp;&amp; $7~/\.php/)&#123;print $7&#125;'</span>|sort -n|uniq -c|sort -nr|head -100</span><br></pre></td></tr></table></figure><h1 id="蜘蛛抓取统计"><a href="#蜘蛛抓取统计" class="headerlink" title="蜘蛛抓取统计"></a>蜘蛛抓取统计</h1><h2 id="统计蜘蛛抓取次数"><a href="#统计蜘蛛抓取次数" class="headerlink" title="统计蜘蛛抓取次数"></a>统计蜘蛛抓取次数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">'Baiduspider'</span> access.log |wc -l</span><br></pre></td></tr></table></figure><h2 id="统计蜘蛛抓取404的次数"><a href="#统计蜘蛛抓取404的次数" class="headerlink" title="统计蜘蛛抓取404的次数"></a>统计蜘蛛抓取404的次数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">'Baiduspider'</span> access.log |grep <span class="string">'404'</span> | wc -l</span><br></pre></td></tr></table></figure><h1 id="TCP连接统计"><a href="#TCP连接统计" class="headerlink" title="TCP连接统计"></a>TCP连接统计</h1><h2 id="查看当前TCP连接数"><a href="#查看当前TCP连接数" class="headerlink" title="查看当前TCP连接数"></a>查看当前TCP连接数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tan | grep <span class="string">"ESTABLISHED"</span> | grep <span class="string">":80"</span> | wc -l</span><br></pre></td></tr></table></figure><h2 id="用tcpdump嗅探80端口的访问看看谁最高"><a href="#用tcpdump嗅探80端口的访问看看谁最高" class="headerlink" title="用tcpdump嗅探80端口的访问看看谁最高"></a>用tcpdump嗅探80端口的访问看看谁最高</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F<span class="string">"."</span> <span class="string">'&#123;print $1"."$2"."$3"."$4&#125;'</span> | sort | uniq -c | sort -nr</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;统计PV-UV数&quot;&gt;&lt;a href=&quot;#统计PV-UV数&quot; class=&quot;headerlink&quot; title=&quot;统计PV,UV数&quot;&gt;&lt;/a&gt;统计PV,UV数&lt;/h1&gt;&lt;h2 id=&quot;统计所有的PV数&quot;&gt;&lt;a href=&quot;#统计所有的PV数&quot; class=&quot;head
      
    
    </summary>
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/categories/shell%E8%84%9A%E6%9C%AC/"/>
    
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/tags/shell%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Windows脚本</title>
    <link href="https://www.zhangqifei.top/2019/06/28/shell%E8%84%9A%E6%9C%AC/Windows/"/>
    <id>https://www.zhangqifei.top/2019/06/28/shell脚本/Windows/</id>
    <published>2019-06-28T04:04:22.058Z</published>
    <updated>2019-07-01T07:27:29.234Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>锁屏.vbs</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Dim WSHShell</span><br><span class="line"></span><br><span class="line">Set WSHShell=WScript.CreateObject(&quot;WScript.Shell&quot;)</span><br><span class="line"></span><br><span class="line">WSHShell.Run &quot;Rundll32.exe user32.dll,LockWorkStation&quot;, 0</span><br></pre></td></tr></table></figure></li><li><p>休眠.bat</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown.exe -h</span><br></pre></td></tr></table></figure></li><li><p>start_jar.bat(Windows后台运行jar)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start javaw -jar D:\CreditSoft\hurongAPI.jar</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;锁屏.vbs&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;
      
    
    </summary>
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/categories/shell%E8%84%9A%E6%9C%AC/"/>
    
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/tags/shell%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>批量创建用户，口令随机</title>
    <link href="https://www.zhangqifei.top/2019/06/28/shell%E8%84%9A%E6%9C%AC/%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7/"/>
    <id>https://www.zhangqifei.top/2019/06/28/shell脚本/批量创建用户/</id>
    <published>2019-06-28T04:01:58.952Z</published>
    <updated>2019-07-01T06:27:13.385Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 1 100` ; <span class="keyword">do</span>       <span class="comment">#展开列表</span></span><br><span class="line">        username=user<span class="variable">$i</span>         <span class="comment">#定义变量username</span></span><br><span class="line">        useradd  <span class="variable">$username</span>      <span class="comment">#创建用户命令“useradd”</span></span><br><span class="line">        password=`openssl rand -base64 10 |head -c 8`       <span class="comment">#定义变量password</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$password</span> | passwd <span class="variable">$username</span> --stdin &amp;&gt;/dev/null  <span class="comment">#修改用户登录口令。</span></span><br><span class="line">        <span class="comment">#“echo XXXX| passwd user --stdin”批量直接修改口令的命令，仅root可用。</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$username</span> <span class="variable">$password</span> &gt;&gt; password.txt  </span><br><span class="line">        <span class="comment">#将变量$username和$password 追加至文件password.txt中</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"finish"</span>        <span class="comment">#打印"finish"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
      
    
    </summary>
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/categories/shell%E8%84%9A%E6%9C%AC/"/>
    
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/tags/shell%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>全局初始化</title>
    <link href="https://www.zhangqifei.top/2019/06/28/shell%E8%84%9A%E6%9C%AC/%E5%85%A8%E5%B1%80%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
    <id>https://www.zhangqifei.top/2019/06/28/shell脚本/全局初始化/</id>
    <published>2019-06-28T03:50:51.840Z</published>
    <updated>2019-07-01T06:25:24.969Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#********************************************************************</span></span><br><span class="line"><span class="comment">#encoding  -*-utf8-*-</span></span><br><span class="line"><span class="comment">#Author:</span></span><br><span class="line"><span class="comment">#Date:         2017-12-19</span></span><br><span class="line"><span class="comment">#URL: </span></span><br><span class="line"><span class="comment">#Description：  The test script</span></span><br><span class="line"><span class="comment">#Copyright (C):    2017 All rights reserved</span></span><br><span class="line"><span class="comment">#QQ Numbers:</span></span><br><span class="line"><span class="comment">#********************************************************************</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看系统版本 </span></span><br><span class="line">Get_host_version=`cat /etc/centos-release | grep -i centos | grep -o <span class="string">"\&lt;[[:digit:]]\+"</span> |head -1`</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看内核版本</span></span><br><span class="line">kernel_version=`uname -r`</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置开机启动文件的权限,设置开机脚本</span></span><br><span class="line">chmod +x /etc/rc.d/rc.local</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装wget必备工具($?上一个执行结果，$$当前进程ID)</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Install_wget</span></span>()&#123;</span><br><span class="line">    mount /dev/sr0 /mnt</span><br><span class="line">    [ $? -ne 0 ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"未添加光盘源！退出脚本"</span> ； <span class="built_in">kill</span> -9 $$ ; &#125;</span><br><span class="line">    rpm -ivh /mnt/Packages/wget*</span><br><span class="line">    <span class="built_in">cd</span> /</span><br><span class="line">    umount /mnt    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改字符集位zh_CN.UTF-8</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Modify_charaset</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'export LANG=zh_CN.UTF-8'</span> &gt;&gt;/etc/profile</span><br><span class="line">    <span class="built_in">export</span> LANG=zh_CN.UTF-8</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出错误的系统版本</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Error_system_version</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"未知的系统版本 <span class="variable">$Get_host_version</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#备份操作的相关目录</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Bakup_etc</span></span>()&#123;</span><br><span class="line">    Now_of_time=`date +<span class="string">'%F_%H.%M'</span>`</span><br><span class="line">    back_path=/bak/initsys/</span><br><span class="line">    mkdir -p <span class="variable">$back_path</span></span><br><span class="line">    tar -czf <span class="variable">$back_path</span>/etc.<span class="variable">$&#123;Now_of_time&#125;</span>.tar.gz /etc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭防火墙和selinux(getenforce 获取)</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Off_firewall_and_selinux</span></span>()&#123;</span><br><span class="line">    <span class="comment">#off firewall</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == 7 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        systemctl stop firewalld &amp;&gt;/dev/null</span><br><span class="line">        systemctl <span class="built_in">disable</span> firewalld &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == 6 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        service iptables stop &amp;&gt;/dev/null</span><br><span class="line">        chkconfig iptables off &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Error_system_version</span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="comment">#off selinux</span></span><br><span class="line">    sed -ri <span class="string">'s/^(SELINUX=).*$/\1disabled/g'</span> /etc/selinux/config</span><br><span class="line">    setenforce 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置时区和时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Set_timezone_and_time</span></span>()&#123;</span><br><span class="line">    /usr/bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">    /usr/sbin/ntpdate 10.180.4.204 <span class="comment">#设置ntp服务器同步，如果需要取消注释</span></span><br><span class="line">    hwclock -w <span class="comment">#同步系统时间到硬件时间</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == <span class="string">'6'</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        cat &gt; /etc/sysconfig/clock &lt;&lt; EOF</span><br><span class="line">ZONE=<span class="string">"Asia/Shanghai"</span></span><br><span class="line">UTC=<span class="literal">false</span></span><br><span class="line">ARC=<span class="literal">false</span></span><br><span class="line">EOF</span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == <span class="string">'7'</span> ] </span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        timedatectl <span class="built_in">set</span>-local-rtc yes</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Error_system_version</span><br><span class="line">    <span class="keyword">fi</span>    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#隐藏系统版本</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Shadow_system_version</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">''</span> &gt; /etc/issue</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">''</span> &gt; /etc/motd</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">''</span> &gt; /etc/redhat-release</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">''</span> &gt; /etc/centos-release</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试外网是否连通</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Test_network</span></span>()&#123;</span><br><span class="line">    ping -c1 www.baidu.com &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置系统最大句柄数</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Set_handler_Num</span></span>()&#123;</span><br><span class="line">    limit_count=`cat /etc/security/limits.conf | grep <span class="string">"^\*[[:blank:]]\+\(soft\|hard\)[[:blank:]]\+\(nofile\|nproc\)[[:blank:]]\+"</span> | wc -l`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$limit_count</span>"</span> -eq 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        cat &gt;&gt; /etc/security/limits.conf &lt;&lt; EOF</span><br><span class="line">*   soft   nofile   102400 </span><br><span class="line">*   hard   nofile   102400</span><br><span class="line">*   soft   nproc    40960</span><br><span class="line">*   hard   nproc    40960</span><br><span class="line">EOF</span><br><span class="line">        <span class="built_in">ulimit</span> -n 102400 <span class="comment">#设置文件打开数,并马上生效，</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"已经添加过limit限制!"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#优化tcp连接</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Set_tcp_kernel_arguments</span></span>()&#123;</span><br><span class="line">    kernel_args=/etc/sysctl.d/tcp_optimization.conf</span><br><span class="line">    flag_1=`cat <span class="variable">$kernel_args</span> 2&gt;/dev/null | grep tcp_flag | awk <span class="string">'&#123;print $2&#125;'</span>`</span><br><span class="line">    flag_2=`cat <span class="variable">$kernel_args</span> 2&gt;/dev/null | grep tcp_flag | wc -l`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$flag_2</span>"</span> -gt 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"系统错误，TCP重复的优化参数，请查看 <span class="variable">$kernel_args</span> 是否正确!"</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$flag_1</span>"</span> == 1 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"TCP内核参数已经优化过了。"</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"#tcp_flag 1"</span> &gt;&gt;<span class="variable">$kernel_args</span></span><br><span class="line">    touch <span class="variable">$kernel_args</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_syncookies = 1"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#开启SYN Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_tw_recycle = 1"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#表示开启TCP连接中TIME-WAIT sockets的快速回收</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_tw_reuse = 1"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_fin_timeout = 5"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">##指定孤儿连接在内核中生存的时间为5秒 </span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_keepalive_time = 1200"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#表示当keepalive起用的时候，TCP发送keepalive消息的频度。缺省&gt;是2小时，改为20分钟</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.ip_local_port_range = 10000 65000"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#表示用于向外连接的端口范围</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_max_syn_backlog = 8192"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#表示SYN队列的长度，默认为1024，加大队列长度为8192，可以容纳更多等待连接的网络连接数</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"net.ipv4.tcp_max_tw_buckets = 5000"</span> &gt;&gt; <span class="variable">$kernel_args</span> <span class="comment">#表示系统同时保持TIME_WAIT的最大数量，如果超过这个数字，TIME_WAIT将立刻被清除并打印警告信息。</span></span><br><span class="line">    sysctl -p <span class="variable">$kernel_args</span> &amp;&gt;/dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? != 0 ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">'读取Tcp内核参数错误！'</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用ssh的DNS功能</span></span><br><span class="line"><span class="comment">#在操作中，我们都会用SSH协议来远程控制虚拟机，但是在输入用户名时候，会有一段时间的卡顿，此时正在进行SSH协议的DNS解析，我们为了快速的连接到虚拟机上，就要关闭这个解析过程</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Disabled_sshd_dns</span></span>()&#123;</span><br><span class="line">    [ `grep <span class="string">"^#UseDNS \(no\|yes\)"</span> /etc/ssh/sshd_config | wc -l` -eq 0 ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">'已禁用该配置，Do nothing！'</span> ; <span class="built_in">return</span> 1; &#125;</span><br><span class="line">    sed -ri <span class="string">'s@#UseDNS (no|yes)@UseDNS no@g'</span> /etc/ssh/sshd_config</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == <span class="string">'6'</span> ]</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        service sshd restart</span><br><span class="line">    <span class="keyword">elif</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == <span class="string">'7'</span> ] </span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        systemctl restart sshd</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        Error_system_version</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置网卡名称为eth*</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Modify_network_card_name</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$Get_host_version</span>"</span> == <span class="string">'6'</span> ] <span class="comment">#修改Centos6 的网卡</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">        Count_cart=`cat /etc/udev/rules.d/70-persistent-net.rules | grep <span class="string">'SUBSYSTEM=="net", ACTION=="add"'</span> | wc -l`</span><br><span class="line">        [ <span class="string">"<span class="variable">$Count_cart</span>"</span> -eq 0 ] &amp;&amp; &#123; <span class="built_in">echo</span> <span class="string">"没有网卡信息，请检查网卡驱动！"</span> ; <span class="built_in">return</span> 1; &#125;</span><br><span class="line">        count=1</span><br><span class="line">        All_mac=`cat 70-persistent-net.rules | grep <span class="string">'SUBSYSTEM=="net", ACTION=="add"'</span> |grep -o <span class="string">"\([0-9a-fA-F]\&#123;2\&#125;:\)\&#123;5\&#125;[0-9a-fA-F]\&#123;2\&#125;"</span>`</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> `<span class="variable">$ALL_mac</span>`</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">            sed -ri <span class="string">'s@('</span><span class="variable">$i</span><span class="string">'.*NAME=").*[[:digit:]]+"$@\1eth'</span><span class="variable">$count</span><span class="string">'$"@'</span> /etc/udev/rules.d/70-persistent-net.rules</span><br><span class="line">            <span class="built_in">let</span> count+=1</span><br><span class="line">            <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">'修改网卡名成功,请查看配置!'</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"`cat /etc/udev/rules.d/70-persistent-net.rules | grep 'SUBSYSTEM=="</span>net<span class="string">", ACTION=="</span>add<span class="string">", DRIVERS=="</span>?*<span class="string">", ATTR&#123;address&#125;=="</span><span class="string">'`"</span></span><br><span class="line"><span class="string">    elif [ "$Get_host_version" == '</span>7<span class="string">' ] #修改Centos7 的网卡</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">        boot_grub=/boot/grub2/grub.cfg</span></span><br><span class="line"><span class="string">        grub_default_cfg=/etc/default/grub</span></span><br><span class="line"><span class="string">        Name_count=`cat  $boot_grub 2&gt;/dev/null | grep "quiet[[:blank:]]\+net.ifnames" | wc -l`</span></span><br><span class="line"><span class="string">        cp $grub_default_cfg $&#123;grub_default_cfg&#125;.`date +'</span>%F_%H.%M<span class="string">'`</span></span><br><span class="line"><span class="string">        [ $? -ne 0 ] &amp;&amp; &#123; echo "没有 $grub_default_cfg 这个文件" ; return 1; &#125;</span></span><br><span class="line"><span class="string">        if [ "$Name_count" -eq 0 ]</span></span><br><span class="line"><span class="string">            then</span></span><br><span class="line"><span class="string">            sed -ri '</span>s/(GRUB_CMDLINE_LINUX=.*quiet)/\1 net.ifnames=0/g<span class="string">' $grub_default_cfg</span></span><br><span class="line"><span class="string">            grub2-mkconfig -o $boot_grub</span></span><br><span class="line"><span class="string">            if [ $? -eq 0 ]</span></span><br><span class="line"><span class="string">                then</span></span><br><span class="line"><span class="string">                echo '</span>生成新的配置文件，生效需重启！<span class="string">'</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                echo "grub文件生成错误！ $boot_grub 可能会产生错误！请检查"</span></span><br><span class="line"><span class="string">            fi</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            echo '</span>已经修改过grub参数，无需再次修改！Do nothing！<span class="string">'</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        Error_system_version</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#配置yum仓库为aliyun</span></span><br><span class="line"><span class="string">function Modify_yumrepo()&#123;</span></span><br><span class="line"><span class="string">    repo_path=/etc/yum.repos.d/</span></span><br><span class="line"><span class="string">    base_repo_count=`ls $repo_path | grep Alibase.repo | wc -l`</span></span><br><span class="line"><span class="string">    epel_repo_count=`ls $repo_path | grep epel.repo | wc -l`</span></span><br><span class="line"><span class="string">    mkdir -p $&#123;repo_path&#125;bak 2&gt;/dev/null</span></span><br><span class="line"><span class="string">    cd $repo_path</span></span><br><span class="line"><span class="string">    Test_network</span></span><br><span class="line"><span class="string">    [ $? -ne 0 ] &amp;&amp; &#123; echo '</span>网络不通,退出函数！<span class="string">' ; return 1; &#125;</span></span><br><span class="line"><span class="string">    mv CentOS-* bak 2&gt;/dev/null</span></span><br><span class="line"><span class="string">    #根据系统版本添加源</span></span><br><span class="line"><span class="string">    if [ "$Get_host_version" -eq 6 ]</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">        if [ "$base_repo_count" -eq 0 ];then</span></span><br><span class="line"><span class="string">            wget https://mirrors.aliyun.com/repo/Centos-6.repo -O $&#123;repo_path&#125;Alibase.repo</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            echo "已经添加过阿里源！"</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">        sleep 1</span></span><br><span class="line"><span class="string">        if [ "$epel_repo_count" -ne 0 ];then</span></span><br><span class="line"><span class="string">            wget https://mirrors.aliyun.com/repo/epel-6.repo -O $&#123;repo_path&#125;epel.repo</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            echo "已经添加过epel源！"</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">        yum clean all</span></span><br><span class="line"><span class="string">    elif [ "$Get_host_version" -eq 7 ]</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">        if [ "$base_repo_count" -eq 0 ];then</span></span><br><span class="line"><span class="string">            wget https://mirrors.aliyun.com/repo/Centos-7.repo -O $&#123;repo_path&#125;Alibase.repo</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            echo "已经添加过阿里源！"</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">        sleep 1</span></span><br><span class="line"><span class="string">        if [ "$epel_repo_count" -ne 0 ];then</span></span><br><span class="line"><span class="string">            wget https://mirrors.aliyun.com/repo/epel-7.repo -O $&#123;repo_path&#125;epel.repo</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">            echo "已经添加过epel源！"</span></span><br><span class="line"><span class="string">        fi</span></span><br><span class="line"><span class="string">        yum clean all   </span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        Error_system_version</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#安装一些软件包</span></span><br><span class="line"><span class="string">function Install_some_packege()&#123;</span></span><br><span class="line"><span class="string">packges="gcc glibc zlib openssl openssl-devel lrzsz lftp ftp telnet nmap-ncat net-snmp net-snmp-devel vim sysstat bash-completion wget lsof psmisc ntp"</span></span><br><span class="line"><span class="string">yum install -y $packges</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#配置Bond</span></span><br><span class="line"><span class="string">function Config_Bond()&#123;</span></span><br><span class="line"><span class="string">    [ `ls /etc/sysconfig/network-scripts/ifcfg-Bond* 2&gt;/dev/null | wc -l ` -ne 0 ] &amp;&amp; &#123; echo '</span>已经配置了了Bond<span class="string">' ; return 1; &#125;</span></span><br><span class="line"><span class="string">    Net_card_name=`netstat -I | sed '</span>1,2d<span class="string">' | sed '</span>/lo/d<span class="string">' | awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;<span class="string">'`</span></span><br><span class="line"><span class="string">    Net_card_Num=`netstat -I | sed '</span>1,2d<span class="string">' | sed '</span>/lo/d<span class="string">' | awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;<span class="string">' | wc -l`</span></span><br><span class="line"><span class="string">    Named_eth_count=`echo $Net_card_name | grep -io eth | wc -l`</span></span><br><span class="line"><span class="string">    [ "$Named_eth_count" -ne "$Net_card_Num" ] &amp;&amp; &#123; echo "网卡名并未变更为eth，或者已经添加过了聚合类型！配置失败！" ; return 1; &#125;</span></span><br><span class="line"><span class="string">    net_path=/etc/sysconfig/network-scripts/</span></span><br><span class="line"><span class="string">    if [ "$Get_host_version" == '</span>6<span class="string">' ]</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">        service NetworkManager stop</span></span><br><span class="line"><span class="string">        chkconfig NetworkManager off</span></span><br><span class="line"><span class="string">        for i in $Net_card_name</span></span><br><span class="line"><span class="string">            do</span></span><br><span class="line"><span class="string">            cat &gt;&gt;$&#123;net_path&#125;ifcfg-$i &lt;&lt;EOF</span></span><br><span class="line"><span class="string">DEVICE=$i</span></span><br><span class="line"><span class="string">BOOTPROTO=none</span></span><br><span class="line"><span class="string">MASTER=bond0</span></span><br><span class="line"><span class="string">SLAVE=yes        </span></span><br><span class="line"><span class="string">USERCTL=no</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">            done</span></span><br><span class="line"><span class="string">        cat &gt;&gt;$&#123;net_path&#125;ifcfg-Bond0 &lt;&lt;EOF</span></span><br><span class="line"><span class="string">DEVICE=bond0</span></span><br><span class="line"><span class="string">BOOTPROTO=none</span></span><br><span class="line"><span class="string">BONDING_OPTS= "miimon=100 mode=0"</span></span><br><span class="line"><span class="string">DNS1=8.8.8.8</span></span><br><span class="line"><span class="string">IPADDR=172.18.30.2</span></span><br><span class="line"><span class="string">PREFIX=16</span></span><br><span class="line"><span class="string">GATEWAY=172.18.0.1</span></span><br><span class="line"><span class="string">ONBOOT=yes</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="string">        service network restart</span></span><br><span class="line"><span class="string">    elif [ "$Get_host_version" == '</span>7<span class="string">' ]</span></span><br><span class="line"><span class="string">        then</span></span><br><span class="line"><span class="string">        nmcli con add type bond con-name Bond0 ifname Bond0 mode 0 ipv4.method manual ipv4.addresses 172.18.30.1 ipv4.gateway 172.18.0.1 ipv4.dns 8.8.8.8 &amp;&gt;/dev/null</span></span><br><span class="line"><span class="string">        [ $? -eq 0 ] &amp;&amp; nmcli con up Bond0</span></span><br><span class="line"><span class="string">        for i in $Net_card_name</span></span><br><span class="line"><span class="string">            do</span></span><br><span class="line"><span class="string">            nmcli con add type bond-slave con-name $i-bond ifname $i master Bond0</span></span><br><span class="line"><span class="string">            [ $? -eq 0 ] &amp;&amp; nmcli con up $i-bond || echo "激活失败！"</span></span><br><span class="line"><span class="string">            done</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">        Error_system_version</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">&#125; </span></span><br><span class="line"><span class="string">#这里开始调用执行</span></span><br><span class="line"><span class="string">Bakup_etc   #备份etc</span></span><br><span class="line"><span class="string">Off_firewall_and_selinux  #关闭selinux</span></span><br><span class="line"><span class="string">Install_wget #安装wget</span></span><br><span class="line"><span class="string">#Modify_charaset  #修改全局字符集</span></span><br><span class="line"><span class="string">Set_timezone_and_time  #设置时区和时间</span></span><br><span class="line"><span class="string">Set_handler_Num   # 设置打开文件数</span></span><br><span class="line"><span class="string">Set_tcp_kernel_arguments  #优化内核tcp连接</span></span><br><span class="line"><span class="string">#Modify_yumrepo   #修改yum仓库</span></span><br><span class="line"><span class="string">#Install_some_packege #安装一些软件包</span></span><br><span class="line"><span class="string">Disabled_sshd_dns #禁用ssh的dns功能</span></span><br><span class="line"><span class="string">#Shadow_system_version #隐藏系统版本</span></span><br><span class="line"><span class="string">Modify_network_card_name   #统一网卡名称为eth</span></span><br><span class="line"><span class="string">#Config_Bond    #配置Bond，默认ip为172.18.30.1，需要手动配置</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=
      
    
    </summary>
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/categories/shell%E8%84%9A%E6%9C%AC/"/>
    
    
      <category term="shell脚本" scheme="https://www.zhangqifei.top/tags/shell%E8%84%9A%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>神级注释</title>
    <link href="https://www.zhangqifei.top/2019/06/04/%E9%9A%8F%E7%AC%94/%E7%A5%9E%E7%BA%A7%E6%B3%A8%E9%87%8A/"/>
    <id>https://www.zhangqifei.top/2019/06/04/随笔/神级注释/</id>
    <published>2019-06-04T02:52:08.234Z</published>
    <updated>2019-06-04T02:54:03.962Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>写在前面的话：一时兴起就收集了以下神注释，希望能为广大ITer带来快乐，缓解你们工作中的压力，下面开车，先自爆头像，下文会给出制作链接。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">/***　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　瓦瓦　　　　　　　　　　　　十　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　十齱龠己　　　　　　　　　亅瓦車己　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　乙龍龠毋日丶　　　　　　丶乙己毋毋丶　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　十龠馬鬼車瓦　　　　　　己十瓦毋毋　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　鬼馬龠馬龠十　　　　己己毋車毋瓦　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　毋龠龠龍龠鬼乙丶丶乙車乙毋鬼車己　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　乙龠龍龍鬼龍瓦　十瓦毋乙瓦龠瓦亅　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　馬齱龍馬鬼十丶日己己己毋車乙丶　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　己齱馬鬼車十十毋日乙己己乙乙　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　車馬齱齱日乙毋瓦己乙瓦日亅　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　亅車齺龖瓦乙車龖龍乙乙十　　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　　日龠龠十亅車龍毋十十　　　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　　日毋己亅　己己十亅亅　　　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　丶己十十乙　　丶丶丶丶丶　　　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　亅己十龍龖瓦　　丶　丶　乙十　　　　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　亅己十龠龖毋　丶丶　　丶己鬼鬼瓦亅　　　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　十日十十日亅丶亅丶　丶十日毋鬼馬馬車乙　　　　　　　</span><br><span class="line"> *　　　　　　　　　　　十日乙十亅亅亅丶　　十乙己毋鬼鬼鬼龍齺馬乙　　　　　</span><br><span class="line"> *　　　　　　　　　　　丶瓦己乙十十亅丶亅乙乙乙己毋鬼鬼鬼龍齱齺齺鬼十　　　</span><br><span class="line"> *　　　　　　　　　　　　乙乙十十十亅乙瓦瓦己日瓦毋鬼鬼龠齱齱龍龍齱齱毋丶　</span><br><span class="line"> *　　　　　　　　　　　　亅十十十十乙瓦車毋瓦瓦日車馬龠龍龍龍龍龍龠龠龠馬亅</span><br><span class="line"> *　　　　　　　　　　　　　十十十十己毋車瓦瓦瓦瓦鬼馬龠龍龠龠龍龠龠龠馬龠車</span><br><span class="line"> *　　　　　　　　　　　　　　亅十十日毋瓦日日瓦鬼鬼鬼龠龠馬馬龠龍龍龠馬馬車</span><br><span class="line"> *　　　　　　　　　　　　　　亅亅亅乙瓦瓦毋車車車馬龍龠鬼鬼馬龠龍龍龠馬馬鬼</span><br><span class="line"> *　　　　　　　　　　　　丶丶乙亅亅乙車鬼鬼鬼毋車龍龍龠鬼馬馬龠龍齱齱龍馬鬼</span><br><span class="line"> *　　　　　　　　　　　亅己十十己十日鬼鬼車瓦毋龠龍龠馬馬龠龠龠齱齺齺齱龠鬼</span><br><span class="line"> *　　　　　　　　　　　　亅乙乙乙十車馬車毋馬齱齱龍龠龠龠馬龠龍齱龍龠龠鬼瓦</span><br><span class="line"> *　　　　　　　　　　　　　　　　丶毋龠鬼車瓦車馬龠龍龠龠龍齱齱龠馬馬鬼毋日</span><br><span class="line"> *　　　　　　　　　　　　　　　　十乙己日十　　丶己鬼龍齱齺齱龍馬馬馬車毋己</span><br><span class="line"> *　　　　　　　　　　　　　　丶十己乙亅丶　　　　　　亅瓦馬龠龍龠龠馬毋瓦乙</span><br><span class="line"> *　　　　　　　　　　　　　丶十十乙亅十　　　　　　　　亅己瓦車馬龠鬼車瓦乙</span><br><span class="line"> *　　　　　　　　　　　　　丶十乙十十丶　　　　　　　　　丶丶亅十瓦鬼車瓦己</span><br><span class="line"> *　　　　　　　　　　　　　　丶亅亅丶　　　　　　　　　　　　　　　亅日瓦日</span><br><span class="line"> *　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　丶</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><p>就不卖关子了，图片转字符可以上这个<a href="http://www.makepic.net/Tool/Image2ascii.html" target="_blank" rel="noopener">传送门</a>，白底的话会按空格补全，否则都为字符。</p><p>这不，下面的两只doge和一头滑稽就是产自于它，have fun，快去制作专属的字符注释吧。</p><p>再补上一个好玩的网站<a href="http://www.asciiworld.com/" target="_blank" rel="noopener">Ascii World</a>，由于这网站的图形太多了，我就不贴上来了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br></pre></td><td class="code"><pre><span class="line">/***                                                                          </span><br><span class="line"> *          .,:,,,                                        .::,,,::.          </span><br><span class="line"> *        .::::,,;;,                                  .,;;:,,....:i:         </span><br><span class="line"> *        :i,.::::,;i:.      ....,,:::::::::,....   .;i:,.  ......;i.        </span><br><span class="line"> *        :;..:::;::::i;,,:::;:,,,,,,,,,,..,.,,:::iri:. .,:irsr:,.;i.        </span><br><span class="line"> *        ;;..,::::;;;;ri,,,.                    ..,,:;s1s1ssrr;,.;r,        </span><br><span class="line"> *        :;. ,::;ii;:,     . ...................     .;iirri;;;,,;i,        </span><br><span class="line"> *        ,i. .;ri:.   ... ............................  .,,:;:,,,;i:        </span><br><span class="line"> *        :s,.;r:... ....................................... .::;::s;        </span><br><span class="line"> *        ,1r::. .............,,,.,,:,,........................,;iir;        </span><br><span class="line"> *        ,s;...........     ..::.,;:,,.          ...............,;1s        </span><br><span class="line"> *       :i,..,.              .,:,,::,.          .......... .......;1,       </span><br><span class="line"> *      ir,....:rrssr;:,       ,,.,::.     .r5S9989398G95hr;. ....,.:s,      </span><br><span class="line"> *     ;r,..,s9855513XHAG3i   .,,,,,,,.  ,S931,.,,.;s;s&amp;BHHA8s.,..,..:r:     </span><br><span class="line"> *    :r;..rGGh,  :SAG;;G@BS:.,,,,,,,,,.r83:      hHH1sXMBHHHM3..,,,,.ir.    </span><br><span class="line"> *   ,si,.1GS,   sBMAAX&amp;MBMB5,,,,,,:,,.:&amp;8       3@HXHBMBHBBH#X,.,,,,,,rr    </span><br><span class="line"> *   ;1:,,SH:   .A@&amp;&amp;B#&amp;8H#BS,,,,,,,,,.,5XS,     3@MHABM&amp;59M#As..,,,,:,is,   </span><br><span class="line"> *  .rr,,,;9&amp;1   hBHHBB&amp;8AMGr,,,,,,,,,,,:h&amp;&amp;9s;   r9&amp;BMHBHMB9:  . .,,,,;ri.  </span><br><span class="line"> *  :1:....:5&amp;XSi;r8BMBHHA9r:,......,,,,:ii19GG88899XHHH&amp;GSr.      ...,:rs.  </span><br><span class="line"> *  ;s.     .:sS8G8GG889hi.        ....,,:;:,.:irssrriii:,.        ...,,i1,  </span><br><span class="line"> *  ;1,         ..,....,,isssi;,        .,,.                      ....,.i1,  </span><br><span class="line"> *  ;h:               i9HHBMBBHAX9:         .                     ...,,,rs,  </span><br><span class="line"> *  ,1i..            :A#MBBBBMHB##s                             ....,,,;si.  </span><br><span class="line"> *  .r1,..        ,..;3BMBBBHBB#Bh.     ..                    ....,,,,,i1;   </span><br><span class="line"> *   :h;..       .,..;,1XBMMMMBXs,.,, .. :: ,.               ....,,,,,,ss.   </span><br><span class="line"> *    ih: ..    .;;;, ;;:s58A3i,..    ,. ,.:,,.             ...,,,,,:,s1,    </span><br><span class="line"> *    .s1,....   .,;sh,  ,iSAXs;.    ,.  ,,.i85            ...,,,,,,:i1;     </span><br><span class="line"> *     .rh: ...     rXG9XBBM#M#MHAX3hss13&amp;&amp;HHXr         .....,,,,,,,ih;      </span><br><span class="line"> *      .s5: .....    i598X&amp;&amp;A&amp;AAAAAA&amp;XG851r:       ........,,,,:,,sh;       </span><br><span class="line"> *      . ihr, ...  .         ..                    ........,,,,,;11:.       </span><br><span class="line"> *         ,s1i. ...  ..,,,..,,,.,,.,,.,..       ........,,.,,.;s5i.         </span><br><span class="line"> *          .:s1r,......................       ..............;shs,           </span><br><span class="line"> *          . .:shr:.  ....                 ..............,ishs.             </span><br><span class="line"> *              .,issr;,... ...........................,is1s;.               </span><br><span class="line"> *                 .,is1si;:,....................,:;ir1sr;,                  </span><br><span class="line"> *                    ..:isssssrrii;::::::;;iirsssssr;:..                    </span><br><span class="line"> *                         .,::iiirsssssssssrri;;:.                      </span><br><span class="line"> */ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *               ii.                                         ;9ABH,          </span><br><span class="line"> *              SA391,                                    .r9GG35&amp;G          </span><br><span class="line"> *              &amp;#ii13Gh;                               i3X31i;:,rB1         </span><br><span class="line"> *              iMs,:,i5895,                         .5G91:,:;:s1:8A         </span><br><span class="line"> *               33::::,,;5G5,                     ,58Si,,:::,sHX;iH1        </span><br><span class="line"> *                Sr.,:;rs13BBX35hh11511h5Shhh5S3GAXS:.,,::,,1AG3i,GG        </span><br><span class="line"> *                .G51S511sr;;iiiishS8G89Shsrrsh59S;.,,,,,..5A85Si,h8        </span><br><span class="line"> *               :SB9s:,............................,,,.,,,SASh53h,1G.       </span><br><span class="line"> *            .r18S;..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....,,.1H315199,rX,       </span><br><span class="line"> *          ;S89s,..,,,,,,,,,,,,,,,,,,,,,,,....,,.......,,,;r1ShS8,;Xi       </span><br><span class="line"> *        i55s:.........,,,,,,,,,,,,,,,,.,,,......,.....,,....r9&amp;5.:X1       </span><br><span class="line"> *       59;.....,.     .,,,,,,,,,,,...        .............,..:1;.:&amp;s       </span><br><span class="line"> *      s8,..;53S5S3s.   .,,,,,,,.,..      i15S5h1:.........,,,..,,:99       </span><br><span class="line"> *      93.:39s:rSGB@A;  ..,,,,.....    .SG3hhh9G&amp;BGi..,,,,,,,,,,,,.,83      </span><br><span class="line"> *      G5.G8  9#@@@@@X. .,,,,,,.....  iA9,.S&amp;B###@@Mr...,,,,,,,,..,.;Xh     </span><br><span class="line"> *      Gs.X8 S@@@@@@@B:..,,,,,,,,,,. rA1 ,A@@@@@@@@@H:........,,,,,,.iX:    </span><br><span class="line"> *     ;9. ,8A#@@@@@@#5,.,,,,,,,,,... 9A. 8@@@@@@@@@@M;    ....,,,,,,,,S8    </span><br><span class="line"> *     X3    iS8XAHH8s.,,,,,,,,,,...,..58hH@@@@@@@@@Hs       ...,,,,,,,:Gs   </span><br><span class="line"> *    r8,        ,,,...,,,,,,,,,,.....  ,h8XABMMHX3r.          .,,,,,,,.rX:  </span><br><span class="line"> *   :9, .    .:,..,:;;;::,.,,,,,..          .,,.               ..,,,,,,.59  </span><br><span class="line"> *  .Si      ,:.i8HBMMMMMB&amp;5,....                    .            .,,,,,.sMr</span><br><span class="line"> *  SS       :: h@@@@@@@@@@#; .                     ...  .         ..,,,,iM5</span><br><span class="line"> *  91  .    ;:.,1&amp;@@@@@@MXs.                            .          .,,:,:&amp;S</span><br><span class="line"> *  hS ....  .:;,,,i3MMS1;..,..... .  .     ...                     ..,:,.99</span><br><span class="line"> *  ,8; ..... .,:,..,8Ms:;,,,...                                     .,::.83</span><br><span class="line"> *   s&amp;: ....  .sS553B@@HX3s;,.    .,;13h.                            .:::&amp;1</span><br><span class="line"> *    SXr  .  ...;s3G99XA&amp;X88Shss11155hi.                             ,;:h&amp;,</span><br><span class="line"> *     iH8:  . ..   ,;iiii;,::,,,,,.                                 .;irHA  </span><br><span class="line"> *      ,8X5;   .     .......                                       ,;iihS8Gi</span><br><span class="line"> *         1831,                                                 .,;irrrrrs&amp;@</span><br><span class="line"> *           ;5A8r.                                            .:;iiiiirrss1H</span><br><span class="line"> *             :X@H3s.......                                .,:;iii;iiiiirsrh</span><br><span class="line"> *              r#h:;,...,,.. .,,:;;;;;:::,...              .:;;;;;;iiiirrss1</span><br><span class="line"> *             ,M8 ..,....,.....,,::::::,,...         .     .,;;;iiiiiirss11h</span><br><span class="line"> *             8B;.,,,,,,,.,.....          .           ..   .:;;;;iirrsss111h</span><br><span class="line"> *            i@5,:::,,,,,,,,.... .                   . .:::;;;;;irrrss111111</span><br><span class="line"> *            9Bi,:,,,,......                        ..r91;;;;;iirrsss1ss1111</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***                                                                    </span><br><span class="line"> *            .,,       .,:;;iiiiiiiii;;:,,.     .,,                   </span><br><span class="line"> *          rGB##HS,.;iirrrrriiiiiiiiiirrrrri;,s&amp;##MAS,                </span><br><span class="line"> *         r5s;:r3AH5iiiii;;;;;;;;;;;;;;;;iiirXHGSsiih1,               </span><br><span class="line"> *            .;i;;s91;;;;;;::::::::::::;;;;iS5;;;ii:                  </span><br><span class="line"> *          :rsriii;;r::::::::::::::::::::::;;,;;iiirsi,               </span><br><span class="line"> *       .,iri;;::::;;;;;;::,,,,,,,,,,,,,..,,;;;;;;;;iiri,,.           </span><br><span class="line"> *    ,9BM&amp;,            .,:;;:,,,,,,,,,,,hXA8:            ..,,,.       </span><br><span class="line"> *   ,;&amp;@@#r:;;;;;::::,,.   ,r,,,,,,,,,,iA@@@s,,:::;;;::,,.   .;.      </span><br><span class="line"> *    :ih1iii;;;;;::::;;;;;;;:,,,,,,,,,,;i55r;;;;;;;;;iiirrrr,..       </span><br><span class="line"> *   .ir;;iiiiiiiiii;;;;::::::,,,,,,,:::::,,:;;;iiiiiiiiiiiiri         </span><br><span class="line"> *   iriiiiiiiiiiiiiiii;;;::::::::::::::::;;;iiiiiiiiiiiiiiiir;        </span><br><span class="line"> *  ,riii;;;;;;;;;;;;;:::::::::::::::::::::::;;;;;;;;;;;;;;iiir.       </span><br><span class="line"> *  iri;;;::::,,,,,,,,,,:::::::::::::::::::::::::,::,,::::;;iir:       </span><br><span class="line"> * .rii;;::::,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,::::;;iri       </span><br><span class="line"> * ,rii;;;::,,,,,,,,,,,,,:::::::::::,:::::,,,,,,,,,,,,,:::;;;iir.      </span><br><span class="line"> * ,rii;;i::,,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,,::i;;iir.      </span><br><span class="line"> * ,rii;;r::,,,,,,,,,,,,,:,:::::,:,:::::::,,,,,,,,,,,,,::;r;;iir.      </span><br><span class="line"> * .rii;;rr,:,,,,,,,,,,,,,,:::::::::::::::,,,,,,,,,,,,,:,si;;iri       </span><br><span class="line"> *  ;rii;:1i,,,,,,,,,,,,,,,,,,:::::::::,,,,,,,,,,,,,,,:,ss:;iir:       </span><br><span class="line"> *  .rii;;;5r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sh:;;iri        </span><br><span class="line"> *   ;rii;:;51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.:hh:;;iir,        </span><br><span class="line"> *    irii;::hSr,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,sSs:;;iir:         </span><br><span class="line"> *     irii;;:iSSs:.,,,,,,,,,,,,,,,,,,,,,,,,,,,..:135;:;;iir:          </span><br><span class="line"> *      ;rii;;:,r535r:...,,,,,,,,,,,,,,,,,,..,;sS35i,;;iirr:           </span><br><span class="line"> *       :rrii;;:,;1S3Shs;:,............,:is533Ss:,;;;iiri,            </span><br><span class="line"> *        .;rrii;;;:,;rhS393S55hh11hh5S3393Shr:,:;;;iirr:              </span><br><span class="line"> *          .;rriii;;;::,:;is1h555555h1si;:,::;;;iirri:.               </span><br><span class="line"> *            .:irrrii;;;;;:::,,,,,,,,:::;;;;iiirrr;,                  </span><br><span class="line"> *               .:irrrriiiiii;;;;;;;;iiiiiirrrr;,.                    </span><br><span class="line"> *                  .,:;iirrrrrrrrrrrrrrrrri;:.                        </span><br><span class="line"> *                        ..,:::;;;;:::,,.                             </span><br><span class="line"> */                                                                     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * ┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐</span><br><span class="line"> * │Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐</span><br><span class="line"> * └───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘</span><br><span class="line"> * ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐</span><br><span class="line"> * │~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│&amp; 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │</span><br><span class="line"> * ├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤</span><br><span class="line"> * │ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │&#123; [│&#125; ]│ | \ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │</span><br><span class="line"> * ├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │</span><br><span class="line"> * │ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│&quot; &apos;│ Enter  │               │ 4 │ 5 │ 6 │   │</span><br><span class="line"> * ├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤</span><br><span class="line"> * │ Shift  │ Z │ X │ C │ V │ B │ N │ M │&lt; ,│&gt; .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │</span><br><span class="line"> * ├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││</span><br><span class="line"> * │ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│</span><br><span class="line"> * └─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                    _ooOoo_</span><br><span class="line"> *                   o8888888o</span><br><span class="line"> *                   88&quot; . &quot;88</span><br><span class="line"> *                   (| -_- |)</span><br><span class="line"> *                    O\ = /O</span><br><span class="line"> *                ____/`---&apos;\____</span><br><span class="line"> *              .   &apos; \\| |// `.</span><br><span class="line"> *               / \\||| : |||// \</span><br><span class="line"> *             / _||||| -:- |||||- \</span><br><span class="line"> *               | | \\\ - /// | |</span><br><span class="line"> *             | \_| &apos;&apos;\---/&apos;&apos; | |</span><br><span class="line"> *              \ .-\__ `-` ___/-. /</span><br><span class="line"> *           ___`. .&apos; /--.--\ `. . __</span><br><span class="line"> *        .&quot;&quot; &apos;&lt; `.___\_&lt;|&gt;_/___.&apos; &gt;&apos;&quot;&quot;.</span><br><span class="line"> *       | | : `- \`.;`\ _ /`;.`/ - ` : | |</span><br><span class="line"> *         \ \ `-. \_ __\ /__ _/ .-` / /</span><br><span class="line"> * ======`-.____`-.___\_____/___.-`____.-&apos;======</span><br><span class="line"> *                    `=---=&apos;</span><br><span class="line"> *</span><br><span class="line"> * .............................................</span><br><span class="line"> *          佛祖保佑             永无BUG</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *  佛曰:</span><br><span class="line"> *          写字楼里写字间，写字间里程序员；</span><br><span class="line"> *          程序人员写程序，又拿程序换酒钱。</span><br><span class="line"> *          酒醒只在网上坐，酒醉还来网下眠；</span><br><span class="line"> *          酒醉酒醒日复日，网上网下年复年。</span><br><span class="line"> *          但愿老死电脑间，不愿鞠躬老板前；</span><br><span class="line"> *          奔驰宝马贵者趣，公交自行程序员。</span><br><span class="line"> *          别人笑我忒疯癫，我笑自己命太贱；</span><br><span class="line"> *          不见满街漂亮妹，哪个归得程序员？</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * _ooOoo_</span><br><span class="line"> * o8888888o</span><br><span class="line"> * 88&quot; . &quot;88</span><br><span class="line"> * (| -_- |)</span><br><span class="line"> *  O\ = /O</span><br><span class="line"> * ___/`---&apos;\____</span><br><span class="line"> * .   &apos; \\| |// `.</span><br><span class="line"> * / \\||| : |||// \</span><br><span class="line"> * / _||||| -:- |||||- \</span><br><span class="line"> * | | \\\ - /// | |</span><br><span class="line"> * | \_| &apos;&apos;\---/&apos;&apos; | |</span><br><span class="line"> * \ .-\__ `-` ___/-. /</span><br><span class="line"> * ___`. .&apos; /--.--\ `. . __</span><br><span class="line"> * .&quot;&quot; &apos;&lt; `.___\_&lt;|&gt;_/___.&apos; &gt;&apos;&quot;&quot;.</span><br><span class="line"> * | | : `- \`.;`\ _ /`;.`/ - ` : | |</span><br><span class="line"> * \ \ `-. \_ __\ /__ _/ .-` / /</span><br><span class="line"> * ======`-.____`-.___\_____/___.-`____.-&apos;======</span><br><span class="line"> * `=---=&apos;</span><br><span class="line"> *          .............................................</span><br><span class="line"> *           佛曰：bug泛滥，我已瘫痪！</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *</span><br><span class="line"> *   █████▒█    ██  ▄████▄   ██ ▄█▀       ██████╗ ██╗   ██╗ ██████╗</span><br><span class="line"> * ▓██   ▒ ██  ▓██▒▒██▀ ▀█   ██▄█▒        ██╔══██╗██║   ██║██╔════╝</span><br><span class="line"> * ▒████ ░▓██  ▒██░▒▓█    ▄ ▓███▄░        ██████╔╝██║   ██║██║  ███╗</span><br><span class="line"> * ░▓█▒  ░▓▓█  ░██░▒▓▓▄ ▄██▒▓██ █▄        ██╔══██╗██║   ██║██║   ██║</span><br><span class="line"> * ░▒█░   ▒▒█████▓ ▒ ▓███▀ ░▒██▒ █▄       ██████╔╝╚██████╔╝╚██████╔╝</span><br><span class="line"> *  ▒ ░   ░▒▓▒ ▒ ▒ ░ ░▒ ▒  ░▒ ▒▒ ▓▒       ╚═════╝  ╚═════╝  ╚═════╝</span><br><span class="line"> *  ░     ░░▒░ ░ ░   ░  ▒   ░ ░▒ ▒░</span><br><span class="line"> *  ░ ░    ░░░ ░ ░ ░        ░ ░░ ░</span><br><span class="line"> *           ░     ░ ░      ░  ░</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                    .::::.</span><br><span class="line"> *                  .::::::::.</span><br><span class="line"> *                 :::::::::::  FUCK YOU</span><br><span class="line"> *             ..:::::::::::&apos;</span><br><span class="line"> *           &apos;::::::::::::&apos;</span><br><span class="line"> *             .::::::::::</span><br><span class="line"> *        &apos;::::::::::::::..</span><br><span class="line"> *             ..::::::::::::.</span><br><span class="line"> *           ``::::::::::::::::</span><br><span class="line"> *            ::::``:::::::::&apos;        .:::.</span><br><span class="line"> *           ::::&apos;   &apos;:::::&apos;       .::::::::.</span><br><span class="line"> *         .::::&apos;      ::::     .:::::::&apos;::::.</span><br><span class="line"> *        .:::&apos;       :::::  .:::::::::&apos; &apos;:::::.</span><br><span class="line"> *       .::&apos;        :::::.:::::::::&apos;      &apos;:::::.</span><br><span class="line"> *      .::&apos;         ::::::::::::::&apos;         ``::::.</span><br><span class="line"> *  ...:::           ::::::::::::&apos;              ``::.</span><br><span class="line"> * ```` &apos;:.          &apos;:::::::::&apos;                  ::::..</span><br><span class="line"> *                    &apos;.:::::&apos;                    &apos;:&apos;````..</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *      ┌─┐       ┌─┐</span><br><span class="line"> *   ┌──┘ ┴───────┘ ┴──┐</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   │       ───       │</span><br><span class="line"> *   │  ─┬┘       └┬─  │</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   │       ─┴─       │</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   └───┐         ┌───┘</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         └──────────────┐</span><br><span class="line"> *       │                        │</span><br><span class="line"> *       │                        ├─┐</span><br><span class="line"> *       │                        ┌─┘</span><br><span class="line"> *       │                        │</span><br><span class="line"> *       └─┐  ┐  ┌───────┬──┐  ┌──┘</span><br><span class="line"> *         │ ─┤ ─┤       │ ─┤ ─┤</span><br><span class="line"> *         └──┴──┘       └──┴──┘</span><br><span class="line"> *                神兽保佑</span><br><span class="line"> *               代码无BUG!</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *      ┌─┐       ┌─┐</span><br><span class="line"> *   ┌──┘ ┴───────┘ ┴──┐</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   │       ───       │</span><br><span class="line"> *   │   &gt;        &lt;    │</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   │   ...  ⌒  ...   │</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   └───┐         ┌───┘</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         └──────────────┐</span><br><span class="line"> *       │                        │</span><br><span class="line"> *       │                        ├─┐</span><br><span class="line"> *       │                        ┌─┘</span><br><span class="line"> *       │                        │</span><br><span class="line"> *       └─┐  ┐  ┌───────┬──┐  ┌──┘</span><br><span class="line"> *         │ ─┤ ─┤       │ ─┤ ─┤</span><br><span class="line"> *         └──┴──┘       └──┴──┘</span><br><span class="line"> *                神兽保佑</span><br><span class="line"> *               代码无BUG!</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *      ┌─┐       ┌─┐ + +</span><br><span class="line"> *   ┌──┘ ┴───────┘ ┴──┐++</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   │       ───       │++ + + +</span><br><span class="line"> *   ███████───███████ │+</span><br><span class="line"> *   │                 │+</span><br><span class="line"> *   │       ─┴─       │</span><br><span class="line"> *   │                 │</span><br><span class="line"> *   └───┐         ┌───┘</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         │   + +</span><br><span class="line"> *       │         │</span><br><span class="line"> *       │         └──────────────┐</span><br><span class="line"> *       │                        │</span><br><span class="line"> *       │                        ├─┐</span><br><span class="line"> *       │                        ┌─┘</span><br><span class="line"> *       │                        │</span><br><span class="line"> *       └─┐  ┐  ┌───────┬──┐  ┌──┘  + + + +</span><br><span class="line"> *         │ ─┤ ─┤       │ ─┤ ─┤</span><br><span class="line"> *         └──┴──┘       └──┴──┘  + + + +</span><br><span class="line"> *                神兽保佑</span><br><span class="line"> *               代码无BUG!</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                  ___====-_  _-====___</span><br><span class="line"> *            _--^^^#####//      \\#####^^^--_</span><br><span class="line"> *         _-^##########// (    ) \\##########^-_</span><br><span class="line"> *        -############//  |\^^/|  \\############-</span><br><span class="line"> *      _/############//   (@::@)   \\############\_</span><br><span class="line"> *     /#############((     \\//     ))#############\</span><br><span class="line"> *    -###############\\    (oo)    //###############-</span><br><span class="line"> *   -#################\\  / VV \  //#################-</span><br><span class="line"> *  -###################\\/      \//###################-</span><br><span class="line"> * _#/|##########/\######(   /\   )######/\##########|\#_</span><br><span class="line"> * |/ |#/\#/\#/\/  \#/\##\  |  |  /##/\#/  \/\#/\#/\#| \|</span><br><span class="line"> * `  |/  V  V  `   V  \#\| |  | |/#/  V   &apos;  V  V  \|  &apos;</span><br><span class="line"> *    `   `  `      `   / | |  | | \   &apos;      &apos;  &apos;   &apos;</span><br><span class="line"> *                     (  | |  | |  )</span><br><span class="line"> *                    __\ | |  | | /__</span><br><span class="line"> *                   (vvv(VVV)(VVV)vvv)                </span><br><span class="line"> *                        神兽保佑</span><br><span class="line"> *                       代码无BUG!</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *</span><br><span class="line"> *</span><br><span class="line"> *                                                    __----~~~~~~~~~~~------___</span><br><span class="line"> *                                   .  .   ~~//====......          __--~ ~~</span><br><span class="line"> *                   -.            \_|//     |||\\  ~~~~~~::::... /~</span><br><span class="line"> *                ___-==_       _-~o~  \/    |||  \\            _/~~-</span><br><span class="line"> *        __---~~~.==~||\=_    -_--~/_-~|-   |\\   \\        _/~</span><br><span class="line"> *    _-~~     .=~    |  \\-_    &apos;-~7  /-   /  ||    \      /</span><br><span class="line"> *  .~       .~       |   \\ -_    /  /-   /   ||      \   /</span><br><span class="line"> * /  ____  /         |     \\ ~-_/  /|- _/   .||       \ /</span><br><span class="line"> * |~~    ~~|--~~~~--_ \     ~==-/   | \~--===~~        .\</span><br><span class="line"> *          &apos;         ~-|      /|    |-~\~~       __--~~</span><br><span class="line"> *                      |-~~-_/ |    |   ~\_   _-~            /\</span><br><span class="line"> *                           /  \     \__   \/~                \__</span><br><span class="line"> *                       _--~ _/ | .-~~____--~-/                  ~~==.</span><br><span class="line"> *                      ((-&gt;/~   &apos;.|||&apos; -_|    ~~-/ ,              . _||</span><br><span class="line"> *                                 -_     ~\      ~~---l__i__i__i--~~_/</span><br><span class="line"> *                                 _-~-__   ~)  \--______________--~~</span><br><span class="line"> *                               //.-~~~-~_--~- |-------~~~~~~~~</span><br><span class="line"> *                                      //.-~~~--\</span><br><span class="line"> *                               神兽保佑</span><br><span class="line"> *                              代码无BUG!</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***                              _</span><br><span class="line"> *  _._ _..._ .-&apos;,     _.._(`))</span><br><span class="line"> * &apos;-. `     &apos;  /-._.-&apos;    &apos;,/</span><br><span class="line"> *    )         \            &apos;.</span><br><span class="line"> *   / _    _    |             \</span><br><span class="line"> *  |  a    a    /              |</span><br><span class="line"> *  \   .-.                     ;</span><br><span class="line"> *   &apos;-(&apos;&apos; ).-&apos;       ,&apos;       ;</span><br><span class="line"> *      &apos;-;           |      .&apos;</span><br><span class="line"> *         \           \    /</span><br><span class="line"> *         | 7  .__  _.-\   \</span><br><span class="line"> *         | |  |  ``/  /`  /</span><br><span class="line"> *        /,_|  |   /,_/   /</span><br><span class="line"> *           /,_/      &apos;`-&apos;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> **************************************************************</span><br><span class="line"> *                                                            *</span><br><span class="line"> *   .=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-.       *</span><br><span class="line"> *    |                     ______                     |      *</span><br><span class="line"> *    |                  .-&quot;      &quot;-.                  |      *</span><br><span class="line"> *    |                 /            \                 |      *</span><br><span class="line"> *    |     _          |              |          _     |      *</span><br><span class="line"> *    |    ( \         |,  .-.  .-.  ,|         / )    |      *</span><br><span class="line"> *    |     &gt; &quot;=._     | )(__/  \__)( |     _.=&quot; &lt;     |      *</span><br><span class="line"> *    |    (_/&quot;=._&quot;=._ |/     /\     \| _.=&quot;_.=&quot;\_)    |      *</span><br><span class="line"> *    |           &quot;=._&quot;(_     ^^     _)&quot;_.=&quot;           |      *</span><br><span class="line"> *    |               &quot;=\__|IIIIII|__/=&quot;               |      *</span><br><span class="line"> *    |              _.=&quot;| \IIIIII/ |&quot;=._              |      *</span><br><span class="line"> *    |    _     _.=&quot;_.=&quot;\          /&quot;=._&quot;=._     _    |      *</span><br><span class="line"> *    |   ( \_.=&quot;_.=&quot;     `--------`     &quot;=._&quot;=._/ )   |      *</span><br><span class="line"> *    |    &gt; _.=&quot;                            &quot;=._ &lt;    |      *</span><br><span class="line"> *    |   (_/                                    \_)   |      *</span><br><span class="line"> *    |                                                |      *</span><br><span class="line"> *    &apos;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=&apos;      *</span><br><span class="line"> *                                                            *</span><br><span class="line"> *           LASCIATE OGNI SPERANZA, VOI CH&apos;ENTRATE           *</span><br><span class="line"> **************************************************************</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                                         ,s555SB@@&amp;                          </span><br><span class="line"> *                                      :9H####@@@@@Xi                        </span><br><span class="line"> *                                     1@@@@@@@@@@@@@@8                       </span><br><span class="line"> *                                   ,8@@@@@@@@@B@@@@@@8                      </span><br><span class="line"> *                                  :B@@@@X3hi8Bs;B@@@@@Ah,                   </span><br><span class="line"> *             ,8i                  r@@@B:     1S ,M@@@@@@#8;                 </span><br><span class="line"> *            1AB35.i:               X@@8 .   SGhr ,A@@@@@@@@S                </span><br><span class="line"> *            1@h31MX8                18Hhh3i .i3r ,A@@@@@@@@@5               </span><br><span class="line"> *            ;@&amp;i,58r5                 rGSS:     :B@@@@@@@@@@A               </span><br><span class="line"> *             1#i  . 9i                 hX.  .: .5@@@@@@@@@@@1               </span><br><span class="line"> *              sG1,  ,G53s.              9#Xi;hS5 3B@@@@@@@B1                </span><br><span class="line"> *               .h8h.,A@@@MXSs,           #@H1:    3ssSSX@1                  </span><br><span class="line"> *               s ,@@@@@@@@@@@@Xhi,       r#@@X1s9M8    .GA981               </span><br><span class="line"> *               ,. rS8H#@@@@@@@@@@#HG51;.  .h31i;9@r    .8@@@@BS;i;          </span><br><span class="line"> *                .19AXXXAB@@@@@@@@@@@@@@#MHXG893hrX#XGGXM@@@@@@@@@@MS        </span><br><span class="line"> *                s@@MM@@@hsX#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&amp;,      </span><br><span class="line"> *              :GB@#3G@@Brs ,1GM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B,     </span><br><span class="line"> *            .hM@@@#@@#MX 51  r;iSGAM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8     </span><br><span class="line"> *          :3B@@@@@@@@@@@&amp;9@h :Gs   .;sSXH@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:    </span><br><span class="line"> *      s&amp;HA#@@@@@@@@@@@@@@M89A;.8S.       ,r3@@@@@@@@@@@@@@@@@@@@@@@@@@@r    </span><br><span class="line"> *   ,13B@@@@@@@@@@@@@@@@@@@5 5B3 ;.         ;@@@@@@@@@@@@@@@@@@@@@@@@@@@i    </span><br><span class="line"> *  5#@@#&amp;@@@@@@@@@@@@@@@@@@9  .39:          ;@@@@@@@@@@@@@@@@@@@@@@@@@@@;    </span><br><span class="line"> *  9@@@X:MM@@@@@@@@@@@@@@@#;    ;31.         H@@@@@@@@@@@@@@@@@@@@@@@@@@:    </span><br><span class="line"> *   SH#@B9.rM@@@@@@@@@@@@@B       :.         3@@@@@@@@@@@@@@@@@@@@@@@@@@5    </span><br><span class="line"> *     ,:.   9@@@@@@@@@@@#HB5                 .M@@@@@@@@@@@@@@@@@@@@@@@@@B    </span><br><span class="line"> *           ,ssirhSM@&amp;1;i19911i,.             s@@@@@@@@@@@@@@@@@@@@@@@@@@S   </span><br><span class="line"> *              ,,,rHAri1h1rh&amp;@#353Sh:          8@@@@@@@@@@@@@@@@@@@@@@@@@#:  </span><br><span class="line"> *            .A3hH@#5S553&amp;@@#h   i:i9S          #@@@@@@@@@@@@@@@@@@@@@@@@@A.</span><br><span class="line"> *</span><br><span class="line"> *</span><br><span class="line"> *    又看源码，看你妹妹呀！</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *_______________#########_______________________</span><br><span class="line"> *______________############_____________________</span><br><span class="line"> *______________#############____________________</span><br><span class="line"> *_____________##__###########___________________</span><br><span class="line"> *____________###__######_#####__________________</span><br><span class="line"> *____________###_#######___####_________________</span><br><span class="line"> *___________###__##########_####________________</span><br><span class="line"> *__________####__###########_####_______________</span><br><span class="line"> *________#####___###########__#####_____________</span><br><span class="line"> *_______######___###_########___#####___________</span><br><span class="line"> *_______#####___###___########___######_________</span><br><span class="line"> *______######___###__###########___######_______</span><br><span class="line"> *_____######___####_##############__######______</span><br><span class="line"> *____#######__#####################_#######_____</span><br><span class="line"> *____#######__##############################____</span><br><span class="line"> *___#######__######_#################_#######___</span><br><span class="line"> *___#######__######_######_#########___######___</span><br><span class="line"> *___#######____##__######___######_____######___</span><br><span class="line"> *___#######________######____#####_____#####____</span><br><span class="line"> *____######________#####_____#####_____####_____</span><br><span class="line"> *_____#####________####______#####_____###______</span><br><span class="line"> *______#####______;###________###______#________</span><br><span class="line"> *________##_______####________####______________</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *             ,%%%%%%%%,</span><br><span class="line"> *           ,%%/\%%%%/\%%</span><br><span class="line"> *          ,%%%\c &quot;&quot; J/%%%</span><br><span class="line"> * %.       %%%%/ o  o \%%%</span><br><span class="line"> * `%%.     %%%%    _  |%%%</span><br><span class="line"> *  `%%     `%%%%(__Y__)%%&apos;</span><br><span class="line"> *  //       ;%%%%`\-/%%%&apos;</span><br><span class="line"> * ((       /  `%%%%%%%&apos;</span><br><span class="line"> *  \\    .&apos;          |</span><br><span class="line"> *   \\  /       \  | |</span><br><span class="line"> *    \\/         ) | |</span><br><span class="line"> *     \         /_ | |__</span><br><span class="line"> *     (___________))))))) 攻城湿</span><br><span class="line"> *</span><br><span class="line"> *        _       _</span><br><span class="line"> * __   _(_)_   _(_) __ _ _ __</span><br><span class="line"> * \ \ / / \ \ / / |/ _` |&apos;_ \</span><br><span class="line"> *  \ V /| |\ V /| | (_| | | | |</span><br><span class="line"> *   \_/ |_| \_/ |_|\__,_|_| |_|</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * https://gold.xitu.io/</span><br><span class="line"> *　　　　１１１　　　　　　　　　　　　　　　　　　　　　　　　　１　　　　　　　　　　　</span><br><span class="line"> *　　　　１１１　１１１１１１１１１１１１　　　　　　　　　　　１１１　　　　　　　　　　</span><br><span class="line"> *　　　　１１　　１１１１１１１１１１１１　　　　　　　　　　１１１１１　　　　　　　　　</span><br><span class="line"> *　　　　１１　　１１１　　　　　　　１１　　　　　　　　　１１１１１１１　　　　　　　　</span><br><span class="line"> *　　１１１１　１　１１１１１１１１１１１　　　　　　　　　１１１　１１１１　　　　　　　</span><br><span class="line"> *　　１１１１１１　１１１１１１１１１１１　　　　　　　１１１１　　　１１１１１　　　　　</span><br><span class="line"> *　　１１１１１１　１１　　　　　　　　　　　　　　　１１１１　　　　　１１１１１１　　　</span><br><span class="line"> *　　　　１１　　　１１１１１１１１　１１　　　　１１１１１１１１１１１１１１１１１１　　</span><br><span class="line"> *　　　　１１　　　１１１１１１１１１１１　　　１１１１１１１１１１１１１１１１１１１　　</span><br><span class="line"> *　　　　１１１１１１１１１　１１　　１１　　　　１１　　　　　　１１　　　　　　　　　　</span><br><span class="line"> *　　１１１１１１１１１１１１１１１１１１　　　　　　　　　　　　１１　　　　　　　　　　</span><br><span class="line"> *　　１１１１　　１１１１１１１１１１１１　　　　　　１１１１１１１１１１１１１１　　　　</span><br><span class="line"> *　　１１１１　　１１　　　　１１　　　　　　　　　　１１１１１１１１１１１１１１　　　　</span><br><span class="line"> *　　　　１１　　１１　１１　１１　　１１１　　　　　　１１　　　１１　　１１１　　　　　</span><br><span class="line"> *　　　　１１　　１１　１１　１１　　１１　　　　　　　１１１　　１１　　１１１　　　　　</span><br><span class="line"> *　　　　１１　１１１　１１　１１　　１１　　　　　　　　１１１　１１　１１１　　　　　　</span><br><span class="line"> *　　１１１１　１１１　１１１１１１１１１　　　　　１１　１１１　１１　１１１１１１１　　</span><br><span class="line"> *　　　１１１１１１　　１１１１１１１１１１　　　　１１１１１１１１１１１１１１１１１　　</span><br><span class="line"> *　　　１１　１１１　　　　　　　　　１１１　　　　１１１１１１１１１１１１１１１１１　　</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * https://www.zhihu.com/</span><br><span class="line"> *           _____                    _____                    _____                    _____          </span><br><span class="line"> *          /\    \                  /\    \                  /\    \                  /\    \         </span><br><span class="line"> *         /::\____\                /::\    \                /::\    \                /::\    \        </span><br><span class="line"> *        /:::/    /                \:::\    \              /::::\    \              /::::\    \       </span><br><span class="line"> *       /:::/    /                  \:::\    \            /::::::\    \            /::::::\    \      </span><br><span class="line"> *      /:::/    /                    \:::\    \          /:::/\:::\    \          /:::/\:::\    \     </span><br><span class="line"> *     /:::/____/                      \:::\    \        /:::/__\:::\    \        /:::/__\:::\    \    </span><br><span class="line"> *    /::::\    \                      /::::\    \      /::::\   \:::\    \      /::::\   \:::\    \   </span><br><span class="line"> *   /::::::\    \   _____    ____    /::::::\    \    /::::::\   \:::\    \    /::::::\   \:::\    \  </span><br><span class="line"> *  /:::/\:::\    \ /\    \  /\   \  /:::/\:::\    \  /:::/\:::\   \:::\____\  /:::/\:::\   \:::\    \</span><br><span class="line"> * /:::/  \:::\    /::\____\/::\   \/:::/  \:::\____\/:::/  \:::\   \:::|    |/:::/__\:::\   \:::\____\</span><br><span class="line"> * \::/    \:::\  /:::/    /\:::\  /:::/    \::/    /\::/   |::::\  /:::|____|\:::\   \:::\   \::/    /</span><br><span class="line"> *  \/____/ \:::\/:::/    /  \:::\/:::/    / \/____/  \/____|:::::\/:::/    /  \:::\   \:::\   \/____/</span><br><span class="line"> *           \::::::/    /    \::::::/    /                 |:::::::::/    /    \:::\   \:::\    \     </span><br><span class="line"> *            \::::/    /      \::::/____/                  |::|\::::/    /      \:::\   \:::\____\    </span><br><span class="line"> *            /:::/    /        \:::\    \                  |::| \::/____/        \:::\   \::/    /    </span><br><span class="line"> *           /:::/    /          \:::\    \                 |::|  ~|               \:::\   \/____/     </span><br><span class="line"> *          /:::/    /            \:::\    \                |::|   |                \:::\    \         </span><br><span class="line"> *         /:::/    /              \:::\____\               \::|   |                 \:::\____\        </span><br><span class="line"> *         \::/    /                \::/    /                \:|   |                  \::/    /        </span><br><span class="line"> *          \/____/                  \/____/                  \|___|                   \/____/         </span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * http://www.freebuf.com/</span><br><span class="line"> *           _.._        ,------------.</span><br><span class="line"> *        ,&apos;      `.    ( We want you! )</span><br><span class="line"> *       /  __) __` \    `-,----------&apos;</span><br><span class="line"> *      (  (`-`(-&apos;)  ) _.-&apos;</span><br><span class="line"> *      /)  \  = /  (</span><br><span class="line"> *     /&apos;    |--&apos; .  \</span><br><span class="line"> *    (  ,---|  `-.)__`</span><br><span class="line"> *     )(  `-.,--&apos;   _`-.</span><br><span class="line"> *    &apos;/,&apos;          (  Uu&quot;,</span><br><span class="line"> *     (_       ,    `/,-&apos; )</span><br><span class="line"> *     `.__,  : `-&apos;/  /`--&apos;</span><br><span class="line"> *       |     `--&apos;  |</span><br><span class="line"> *       `   `-._   /</span><br><span class="line"> *        \        (</span><br><span class="line"> *        /\ .      \.  freebuf</span><br><span class="line"> *       / |` \     ,-\</span><br><span class="line"> *      /  \| .)   /   \</span><br><span class="line"> *     ( ,&apos;|\    ,&apos;     :</span><br><span class="line"> *     | \,`.`--&quot;/      &#125;</span><br><span class="line"> *     `,&apos;    \  |,&apos;    /</span><br><span class="line"> *    / &quot;-._   `-/      |</span><br><span class="line"> *    &quot;-.   &quot;-.,&apos;|     ;</span><br><span class="line"> *   /        _/[&quot;---&apos;&quot;&quot;]</span><br><span class="line"> *  :        /  |&quot;-     &apos;</span><br><span class="line"> *  &apos;           |      /</span><br><span class="line"> *              `      |</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * https://campus.alibaba.com/</span><br><span class="line"> *                                 `:::::::::::,</span><br><span class="line"> *                             `::;:::::::;:::::::,  `</span><br><span class="line"> *                          `::;;:::::::@@@@;:::::::`</span><br><span class="line"> *                        ,:::::::::::::@    #@&apos;:::::`</span><br><span class="line"> *                      :::::::::::::::&apos;@@      @;::::</span><br><span class="line"> *                    ::::::::::::&apos;@@@@&apos;```      .+:::`</span><br><span class="line"> *                  ::::::::::;@@@#.              ,:::,</span><br><span class="line"> *                .::::::::+@#@`                   ::::</span><br><span class="line"> *               :::::::+@@&apos;                       ::::</span><br><span class="line"> *             `:::::&apos;@@:                         `:::.</span><br><span class="line"> *            ,::::@@:  `                         ::::</span><br><span class="line"> *           ;::::::@                            .:::;</span><br><span class="line"> *          :;:::::;@`        `                  :::;</span><br><span class="line"> *         :::::::::@`        @                 ;::::</span><br><span class="line"> *        :::::::::#`          @`              ,::::</span><br><span class="line"> *       :::::::::@`         +@ @             .::::`</span><br><span class="line"> *      .::::::&apos;@@`       `@@&apos;  @             ::::,</span><br><span class="line"> *      :::::::++@@@@@@@@@@.                 ::::;</span><br><span class="line"> *     ;:::::::+,   `..`                    :::::</span><br><span class="line"> *    ,::::::::&apos;,                          :::::</span><br><span class="line"> *    :::::::::+,                         :::::`</span><br><span class="line"> *   :::::::::+@.                        ,::::.`                     `,</span><br><span class="line"> *   ::::::;;@+                         .::;::                     `;</span><br><span class="line"> *  :::::::@@                          `:::;:                   `::``</span><br><span class="line"> *  ::::::#@                           ;::::                  .::`</span><br><span class="line"> *  :::::;@                           :::::`               .;::`</span><br><span class="line"> *  :::::@                           `:;:::            `::::;</span><br><span class="line"> *  :::::#                           :::::.        `,;:::::</span><br><span class="line"> *  ::::::                    `      ::::::,.,::::::::::.</span><br><span class="line"> *  ,::::::`              .::        ::::::::::::::::;`</span><br><span class="line"> *   ;::::::::,````.,:::::,          ::::::::::::::.</span><br><span class="line"> *    :::::::::::::::::: `           `::::::::::`</span><br><span class="line"> *     `::::::::::::,                  .:::.</span><br><span class="line"> *         `..`</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * http://www.flvcd.com/</span><br><span class="line"> *  .--,       .--,</span><br><span class="line"> * ( (  \.---./  ) )</span><br><span class="line"> *  &apos;.__/o   o\__.&apos;</span><br><span class="line"> *     &#123;=  ^  =&#125;</span><br><span class="line"> *      &gt;  -  &lt;</span><br><span class="line"> *     /       \</span><br><span class="line"> *    //       \\</span><br><span class="line"> *   //|   .   |\\</span><br><span class="line"> *   &quot;&apos;\       /&apos;&quot;_.-~^`&apos;-.</span><br><span class="line"> *      \  _  /--&apos;         `</span><br><span class="line"> *    ___)( )(___</span><br><span class="line"> *   (((__) (__)))    高山仰止,景行行止.虽不能至,心向往之。</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * 頂頂頂頂頂頂頂頂頂　頂頂頂頂頂頂頂頂頂</span><br><span class="line"> * 頂頂頂頂頂頂頂　　　　　頂頂　　　　　</span><br><span class="line"> * 　　　頂頂　　　頂頂頂頂頂頂頂頂頂頂頂</span><br><span class="line"> * 　　　頂頂　　　頂頂頂頂頂頂頂頂頂頂頂</span><br><span class="line"> * 　　　頂頂　　　頂頂　　　　　　　頂頂</span><br><span class="line"> * 　　　頂頂　　　頂頂　　頂頂頂　　頂頂</span><br><span class="line"> * 　　　頂頂　　　頂頂　　頂頂頂　　頂頂</span><br><span class="line"> * 　　　頂頂　　　頂頂　　頂頂頂　　頂頂</span><br><span class="line"> * 　　　頂頂　　　頂頂　　頂頂頂　　頂頂</span><br><span class="line"> * 　　　頂頂　　　　　　　頂頂頂　</span><br><span class="line"> * 　　　頂頂　　　　　　頂頂　頂頂　頂頂</span><br><span class="line"> * 　頂頂頂頂　　　頂頂頂頂頂　頂頂頂頂頂</span><br><span class="line"> * 　頂頂頂頂　　　頂頂頂頂　　　頂頂頂頂</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> * ░░░░░░░░░░░░░░░░░░░░░░░░▄░░</span><br><span class="line"> * ░░░░░░░░░▐█░░░░░░░░░░░▄▀▒▌░</span><br><span class="line"> * ░░░░░░░░▐▀▒█░░░░░░░░▄▀▒▒▒▐</span><br><span class="line"> * ░░░░░░░▐▄▀▒▒▀▀▀▀▄▄▄▀▒▒▒▒▒▐</span><br><span class="line"> * ░░░░░▄▄▀▒░▒▒▒▒▒▒▒▒▒█▒▒▄█▒▐</span><br><span class="line"> * ░░░▄▀▒▒▒░░░▒▒▒░░░▒▒▒▀██▀▒▌</span><br><span class="line"> * ░░▐▒▒▒▄▄▒▒▒▒░░░▒▒▒▒▒▒▒▀▄▒▒</span><br><span class="line"> * ░░▌░░▌█▀▒▒▒▒▒▄▀█▄▒▒▒▒▒▒▒█▒▐</span><br><span class="line"> * ░▐░░░▒▒▒▒▒▒▒▒▌██▀▒▒░░░▒▒▒▀▄</span><br><span class="line"> * ░▌░▒▄██▄▒▒▒▒▒▒▒▒▒░░░░░░▒▒▒▒</span><br><span class="line"> * ▀▒▀▐▄█▄█▌▄░▀▒▒░░░░░░░░░░▒▒▒</span><br><span class="line"> * 单身狗就这样默默地看着你，一句话也不说。</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                   /88888888888888888888888888\</span><br><span class="line"> *                   |88888888888888888888888888/</span><br><span class="line"> *                    |~~____~~~~~~~~~&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;|</span><br><span class="line"> *                   / \_________/&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\</span><br><span class="line"> *                  /  |              \         \</span><br><span class="line"> *                 /   |  88    88     \         \</span><br><span class="line"> *                /    |  88    88      \         \</span><br><span class="line"> *               /    /                  \        |</span><br><span class="line"> *              /     |   ________        \       |</span><br><span class="line"> *              \     |   \______/        /       |</span><br><span class="line"> *   /&quot;\         \     \____________     /        |</span><br><span class="line"> *   | |__________\_        |  |        /        /</span><br><span class="line"> * /&quot;&quot;&quot;&quot;\           \_------&apos;  &apos;-------/       --</span><br><span class="line"> * \____/,___________\                 -------/</span><br><span class="line"> * ------*            |                    \</span><br><span class="line"> *   ||               |                     \</span><br><span class="line"> *   ||               |                 ^    \</span><br><span class="line"> *   ||               |                | \    \</span><br><span class="line"> *   ||               |                |  \    \</span><br><span class="line"> *   ||               |                |   \    \</span><br><span class="line"> *   \|              /                /&quot;&quot;&quot;\/    /</span><br><span class="line"> *      -------------                |    |    /</span><br><span class="line"> *      |\--_                        \____/___/</span><br><span class="line"> *      |   |\-_                       |</span><br><span class="line"> *      |   |   \_                     |</span><br><span class="line"> *      |   |     \                    |</span><br><span class="line"> *      |   |      \_                  |</span><br><span class="line"> *      |   |        ----___           |</span><br><span class="line"> *      |   |               \----------|</span><br><span class="line"> *      /   |                     |     ----------&quot;&quot;\</span><br><span class="line"> * /&quot;\--&quot;--_|                     |               |  \</span><br><span class="line"> * |_______/                      \______________/    )</span><br><span class="line"> *                                               \___/</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                        d*##$.</span><br><span class="line"> *  zP&quot;&quot;&quot;&quot;&quot;$e.           $&quot;    $o</span><br><span class="line"> * 4$       &apos;$          $&quot;      $</span><br><span class="line"> * &apos;$        &apos;$        J$       $F</span><br><span class="line"> *  &apos;b        $k       $&gt;       $</span><br><span class="line"> *   $k        $r     J$       d$</span><br><span class="line"> *   &apos;$         $     $&quot;       $~</span><br><span class="line"> *    &apos;$        &quot;$   &apos;$E       $</span><br><span class="line"> *     $         $L   $&quot;      $F ...</span><br><span class="line"> *      $.       4B   $      $$$*&quot;&quot;&quot;*b</span><br><span class="line"> *      &apos;$        $.  $$     $$      $F</span><br><span class="line"> *       &quot;$       R$  $F     $&quot;      $</span><br><span class="line"> *        $k      ?$ u*     dF      .$</span><br><span class="line"> *        ^$.      $$&quot;     z$      u$$$$e</span><br><span class="line"> *         #$b             $E.dW@e$&quot;    ?$</span><br><span class="line"> *          #$           .o$$# d$$$$c    ?F</span><br><span class="line"> *           $      .d$$#&quot; . zo$&gt;   #$r .uF</span><br><span class="line"> *           $L .u$*&quot;      $&amp;$$$k   .$$d$$F</span><br><span class="line"> *            $$&quot;            &quot;&quot;^&quot;$$$P&quot;$P9$</span><br><span class="line"> *           JP              .o$$$$u:$P $$</span><br><span class="line"> *           $          ..ue$&quot;      &quot;&quot;  $&quot;</span><br><span class="line"> *          d$          $F              $</span><br><span class="line"> *          $$     ....udE             4B</span><br><span class="line"> *           #$    &quot;&quot;&quot;&quot;` $r            @$</span><br><span class="line"> *            ^$L        &apos;$            $F</span><br><span class="line"> *              RN        4N           $</span><br><span class="line"> *               *$b                  d$</span><br><span class="line"> *                $$k                 $F</span><br><span class="line"> *                 $$b                $F</span><br><span class="line"> *                  $&quot;&quot;               $F</span><br><span class="line"> *                  &apos;$                $</span><br><span class="line"> *                   $L               $</span><br><span class="line"> *                   &apos;$               $</span><br><span class="line"> *                    $               $</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *              ,----------------,              ,---------,</span><br><span class="line"> *         ,-----------------------,          ,&quot;        ,&quot;|</span><br><span class="line"> *       ,&quot;                      ,&quot;|        ,&quot;        ,&quot;  |</span><br><span class="line"> *      +-----------------------+  |      ,&quot;        ,&quot;    |</span><br><span class="line"> *      |  .-----------------.  |  |     +---------+      |</span><br><span class="line"> *      |  |                 |  |  |     | -==----&apos;|      |</span><br><span class="line"> *      |  |  I LOVE DOS!    |  |  |     |         |      |</span><br><span class="line"> *      |  |  Bad command or |  |  |/----|`---=    |      |</span><br><span class="line"> *      |  |  C:\&gt;_          |  |  |   ,/|==== ooo |      ;</span><br><span class="line"> *      |  |                 |  |  |  // |(((( [33]|    ,&quot;</span><br><span class="line"> *      |  `-----------------&apos;  |,&quot; .;&apos;| |((((     |  ,&quot;</span><br><span class="line"> *      +-----------------------+  ;;  | |         |,&quot;</span><br><span class="line"> *         /_)______________(_/  //&apos;   | +---------+</span><br><span class="line"> *    ___________________________/___  `,</span><br><span class="line"> *   /  oooooooooooooooo  .o.  oooo /,   \,&quot;-----------</span><br><span class="line"> *  / ==ooooooooooooooo==.o.  ooo= //   ,`\--&#123;)B     ,&quot;</span><br><span class="line"> * /_==__==========__==_ooo__ooo=_/&apos;   /___________,&quot;</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***</span><br><span class="line"> *                 .-~~~~~~~~~-._       _.-~~~~~~~~~-.</span><br><span class="line"> *             __.&apos;              ~.   .~              `.__</span><br><span class="line"> *           .&apos;//                  \./                  \\`.</span><br><span class="line"> *         .&apos;//                     |                     \\`.</span><br><span class="line"> *       .&apos;// .-~&quot;&quot;&quot;&quot;&quot;&quot;&quot;~~~~-._     |     _,-~~~~&quot;&quot;&quot;&quot;&quot;&quot;&quot;~-. \\`.</span><br><span class="line"> *     .&apos;//.-&quot;                 `-.  |  .-&apos;                 &quot;-.\\`.</span><br><span class="line"> *   .&apos;//______.============-..   \ | /   ..-============.______\\`.</span><br><span class="line"> * .&apos;______________________________\|/______________________________`.</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/***             无可奉告 一颗赛艇</span><br><span class="line"> *  uJjYJYYLLv7r7vJJ5kqSFFFUUjJ7rrr7LLYLJLJ7</span><br><span class="line"> *  JuJujuYLrvuEM@@@B@@@B@B@B@@@MG5Y7vLjYjJL</span><br><span class="line"> *  JYjYJvr7XM@BB8GOOE8ZEEO8GqM8OBBBMu77LLJ7</span><br><span class="line"> *  LJLY7ru@@@BOZ8O8NXFFuSkSu25X0OFZ8MZJ;vLv</span><br><span class="line"> *  YvL7i5@BM8OGGqk22uvriiriii;r7LuSZXEMXrvr</span><br><span class="line"> *  vv7iU@BMNkF1uY7v7rr;iiii:i:i:ii7JEPNBPir</span><br><span class="line"> *  L7iL@BM8Xjuujvv77rr;ri;i;:iiiii:iLXFOBJ:</span><br><span class="line"> *  7ri@B@MOFuUS2Y7L7777rii;:::::i:iirjPG@O:</span><br><span class="line"> *  7:1B@BBOPjXXSJvrL7rr7iiii:i::::i;iv5MBB,</span><br><span class="line"> *  r:0@BBM8SFPX2Y77rri::iirri:::::iii75O@G.</span><br><span class="line"> *  7:SB@BBGqXPk0122UJL::i::r:::i:i;i:v2@Bk.</span><br><span class="line"> *  ri:MB@BBEqEMGq2JLLL1u7.iX51u77LF27iSB@r,</span><br><span class="line"> *  ri,v@B@MB8@qqNEqN1u:5B8BOFE0S7ii7qMB@F::</span><br><span class="line"> *  ii,J80Eq1MZkqPPX5YkPE@B@iXPE52j7:vBjE7::</span><br><span class="line"> *  ii:7MSqkS0PvLv7rrii0@L.Z1iLr::ir:rO,vi::</span><br><span class="line"> *  ii::EZXPSkquLvii:iF@N:.,BUi7ri,::UY;r:::</span><br><span class="line"> *  i::.2ONXqkPXS5FUUEOPP;..iSPXkjLYLLrr:::,</span><br><span class="line"> *  :::,iMXNP0NPLriiLGZ@BB1P87;JuL7r:7ri:::,</span><br><span class="line"> *  :::,.UGqNX0EZF2uUjUuULr:::,:7uuvv77::::.</span><br><span class="line"> *  ::::..5OXqXNJ50NSY;i:.,,,:i77Yvr;v;,,::.</span><br><span class="line"> *  :::,:.jOEPqPJiqBMMMO8NqP0SYLJriirv:.:,:.</span><br><span class="line"> *  ,:,,,.,Zq0P0X7vPFqF1ujLv7r:irrr7j7.,,::.</span><br><span class="line"> *  ,,,....0qk0080v75ujLLv7ri:i:rvj2J...,,,.</span><br><span class="line"> *  ......8@UXqZEMNvJjr;ii::,:::7uuv...,.,,.</span><br><span class="line"> *  .....B@BOvX88GMGk52vririiirJS1i.......,.</span><br><span class="line"> *  .JEMB@B@BMvL0MOMMMO8PE8GPqSk2L:.........</span><br><span class="line"> *  @B@@@B@M@B@L:7PGBOO8MOMOEP0Xri@B@Mk7,...</span><br><span class="line"> *  B@B@BBMBB@B@0::rJP8MO0uvvu7..,B@B@B@B@Z7</span><br><span class="line"> *  MMBM@BBB@B@B@Br:i,..:Lur:....7@OMMBM@B@@</span><br><span class="line"> *  8OOMMMOMMMMBB@B:....,PZENNi..JBOZ8GMOOOO</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><p>以上为魔性图</p><hr><p>以下为神注释</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * 这个公司没有年终奖的,兄弟别指望了,也别来了,我准备辞职了</span><br><span class="line"> * 另外这个项目有很多*Bug* 你坚持不了多久的,拜拜!</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * 1只羊 == one sheep</span><br><span class="line"> * 2只羊 == two sheeps</span><br><span class="line"> * 3只羊 == three sheeps</span><br><span class="line"> * 4只羊 == four sheeps</span><br><span class="line"> * 5只羊 == five sheeps</span><br><span class="line"> * 6只羊 == six sheeps</span><br><span class="line"> * 7只羊 == seven sheeps</span><br><span class="line"> * 8只羊 == eight sheeps</span><br><span class="line"> * 9只羊 == nine sheeps</span><br><span class="line"> * 10只羊 == ten sheeps</span><br><span class="line"> * 11只羊 == eleven sheeps</span><br><span class="line"> * 12只羊 == twelve sheeps</span><br><span class="line"> * 13只羊 == thirteen sheeps</span><br><span class="line"> * 14只羊 == fourteen sheeps</span><br><span class="line"> * 15只羊 == fifteen sheeps</span><br><span class="line"> * 16只羊 == sixteen sheeps</span><br><span class="line"> * 17只羊 == seventeen sheeps</span><br><span class="line"> * 18只羊 == eighteen sheeps</span><br><span class="line"> * 19只羊 == nineteen sheeps</span><br><span class="line"> * 20只羊 == twenty sheeps</span><br><span class="line"> * 21只羊 == twenty one sheeps</span><br><span class="line"> * 22只羊 == twenty two sheeps</span><br><span class="line"> * 23只羊 == twenty three sheeps</span><br><span class="line"> * 24只羊 == twenty four sheeps</span><br><span class="line"> * 25只羊 == twenty five sheeps</span><br><span class="line"> * 26只羊 == twenty six sheeps</span><br><span class="line"> * 27只羊 == twenty seven sheeps</span><br><span class="line"> * 28只羊 == twenty eight sheeps</span><br><span class="line"> * 29只羊 == twenty nine sheeps</span><br><span class="line"> * 30只羊 == thirty sheeps</span><br><span class="line"> * 现在瞌睡了吧，好了，不要再改下面的代码了，睡觉咯~~</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * You may think you know what the following code does.</span><br><span class="line"> * But you dont. Trust me.</span><br><span class="line"> * Fiddle with it, and youll spend many a sleepless</span><br><span class="line"> * night cursing the moment you thought youd be clever</span><br><span class="line"> * enough to &quot;optimize&quot; the code below.</span><br><span class="line"> * Now close this file and go play with something else.</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line"> * 你可能会认为你读得懂以下的代码。但是你不会懂的，相信我吧。</span><br><span class="line"> * 要是你尝试玩弄这段代码的话，你将会在无尽的通宵中不断地咒骂自己为什么会认为自己聪明到可以优化这段代码。</span><br><span class="line"> * 现在请关闭这个文件去玩点别的吧。</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * somedev1 -  6/7/02 Adding temporary tracking of Login screen</span><br><span class="line"> * somedev2 -  5/22/07 Temporary my ass</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line"> * 一些修改1 - 2002/6/7 增加临时的跟踪登录界面</span><br><span class="line"> * 一些修改2 - 2007/5/22 我临时的犯傻</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * 程序员1（于2010年6月7日）：在这个坑临时加入一些调料</span><br><span class="line"> * 程序员2（于2011年5月22日）：临你个屁啊</span><br><span class="line"> * 程序员3（于2012年7月23日）：楼上都是狗屎，鉴定完毕</span><br><span class="line"> * 程序员4（于2013年8月2日）：fuck 楼上，三年了，这坑还在！！！</span><br><span class="line"> * 程序员5（于2014年8月21日）：哈哈哈，这坑居然坑了这么多人，幸好我也不用填了，系统终止运行了，you&apos;re died</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * For the brave souls who get this far: You are the chosen ones,</span><br><span class="line"> * the valiant knights of programming who toil away, without rest,</span><br><span class="line"> * fixing our most awful code. To you, true saviors, kings of men,</span><br><span class="line"> * I say this: never gonna give you up, never gonna let you down,</span><br><span class="line"> * never gonna run around and desert you. Never gonna make you cry,</span><br><span class="line"> * never gonna say goodbye. Never gonna tell a lie and hurt you.</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line"> * 致终于来到这里的勇敢的人：</span><br><span class="line"> * 你是被上帝选中的人，是英勇的、不敌辛苦的、不眠不休的来修改我们这最棘手的代码的编程骑士。</span><br><span class="line"> * 你，我们的救世主，人中之龙，我要对你说：永远不要放弃，永远不要对自己失望，永远不要逃走，辜负了自己，</span><br><span class="line"> * 永远不要哭啼，永远不要说再见，永远不要说谎来伤害自己。</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * Dear maintainer:</span><br><span class="line"> *</span><br><span class="line"> * Once you are done trying to &apos;optimize&apos; this routine,</span><br><span class="line"> * and have realized what a terrible mistake that was,</span><br><span class="line"> * please increment the following counter as a warning</span><br><span class="line"> * to the next guy:</span><br><span class="line"> *</span><br><span class="line"> * total_hours_wasted_here = 42</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line"> * 亲爱的维护者：</span><br><span class="line"> *</span><br><span class="line"> * 如果你尝试了对这段程序进行&apos;优化&apos;</span><br><span class="line"> * 下面这个计数器的个数用来对后来人进行警告</span><br><span class="line"> *</span><br><span class="line"> * 浪费在这里的总时间 = 42h</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception up = new Exception(&quot;Something is really wrong.&quot;);</span><br><span class="line">throw up;  //ha ha</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * When I wrote this, only God and I understood what I was doing</span><br><span class="line"> * Now, God only knows</span><br><span class="line"> */</span><br><span class="line">/***</span><br><span class="line">* 写这段代码的时候，只有上帝和我知道它是干嘛的</span><br><span class="line">* 现在，只有上帝知道</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stop(); // Hammertime!</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// Autogenerated, do not edit. All changes will be undone.</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// sometimes I believe compiler ignores all my comments</span><br><span class="line">// 有时候我相信编译器忽略了我所有的注释</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * I dedicate all this code, all my work, to my wife, Darlene, who will</span><br><span class="line"> * have to support me and our three children and the dog once it gets</span><br><span class="line"> * released into the public.</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// drunk, fix later</span><br><span class="line">// 有点晕了，以后再修改</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Magic. Do not touch.</span><br><span class="line">// 麻鸡。勿动。</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define TRUE FALSE// Happy debugging suckers</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// I&apos;m sorry.</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return 1; # returns 1</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * Always returns true.</span><br><span class="line"> */</span><br><span class="line">public boolean isAvailable() &#123;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Here be dragons --&gt;</span><br><span class="line">&lt;!-- 前方高能 --&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">double penetration; // ouch</span><br><span class="line">// 自行了解，不方便解释</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/////////////////////////////////////// this is a well commented line</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// To understand recursion, see the bottom of this file</span><br><span class="line">At the bottom of the file:</span><br><span class="line">// To understand recursion, see the top of this file</span><br><span class="line">// 想要明白递归须看文件末尾</span><br><span class="line">到了文末</span><br><span class="line">// 想要明白递归须看文件顶部</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* Please work */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">long long ago; /* in a galaxy far far away */</span><br><span class="line">// 很久很久以前 在一个遥远的银河中（出自星球大战）</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// This code sucks, you know it and I know it.  </span><br><span class="line">// Move on and call me an idiot later.</span><br><span class="line">// 你我都知道这代码很烂</span><br><span class="line">// 先不要骂我2B了，请先继续往下看</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// I am not sure why this works but it fixes the problem.</span><br><span class="line">// 虽然我不知道为什么这样管用，但它却是修复了问题</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// If this comment is removed the program will blow up</span><br><span class="line">// 如果删了此处注释程序就炸了</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// This function has been here since 1987. DON&apos;T FXXKING TOUCH IT</span><br><span class="line">// 这函数1987年就这在了，别他娘动它</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// if i ever see this again i&apos;m going to start bringing guns to work</span><br><span class="line">// 如果要是再让我看见这样的代码，也许我会带着一把枪来上班</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// no comments for you</span><br><span class="line">// it was hard to write</span><br><span class="line">// so it should be hard to read</span><br><span class="line">// 难写的代码，肯定很难读。因此，我没有注释留给你。</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// I will give you two of my seventy-two virgins if you can fix this.</span><br><span class="line">// 要是你能修正这个问题的话，我会在我的七十二个处女中挑两个送你</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// I am not responsible of this code.</span><br><span class="line">// They made me write it, against my will.</span><br><span class="line">// 下面的代码，我不负责。因为是他们逼我写的，违背了我的意愿。</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* You are not expected to understand this */</span><br><span class="line">/* 你绝不会明白的 */</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// I have to find a better job</span><br><span class="line">// 看来我需要找份更好的工作了</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/***</span><br><span class="line"> * 这个类是Object的子类</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><p>如果有更好地可以留言,如果看到这能带给你快乐的话，那就点个稀饭吧，谢谢大佬们赏脸，愿所有的程序都永无Bug。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;写在前面的话：一时兴起就收集了以下神注释，希望能为广大ITer带来快乐，缓解你们工作中的压力，下面开车，先自爆头像，下文会给出制作链接。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;tabl
      
    
    </summary>
    
      <category term="随笔" scheme="https://www.zhangqifei.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>安装-nginx</title>
    <link href="https://www.zhangqifei.top/2019/05/22/nginx/%E5%AE%89%E8%A3%85nginx/"/>
    <id>https://www.zhangqifei.top/2019/05/22/nginx/安装nginx/</id>
    <published>2019-05-22T10:15:07.017Z</published>
    <updated>2019-07-01T06:28:37.991Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">&gt;–nginx官方下载地址–&lt;</a><br><a href="http://nginx.org/download/" target="_blank" rel="noopener">&gt;–nginx官方历史地址–&lt;</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wget -c http://nginx.org/download/nginx-1.13.9.tar.gz</span><br><span class="line">tar xvf nginx-1.13.9.tar.gz </span><br><span class="line">mkdir nginx</span><br><span class="line"></span><br><span class="line">cd nginx-1.13.9/</span><br><span class="line">yum -y install gcc gcc-c++ autoconf automake</span><br><span class="line">yum -y install zlib zlib-devel openssl openssl-devel pcre-devel</span><br><span class="line"></span><br><span class="line">./configure</span><br><span class="line">--prefix=/data/nginx/ \</span><br><span class="line">--with-http_stub_status_module \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-http_sub_module \</span><br><span class="line">--with-http_realip_module \</span><br><span class="line">--with-http_image_filter_module \</span><br><span class="line">--with-http_v2_module</span><br><span class="line">参数说明：</span><br><span class="line">--prefix 用于指定nginx编译后的安装目录</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p><p>需要什么模块功能可以自己选择 ./configure –help</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://nginx.org/en/download.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;gt;–nginx官方下载地址–&amp;lt;&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://nginx.org/downloa
      
    
    </summary>
    
      <category term="nginx" scheme="https://www.zhangqifei.top/categories/nginx/"/>
    
    
      <category term="nginx" scheme="https://www.zhangqifei.top/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>安装-redis</title>
    <link href="https://www.zhangqifei.top/2019/05/22/redis/%E5%AE%89%E8%A3%85-redis/"/>
    <id>https://www.zhangqifei.top/2019/05/22/redis/安装-redis/</id>
    <published>2019-05-22T09:25:29.739Z</published>
    <updated>2019-05-22T10:13:41.023Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://redis.io/download" target="_blank" rel="noopener">&gt;–redis官方下载地址–&lt;</a></p><p>#下载和编译Redis<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">↓ 一步一步执行</span><br><span class="line">wget http://download.redis.io/releases/redis-5.0.5.tar.gz </span><br><span class="line">tar xzf redis-5.0.5.tar.gz</span><br><span class="line">cd redis-5.0.5</span><br><span class="line">yum -y install gcc gcc-c++ autoconf automake</span><br><span class="line">mkdir /data/redis</span><br><span class="line">make PREFIX=/data/redis install</span><br><span class="line">cp -a redis.conf /data/redis/bin/</span><br><span class="line">/data/redis/bin/redis-server --version</span><br><span class="line"></span><br><span class="line">↓ 整理到一块了</span><br><span class="line">wget http://download.redis.io/releases/redis-5.0.5.tar.gz &amp;&amp; tar xzf redis-5.0.5.tar.gz &amp;&amp; cd redis-5.0.5 &amp;&amp; yum -y install gcc gcc-c++ autoconf automake &amp;&amp; mkdir /data/redis</span><br><span class="line">make PREFIX=/data/redis install &amp;&amp; cp -a redis.conf /data/redis/bin/ &amp;&amp; /data/redis/bin/redis-server --version</span><br></pre></td></tr></table></figure></p><h1 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">↓ 手动修改</span><br><span class="line">vim /data/redis/bin/redis.conf</span><br><span class="line">    bind 127.0.0.1         # 配置访问权限  </span><br><span class="line">    requirepass  foobared  # 设置redis密码</span><br><span class="line">    daemonize yes          # 后台启动redis(yes后台启动)</span><br><span class="line"></span><br><span class="line">↓ 命令修改</span><br><span class="line">sed -i  &apos;s/^bind 127.0.0.1/bind 127.0.0.2/g&apos; redis.conf</span><br><span class="line">sed -i  &apos;s/# requirepass foobared/requirepass foobareds/g&apos; redis.conf</span><br><span class="line">sed -i  &apos;s/^daemonize no/daemonize yes/g&apos; redis.conf</span><br></pre></td></tr></table></figure><h1 id="启动redis"><a href="#启动redis" class="headerlink" title="启动redis"></a>启动redis</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /data/redis/bin/</span><br><span class="line">$ ./redis-server redis.conf</span><br><span class="line">$ ss -ntl|grep 6379</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://redis.io/download&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&amp;gt;–redis官方下载地址–&amp;lt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;#下载和编译Redis&lt;br&gt;&lt;figure class=&quot;highlig
      
    
    </summary>
    
      <category term="redis" scheme="https://www.zhangqifei.top/categories/redis/"/>
    
    
      <category term="redis" scheme="https://www.zhangqifei.top/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>linux命令-sed</title>
    <link href="https://www.zhangqifei.top/2019/05/22/%E5%91%BD%E4%BB%A4/linux%E5%91%BD%E4%BB%A4-sed/"/>
    <id>https://www.zhangqifei.top/2019/05/22/命令/linux命令-sed/</id>
    <published>2019-05-22T09:25:24.606Z</published>
    <updated>2019-05-22T09:25:24.611Z</updated>
    
    <content type="html"><![CDATA[<p>sed流编辑器（stream editor） <a href="http://www.gnu.org/software/sed/manual/sed.html" target="_blank" rel="noopener">sed手册</a></p><blockquote><p>处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed 选项 '子命令' 文件名</span><br><span class="line">sed 选项 -e '子命令1' -e '子命令2' 文件名</span><br><span class="line">sed -f 脚本文件 文件名</span><br><span class="line">sed -f 脚本1 -f 脚本2 文件名</span><br></pre></td></tr></table></figure><ul><li>可以指定多个 <code>-e</code> 和 <code>-f</code></li><li>sed 中变量使用单引号包含双引号方式： <code>&#39;&quot;$var&quot;&#39;</code></li></ul><h1 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h1><ul><li><code>-e</code>或<code>--expression=命令</code>  指定用以处理文件的脚本内容</li><li><code>-f</code>或<code>--file=脚本文件</code>  指定用以处理文件的脚本文件</li></ul><ul><li><code>-i</code>或<code>--in-place[=SUFFIX]</code> 编辑文件内容并取代原文件</li><li><code>-n</code>或<code>--quiet</code>或<code>--silent</code> 安静模式 仅显示处理后的结果</li><li><code>-l</code>或<code>--line-length=N</code>   指定换行期望长度</li><li><code>-r</code>或<code>-regexp-extended</code>  启用扩展的正则表达式</li><li><code>-u</code>或<code>–unbuffered</code>  从输入文件中加载最少的数据，并更频繁的刷出到输出缓冲区</li><li><code>-z</code>或<code>–null-data</code>  使用NULL字符分割行（默认每一行使用换行符分割）</li></ul><h1 id="子命令"><a href="#子命令" class="headerlink" title="子命令"></a>子命令</h1><p>多个子命令间使用<code>;</code>分隔。</p><h2 id="行定位"><a href="#行定位" class="headerlink" title="行定位"></a>行定位</h2><p>在行定位命令后紧邻写上各种操作命令</p><h3 id="单行"><a href="#单行" class="headerlink" title="单行"></a>单行</h3><ul><li>数字n：第n行</li><li><code>$</code>：最后一行</li><li>正则<code>/pattern/</code>： 匹配该正则的那行</li></ul><h3 id="多行"><a href="#多行" class="headerlink" title="多行"></a>多行</h3><ul><li><p>数字<code>m,n</code>：  第m到n行</p></li><li><p>数字和正则混合<code>/pattern/,n</code>和<code>n,/pattern/</code></p></li><li><p>两个正则之间的行：/pattern1/,/pattern2/</p></li><li><p><code>n!</code>  取反：除了第n行  m,n!</p></li><li><p><code>n~x</code>：从第n行开始处理，下一次处理当前行后面的x行</p><p>例如<code>1~2</code>表示从第1行开始处理，下一次处理当前行后面的第2行，也就是依次处理1，3，5，7……行</p></li></ul><h2 id="打印-p"><a href="#打印-p" class="headerlink" title="打印 p"></a>打印 p</h2><p>将模式空间写到标准输出。注意：使用<code>sed &#39;p&#39; filename</code>会将文件内容每行打印两次，配合<code>-n</code>（或<code>--quiet</code>或<code>--silent</code>） 则可只打印一次（仅显示处理后的结果）。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed  --quiet '2,10p' file  #打印第2到10行</span><br><span class="line">sed --quiet ''</span><br></pre></td></tr></table></figure><h2 id="替换-s"><a href="#替换-s" class="headerlink" title="替换 s"></a>替换 s</h2><p>命令格式： <code>s/原内容/新内容/</code></p><ul><li>g全局替换：<code>s/原内容/新内容/g</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr | grep -o -E '1[^2][0-9?](\.[0-9]&#123;1,3&#125;)&#123;3&#125;\/' -o | sed 's/\///'  #本机ip</span><br></pre></td></tr></table></figure><h2 id="行编辑"><a href="#行编辑" class="headerlink" title="行编辑"></a>行编辑</h2><ul><li>新增行<ul><li><code>a</code>  在匹配项的<strong>下一行</strong>新增内容</li><li><code>i</code>   在匹配项的<strong>上一行</strong>新增内容</li></ul></li><li>替换行  <code>c</code></li><li>删除行  <code>d</code></li><li>多行<ul><li>N  将数据流中的下一行加进来创建一个多行组来处理</li><li>D  删除多行组中的一行</li><li>P  打印多行组中的一行</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed  -i -e '1a hello' -e '2i world' filename</span><br><span class="line">sed -i -e '1d' -e '2c new-world' filename</span><br></pre></td></tr></table></figure><h2 id="模式空间"><a href="#模式空间" class="headerlink" title="模式空间"></a>模式空间</h2><p>  把当前处理的行存储在临时缓冲区中——模式空间。</p><ul><li><code>N</code>  将下一行内容纳入当前缓冲区</li></ul><ul><li><code>h</code>  将模式空间复制到保持空间</li><li><code>H</code>  将模式空间附加到保持空间</li><li><code>g</code>  将保持空间复制到模式空间</li><li><code>G</code>  将保持空间附加到模式空间</li><li><code>x</code>  交换模式空间和保持空间的内容</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;sed流编辑器（stream editor） &lt;a href=&quot;http://www.gnu.org/software/sed/manual/sed.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;sed手册&lt;/a&gt;&lt;/p&gt;
&lt;blockquote
      
    
    </summary>
    
      <category term="命令" scheme="https://www.zhangqifei.top/categories/%E5%91%BD%E4%BB%A4/"/>
    
    
  </entry>
  
  <entry>
    <title>PS AND gimp</title>
    <link href="https://www.zhangqifei.top/2019/05/22/%E5%B7%A5%E5%85%B7/PS%20AND%20gimp/"/>
    <id>https://www.zhangqifei.top/2019/05/22/工具/PS AND gimp/</id>
    <published>2019-05-22T01:41:22.000Z</published>
    <updated>2019-05-22T05:43:30.900Z</updated>
    
    <content type="html"><![CDATA[<h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><ul><li>综合处理：<ul><li><a href="http://www.adobe.com/cn/creativecloud/" target="_blank" rel="noopener">photoshop</a></li><li><a href="https://www.gimp.org/downloads/" target="_blank" rel="noopener">gimp</a></li></ul></li><li>picpick  取色  调色  度量  绘图</li><li>gpick  取色  调色</li></ul><h1 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h1><h2 id="切片基本流程"><a href="#切片基本流程" class="headerlink" title="切片基本流程"></a>切片基本流程</h2><ol><li><strong>切片工具</strong>：拖选出要切图的内容</li><li><strong>切片选择工具</strong>：调整切图范围</li><li><strong>锁定切片</strong>：视图-锁定切片（防止误操作）</li><li><strong>背景图层透明</strong>：图层选项卡-调整选项-不透明度（根据需求选择图层）</li><li><strong>导出为web格式</strong>（选择格式）</li></ol><p>提示：</p><ul><li>切图完毕后放大图片，使用切片选择工具一一查验调整切图范围。</li><li>使用切片工具是右键切图区域然后关掉右键菜单也可以进入调整模式。</li><li>背景透明一般选择最底下的图层进行透明处理即可。</li><li>少量切图可以复制/剪切截取的部分，新建一个文件，然后粘贴上上截取的部分，再导出即可。</li></ul><h1 id="gimp"><a href="#gimp" class="headerlink" title="gimp"></a>gimp</h1><h2 id="切块"><a href="#切块" class="headerlink" title="切块"></a>切块</h2><ol><li><p>参考线：图像-参考线</p><p>参考线有按百分比新建、按设定位置（水平或垂直坐标）新建和按选择区域新建。按选择区域新建方法:用矩形选择工具选中一块区域，图像-参考线-从选区新建参考线。</p></li><li><p>分块：图像-变换-分块</p></li></ol><p>提示：分块处理可能生成大量文件（根据切分多少），需要一一处理，比较麻烦，尽量不要大量新建参考线后执行分块。</p><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><ul><li><a href="https://github.com/MrHeadwar/Layerstodivs" target="_blank" rel="noopener">layerstodivs</a></li><li><a href="https://github.com/khalim19/gimp-plugin-export-layers" target="_blank" rel="noopener">gimp-plugin-export-layers</a></li></ul><h2 id="背景透明"><a href="#背景透明" class="headerlink" title="背景透明"></a>背景透明</h2><p>颜色–颜色转为透明</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;综合处理：&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.adobe.com/cn/creativecloud/&quot; t
      
    
    </summary>
    
      <category term="工具" scheme="https://www.zhangqifei.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="图像" scheme="https://www.zhangqifei.top/tags/%E5%9B%BE%E5%83%8F/"/>
    
  </entry>
  
  <entry>
    <title>一次说清什么是正向代理，什么是反向代理？</title>
    <link href="https://www.zhangqifei.top/2018/03/05/%E9%9A%8F%E7%AC%94/%E4%B8%80%E6%AC%A1%E8%AF%B4%E6%B8%85%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%9F/"/>
    <id>https://www.zhangqifei.top/2018/03/05/随笔/一次说清什么是正向代理，什么是反向代理？/</id>
    <published>2018-03-05T01:42:22.000Z</published>
    <updated>2018-04-23T07:12:14.352Z</updated>
    
    <content type="html"><![CDATA[<h3 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h3><p>比如你现在缺钱，想找马云爸爸去借钱，可想而知人家可能鸟都不鸟你，到最后碰一鼻子灰借不到钱。不过你认识你家隔壁老王，而老王认识马云同志，而且关系还很好。这时候你托老王去找马云借钱，当然这事最后成了，你从马云那里借到了500万！这时候马云并不知道钱是你借的，只知道这钱是老王借的。最后由老王把钱转交给你。在这里，老王就充当了一个重要的角色：代理。</p><p>此时的代理，就是我们常说的正向代理。代理客户端去请求服务器，隐藏了真实客户端，服务器并不知道真实的客户端是谁。正向代理应用最广泛的莫过于现在的某些“科学上网工具”，你访问不了谷歌、Facebook的时候，你可以在国外搭建一台代理服务器，代理你访问，代理服务器再把请求到的数据转交给你，你就可以看到内容了</p><center><br><img src="http://zhangqifei.top/picture/httpd/20180307210726782.png" alt="正向代理"><br></center><p><strong>相对专业点解释：</strong></p><p>正向代理是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端必须要进行一些特别的设置才能使用正向代理。</p><h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>比如你现在很无聊，想找人聊天，这时候你拨通了联通客服10010电话，联通的总机可能随机给你分配一个闲置的客服给你接通。这时候你如愿以偿的和客服聊了起来，问了问她目前有没有结婚、有没有对象、家住哪里、她的微信号、她的手机号。。。</p><p>此时联通总机充当的角色就是反向代理，你只知道和客服接通并聊了起来，具体为什么会接通这个客服MM，怎么接通的，你并不知道。</p><p>反向代理隐藏了真正的服务端，就像你每天使用百度的时候，只知道敲打<a href="http://www.baidu.com就可以打开百度搜索页面，但背后成千上万台百度服务器具体是哪一台为我们服务的，我们并不知道。我们只知道这个代理服务器，它会把我们的请求转发到真实为我们服务的那台服务器那里去。" target="_blank" rel="noopener">www.baidu.com就可以打开百度搜索页面，但背后成千上万台百度服务器具体是哪一台为我们服务的，我们并不知道。我们只知道这个代理服务器，它会把我们的请求转发到真实为我们服务的那台服务器那里去。</a></p><p>软件层面一般常用Nginx来做反向代理服务器，它的性能非常好，用来做负载均衡。</p><center><br><img src="http://zhangqifei.top/picture/httpd/20180307210840303.png" alt="反向代理"><br></center><p><strong>相对专业点解释：</strong></p><ul><li>反向代理（Reverse Proxy）方式是指以代理服务器来接受Internet上的连接请求，然后将请求转发给内部网络上的服务器；并将从服务器上得到的结果返回给Internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。</li><li>通常的代理服务器，只用于代理内部网络对Internet的连接请求，客户机必须指定代理服务器,并将本来要直接发送到Web服务器上的http请求发送 到代理服务器中。当一个代理服务器能够代理外部网络上的主机，访问内部网络时，这种代理服务的方式称为反向代理服务。</li></ul><blockquote><p>综上所述：正向代理代理对象是客户端，反向代理代理对象是服务端。</p></blockquote><h3 id="两者区别"><a href="#两者区别" class="headerlink" title="两者区别"></a>两者区别</h3><p><center><br><img src="http://zhangqifei.top/picture/httpd/20180307211940945" alt="这里写图片描述"><br></center><br><strong>从用途 上来讲：</strong></p><ul><li>正向代理的典型用途是为在防火墙内的局域网客户端提供访问Internet的途径。正向代理还可以使用缓冲特性减少网络使用率。反向代理的典型用途是将 防火墙后面的服务器提供给Internet用户访问。反向代理还可以为后端的多台服务器提供负载平衡，或为后端较慢的服务器提供缓冲服务。</li><li>另外，反向代理还可以启用高级URL策略和管理技术，从而使处于不同web服务器系统的web页面同时存在于同一个URL空间下。</li></ul><p><strong>从安全性 来讲：</strong></p><ul><li>正向代理允许客户端通过它访问任意网站并且隐藏客户端自身，因此你必须采取安全措施以确保仅为经过授权的客户端提供服务。</li><li>反向代理对外都是透明的，访问者并不知道自己访问的是一个代理。</li></ul><blockquote><p>最后一句话总结：<br>打个比方，有a,b,c三个人<br>正向代理是： a通过b向C借钱，a知道c的存在 。<br>反向代理是： a向b借钱，b又向C借，a不知道c的存在。</p></blockquote><p><a href="https://baijiahao.baidu.com/s?id=1566988836622068&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">原文链接</a> 之所以转载这篇文章，是因为例子举的太好了，非常适合初学者理解。但是样式有点乱 自己稍微整理了下。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;正向代理&quot;&gt;&lt;a href=&quot;#正向代理&quot; class=&quot;headerlink&quot; title=&quot;正向代理&quot;&gt;&lt;/a&gt;正向代理&lt;/h3&gt;&lt;p&gt;比如你现在缺钱，想找马云爸爸去借钱，可想而知人家可能鸟都不鸟你，到最后碰一鼻子灰借不到钱。不过你认识你家隔壁老王，而老王认识
      
    
    </summary>
    
      <category term="随笔" scheme="https://www.zhangqifei.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>程序员为什么一定要用Linux？</title>
    <link href="https://www.zhangqifei.top/2018/03/04/%E9%9A%8F%E7%AC%94/%E7%A8%8B%E5%BA%8F%E5%91%98%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E5%AE%9A%E8%A6%81%E7%94%A8Linux%EF%BC%9F/"/>
    <id>https://www.zhangqifei.top/2018/03/04/随笔/程序员为什么一定要用Linux？/</id>
    <published>2018-03-04T01:41:22.000Z</published>
    <updated>2019-05-22T03:49:18.848Z</updated>
    
    <content type="html"><![CDATA[<p>大多数人推荐Linux，基本上都会说Linux让你更高效、更优秀。</p><p><strong>然而工具只是工具。</strong></p><p><strong>然而工具只是工具。</strong></p><p><strong>然而工具只是工具。</strong></p><p>优秀程序员和不优秀程序员的区别首先是态度上的区别。</p><p>他们有自己的理想，思考很多，不管是项目开始之前还是在项目进行中，项目完成之后也会进行总结。</p><p>他们对待问题比较严谨，思考比较全面，在动手写代码之前肯定经过了一定的思考，对可能引入的问题进行预估。</p><p>而不优秀的程序员对待问题比较随意，也就是态度上不是那么认真，代码写的也比较随意：他们不会意识到他们的代码已经污染了整个项目。</p><p>除了态度上的不同，在能力上也有很大的差别。</p><p>遇到比较难缠的问题，优秀的程序员总是能从原理出发，一针见血的看出问题的真正原因，进而解决问题，而不优秀的程序员总是停留在表面——认为Linux会把你变得优秀就是停留在表面，只有你自己才能把你变优秀。</p><p><strong>那么Linux的好处到底在哪里呢？</strong></p><h3 id="1-开源"><a href="#1-开源" class="headerlink" title="1.开源"></a>1.开源</h3><blockquote><p>这个我想不用解释。</p></blockquote><h3 id="2-多用户、多任务、多线程"><a href="#2-多用户、多任务、多线程" class="headerlink" title="2.多用户、多任务、多线程"></a>2.多用户、多任务、多线程</h3><blockquote><p>Linux系统同时可以支持多个用户，每个用户对自己的文件设备有特殊的权利，能够保证各用户之间互不干扰，就像手机开了助手一样，同时登陆多个qq账号，当硬件配置非常高时，每个用户还可以同时执行多个任务、多个线程同时工作、提高效率，简直是完美的一塌糊涂，单凭多用户而言就完爆其他操作系统。</p></blockquote><h3 id="3-稳定性和高效性"><a href="#3-稳定性和高效性" class="headerlink" title="3.稳定性和高效性"></a>3.稳定性和高效性</h3><blockquote><p>你也许会听到Windows服务器长时间运行而突然宕机，但你绝不会听到Linux系统服务器因为长时间不关机会卡死，在Linux上几乎是不会出现这种情况的。Linux服务器可以无休止的运行下去不宕机，因为它继承了Unix卓越的稳定性和高效性。正因为它的稳定才获得了众多用户的青睐，因为它的高效，它的使用范围更加广阔，然而Linux还可以提供一些高可靠性的服务，比如:LNMP、虚拟化、数据库服务等等。</p></blockquote><h3 id="4-安全性和SELinux"><a href="#4-安全性和SELinux" class="headerlink" title="4.安全性和SELinux"></a>4.安全性和SELinux</h3><blockquote><p>其安全性相比其他系统也要安全很多，由于Linux拥有相当庞大的用户和开源社区支持，因此能很快发现系统漏洞，并迅速发布安全补丁及时更新，同时还具有很强的“免疫力”特点，很少受到病毒攻击，对于一个开放式系统而言，在方便用户的同时，很可能存在安全隐患。不过，利用Linux自带防火墙（iptables，firewalld）、入侵检测和安全认证等工具，及时修补系统的漏洞，就能大大提高Linux系统的安全性，让黑客们无机可乘，同时还有安全增强机制SElinux，在linux内核中提供强制访问控制，功能非常全面，能够很好保护系统和服务，不过很多人喜欢把它关闭，这相对安全性就不是很好了。还有Tcp_wrappers也能够提供很好的网络服务访问控制，Linux系统对于用户和文件管理权限的管理也是相当出色的，能够很好的控制权限，保证文件的机密性，也是其他系统无法比拟，所以Linux系统在一定程度上是坚不可摧的。</p></blockquote><h3 id="5-性能优势"><a href="#5-性能优势" class="headerlink" title="5.性能优势"></a>5.性能优势</h3><blockquote><p>由于Linux要保证其稳定性，所以并没有像其它操作系统一样内核如此臃肿庞大、漏洞百出，随着Linux内核的不断更新，不断提升着优势，Linux操作系统能把服务器的硬件优势体现的淋漓尽致，因为Linux系统吸取了Unix系统近1/4世纪发展的经验，最主要的是Linux开放源代码，保证系统稳定性，更好的调用硬件功能，同时还提供了丰富的系统资源工具top，freee，df，vmstat，dmesg，iostat，sar，uptime等，方便查看资源的利用率。</p></blockquote><p>以上这些足够让你投向Linux的怀抱了。当然，除了这些，还有一些说不定道不明的定西，比如：</p><p><font color="#0099ff" size="5" face="黑体">bigger than bigger</font><br>把你的Linux系统拿出去，开始用命令行做点事情。<br>比如说，输入<code>sudo rm -rf /*</code>在外行人看来，非常之酷炫！</p><blockquote><p>文章来源：<a href="https://www.zhihu.com/question/21048284/answer/170226604" target="_blank" rel="noopener">https://www.zhihu.com/question/21048284/answer/170226604</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;大多数人推荐Linux，基本上都会说Linux让你更高效、更优秀。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;然而工具只是工具。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;然而工具只是工具。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;然而工具只是工具。&lt;/strong&gt;&lt;/
      
    
    </summary>
    
      <category term="随笔" scheme="https://www.zhangqifei.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>金丝雀发布、滚动发布、蓝绿发布到底有什么差别？关键点是什么？</title>
    <link href="https://www.zhangqifei.top/2018/02/07/linux%E6%80%BB%E7%BB%93/%E9%87%91%E4%B8%9D%E9%9B%80%E5%8F%91%E5%B8%83%E3%80%81%E6%BB%9A%E5%8A%A8%E5%8F%91%E5%B8%83%E3%80%81%E8%93%9D%E7%BB%BF%E5%8F%91%E5%B8%83%E5%88%B0%E5%BA%95%E6%9C%89%E4%BB%80%E4%B9%88%E5%B7%AE%E5%88%AB%EF%BC%9F%E5%85%B3%E9%94%AE%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/"/>
    <id>https://www.zhangqifei.top/2018/02/07/linux总结/金丝雀发布、滚动发布、蓝绿发布到底有什么差别？关键点是什么？/</id>
    <published>2018-02-07T11:42:22.000Z</published>
    <updated>2019-05-22T03:44:09.506Z</updated>
    
    <content type="html"><![CDATA[<p>根据 2017 年的 DevOps 发展报告，高效能组织和低效能组织在软件交付的效率上有数量级上的差异。技术组织的软件交付能力是一种综合能力，涉及众多环节，其中发布是尤为重要的环节。</p><p>作为技术人员，大家可能听说过“滚动发布”和“蓝绿发布”等术语，但是很多人并不清楚这些术语背后的原理。本文试图总结当前主流的发布策略，每个的优劣，适用性，让开发人员特别是架构师对现代发布技术有一个更为清晰全面的认识，让大家能够根据自己的企业上下文，对发布策略做出正确的选型和实践。</p><h3 id="一、单服务器组发布"><a href="#一、单服务器组发布" class="headerlink" title="一、单服务器组发布"></a>一、单服务器组发布</h3><p>先解释下单服务器组的概念，早先我们机器资源比较紧张，不像现在云计算和虚拟化（包括容器技术）这么发达，所以应用机器基本是预先静态分配好的（一般由运维负责分配），原来应用 A 住在这 n 台机器上，那么下次升级发布的应用 A 也住在这 n 台机器上，所以称为单服务器组发布方式。</p><h4 id="蛮力发布"><a href="#蛮力发布" class="headerlink" title="蛮力发布"></a>蛮力发布</h4><p>如下图所示，这种发布方式比较简单粗暴，有点像我们传统的软件升级方式，主要靠手工完成，先将老版本 V1 全部下掉，再将新版本发到机器上去。这种方式会引入服务中断（停机），在开发测试环境是可行的，但对于生产环境发布，其会直接影响用户的使用体验，这种方式一般是不建议的。</p><center><br><img src="https://img-blog.csdn.net/20180413152557349" alt="这里写图片描述"><br></center><p><strong>优势：</strong></p><ul><li>简单成本低</li></ul><p><strong>不足：</strong></p><ul><li>服务中断用户受影响，出了问题回退也慢</li></ul><p><strong>适用场合：</strong></p><ul><li>开发测试环境</li><li>非关键应用（用户影响面小）</li><li>初创公司什么都缺，找夜深人静用户访问量小的时间干</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413151836748" alt="这里写图片描述"><br>蛮力发布会引入服务中断时间<br></center><h4 id="金丝雀发布（单服务器组）"><a href="#金丝雀发布（单服务器组）" class="headerlink" title="金丝雀发布（单服务器组）"></a>金丝雀发布（单服务器组）</h4><p>在蛮力发布基础上的一种简单改进发布方式，目前仍然是不少成长型技术组织的主流发布方式。单服务器组下的金丝雀发布的简化步骤如下图所示：</p><center><br><img src="https://img-blog.csdn.net/20180413152452336" alt="这里写图片描述"><br></center><p><strong>实践要点</strong></p><ul><li>金丝雀发布一般先发 1 台，或者一个小比例，例如 2% 的服务器，主要做流量验证用，也称为金丝雀 (Canary) 测试（国内常称灰度测试）。以前旷工开矿下矿洞前，先会放一只金丝雀进去探是否有有毒气体，看金丝雀能否活下来，金丝雀发布由此得名。简单的金丝雀测试一般通过手工测试验证，复杂的金丝雀测试需要比较完善的监控基础设施配合，通过监控指标反馈，观察金丝雀的健康状况，作为后续发布或回退的依据。</li><li>如果金丝测试通过，则把剩余的 V1 版本全部升级为 V2 版本。如果金丝雀测试失败，则直接回退金丝雀，发布失败。</li></ul><p><strong>优势：</strong></p><ul><li>用户体验影响小，金丝雀发布过程出现问题只影响少量用户</li></ul><p><strong>不足：</strong></p><ul><li>发布自动化程度不够，发布期间可引发服务中断</li></ul><p><strong>适用场合：</strong></p><ul><li>对新版本功能或性能缺乏足够信心</li><li>用户体验要求较高的网站业务场景</li><li>缺乏足够的自动化发布工具研发能力</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413152919230" alt="这里写图片描述"><br>少量金丝雀先接受流量，再全量发布<br></center><h4 id="滚动式发布（单服务器组）"><a href="#滚动式发布（单服务器组）" class="headerlink" title="滚动式发布（单服务器组）"></a>滚动式发布（单服务器组）</h4><p>在金丝雀发布基础上的进一步优化改进，是一种自动化程度较高的发布方式，用户体验比较平滑，是目前成熟型技术组织所采用的主流发布方式。单服务器组下的滚动发布的简化步骤如下图所示：</p><center><br><img src="https://img-blog.csdn.net/20180413160543532" alt="这里写图片描述"><br></center><p><strong>实践要点</strong></p><ul><li>滚动式发布一般先发 1 台，或者一个小比例，如 2% 服务器，主要做流量验证用，类似金丝雀 (Canary) 测试。</li><li>滚动式发布需要比较复杂的发布工具和智能 LB，支持平滑的版本替换和流量拉入拉出。</li><li>每次发布时，先将老版本 V1 流量从 LB 上摘除，然后清除老版本，发新版本 V2，再将 LB 流量接入新版本。这样可以尽量保证用户体验不受影响。</li><li>一次滚动式发布一般由若干个发布批次组成，每批的数量一般是可以配置的（可以通过发布模板定义）。例如第一批 1 台（金丝雀），第二批 10%，第三批 50%，第四批 100%。每个批次之间留观察间隔，通过手工验证或监控反馈确保没有问题再发下一批次，所以总体上滚动式发布过程是比较缓慢的 (其中金丝雀的时间一般会比后续批次更长，比如金丝雀 10 分钟，后续间隔 2 分钟)。</li><li>回退是发布的逆过程，将新版本流量从 LB 上摘除，清除新版本，发老版本，再将 LB 流量接入老版本。和发布过程一样，回退过程一般也比较慢的。</li><li>滚动式发布国外术语通常叫 Rolling Update Deployment。</li></ul><p><strong>优势：</strong></p><ul><li>用户体验影响小，体验较平滑</li></ul><p><strong>不足：</strong></p><ul><li>发布和回退时间比较缓慢</li><li>发布工具比较复杂，LB 需要平滑的流量摘除和拉入能力</li></ul><p><strong>适用场合：</strong></p><ul><li>用户体验不能中断的网站业务场景</li><li>有一定的复杂发布工具研发能力；</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413160829601" alt="这里写图片描述"><br>滚动式发布，流量平滑过渡，<br></center><h3 id="二、双服务器组发布"><a href="#二、双服务器组发布" class="headerlink" title="二、双服务器组发布"></a>二、双服务器组发布</h3><p>蓝绿发布仅适用于双服务器组发布，可以认为是对蛮力发布的一种简单优化发布方式。简化过程如下图所示：</p><center><br><img src="https://img-blog.csdn.net/20180413161359955" alt="这里写图片描述"><br></center><p><strong>实践要点</strong></p><ul><li>V1 版本称为蓝组，V2 版本称为绿组，发布时通过 LB 一次性将流量从蓝组直接切换到绿组，不经过金丝雀和滚动发布，蓝绿发布由此得名；</li><li>出现问题回退也很直接，通过 LB 直接将流量切回蓝组。</li><li>发布初步成功后，蓝组机器一般不直接回收，而是留一个待观察期，视具体情况观察期的时间可长可短，观察期过后确认发布无问题，则可以回收蓝组机器。</li></ul><p><strong>优势：</strong></p><ul><li>升级切换和回退速度非常快</li></ul><p><strong>不足：</strong></p><ul><li>切换是全量的，如果 V2 版本有问题，则对用户体验有直接影响；</li><li>需要两倍机器资源；</li></ul><p><strong>适用场合：</strong></p><ul><li>对用户体验有一定容忍度的场景</li><li>机器资源有富余或者可以按需分配（AWS 云，或自建容器云）</li><li>暂不具备复杂滚动发布工具研发能力；</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413161716274" alt="这里写图片描述"><br>蓝绿发布一次完成流程切换<br></center><h4 id="金丝雀发布（双服务器组）"><a href="#金丝雀发布（双服务器组）" class="headerlink" title="金丝雀发布（双服务器组）"></a>金丝雀发布（双服务器组）</h4><p>对蓝绿部署的一种简单优化，发布时先从绿组拉入 1 台金丝雀，待金丝雀验证通过再发全量。对比蓝绿发布，该发布方式的优势是有一个生产流量的金丝雀验证过程，可以减轻 V2 可能有问题的风险和影响面。简化发布过程如下图所示：</p><center><br><img src="https://img-blog.csdn.net/20180413162041469" alt="这里写图片描述"><br></center><h4 id="滚动式发布（双服务器组）"><a href="#滚动式发布（双服务器组）" class="headerlink" title="滚动式发布（双服务器组）"></a>滚动式发布（双服务器组）</h4><p>滚动式发布是对上面的蓝绿和金丝雀发布的进一步优化，按批次增量滚动发布，提供更平滑的用户体验。</p><center><br><img src="https://img-blog.csdn.net/20180413162342844" alt="这里写图片描述"><br></center><p><strong>实践要点</strong></p><ul><li>发布前先申请一批新服务器，数量一般和 V1 版本相同，将 V2 版本应用发布到新服务器上。例如如果在 AWS 云上，则可以直接调用 API 申请一批新 VM，如果用容器云 Kubernetes，则可以直接启动一批新容器（使用 V2 版本容器镜像）。</li><li>一般会先通过 LB 拉入 1 台 V2 版本的机器，这台机器也相当于金丝雀，用于流量验证。</li><li>逐步按批次完成发布，每批只需要通过 LB 拉入 V2 版本，再拉出对应数量的 V1 版本。批次之间留有观察间隔，通过手工或监控反馈确保没有问题再继续发布。</li><li>发布有问题回退很快，直接通过 LB 将流量切回 V1 即可。</li><li>完成发布后，一般 V1 版本要保留观察以备万一，比如留 1 天，1 天后没有问题则回收 V1 机器资源。</li></ul><p><strong>优势：</strong></p><ul><li>用户体验影响小；</li><li>升级切换和回退（rollback）速度比单服务器组滚动发布要快，LB 切流量即可；</li></ul><p><strong>不足：</strong></p><ul><li>需要两倍机器资源；</li><li>发布工具比较复杂，LB 需要流量切换能力</li></ul><p><strong>适用场合：</strong></p><ul><li>用户体验不能中断的网站业务场景</li><li>机器资源有富余或者可以按需分配（AWS 云，或自建容器云）</li><li>有一定的发布工具研发能力；</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413162608274" alt="这里写图片描述"><br>滚动式发布，流量平滑过渡<br></center><h3 id="三、其它发布方式"><a href="#三、其它发布方式" class="headerlink" title="三、其它发布方式"></a>三、其它发布方式</h3><p>上述都是偏传统的发布方式，能覆盖大部分应用发布场景。针对一些关键新功能的上线发布，或者一些特定的场景，还有一些特殊的发布方式。</p><h4 id="功能开关发布"><a href="#功能开关发布" class="headerlink" title="功能开关发布"></a>功能开关发布</h4><p>利用代码中的功能开关（Feature Flag/Toggle/Switch）来控制发布逻辑，一般不需要复杂的发布工具和智能 LB 配合，是一种相对比较低成本和简单的发布方式。这种方式也是支持现代 DevOps 理念，研发人员可以灵活定制和自助完成的发布方式。功能开关的原理如下图所示：</p><center><br><img src="https://img-blog.csdn.net/20180413162726916" alt="这里写图片描述"><br>功能开关发布<br></center><p><strong>实践要点</strong></p><ul><li>功能开关发布需要一个配置中心或者开关中心这样的服务支持，例如携程的 Apollo 配置中心附录 6.3，或者开源的 FF4J附录 6.4，这些都支持开关发布，业界还有专门的功能开关 SaaS 服务，例如 LaunchDarkly附录 6.5。通过配置中心，运维或研发人员可以在运行期动态配置功能开关的值。当然，功能开关发布只是配置中心的一种使用场景，配置中心还能支持其它很多动态配置场景。</li><li>功能开关服务一般提供客户端 SDK，方便开发人员集成。在运行期，客户端 SDK 会同步最新的开关值，技术实现有推方式 (push)，也有拉方式 (pull)，或者推拉结合方式。</li><li>新功能（V2 new feature）和老功能（V1 old feature）住在同一套代码中，新功能隐藏在开关后面，如果开关没有打开，则走老代码逻辑，如果开关打开，则走新代码逻辑。技术实现上可以理解为一个简单的 if/else 逻辑。</li><li>应用上线后，开关先不打开，然后运维或研发人员通过开关中心打开新功能，经过流量验证新功能没有问题，则发布完成；如果有问题，则随时可以通过开关中心切回老功能逻辑。</li></ul><p><strong>优势：</strong></p><ul><li>升级切换和回退速度非常快</li><li>相对于复杂的发布工具，实施比较简单，成本相对低廉</li><li>研发能够灵活定制发布逻辑，支持 DevOps 自助发布</li></ul><p><strong>不足：</strong></p><ul><li>切换是全量的，如果 V2 版本有问题，则对用户体验有直接影响；</li><li>对代码有侵入，代码逻辑会变复杂，需要定期清理老版本逻辑，维护成本变高</li></ul><p><strong>适用场合：</strong></p><ul><li>对用户体验有一定容忍度的场景</li><li>已有配置中心或开关中心服务</li><li>暂不具备研发复杂发布工具能力；</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413162936972" alt="这里写图片描述"><br>通过功能开关一次完成流量切换<br></center><h4 id="A-B-测试"><a href="#A-B-测试" class="headerlink" title="A/B 测试"></a>A/B 测试</h4><p>A/B 测试附录 7.10原来主要用于产品功能的比对测试，收集用户反馈和对比数据做产品功能设计的决策。实际上，A/B 测试也可以作为一种新功能发布技术。下图展示基于 LB 实现的一种 A/B 测试发布。</p><center><br><img src="https://img-blog.csdn.net/20180413163047576" alt="这里写图片描述"><br></center><p><strong>实践要点</strong></p><ul><li>上图中，原来 PC 端和手机端都访问老版本 V1 服务（也称 A 组或控制组），当 V2 新版本（也称 B 组或实验组）发布以后，为了验证 V2 的功能正确性，同时也为了避免 V2 有问题时影响所有用户，先通过 LB 将手机端的流量切换到 V2 版本，经过一段时间的 A/B 比对测试和观察（主要通过用户和监控反馈），确保 V2 正常，则通过 LB 将全部流量切换到 V2。</li><li>基于 LB 方式实现 A/B 测试，LB 需要能够通过某种条件做流量路由，例如通过 client ip，设备类型，浏览器类型，甚至是定制的 HTTP Header 或查询字符串。</li><li>高级的 A/B 测试需要专门的平台支撑，wasabi附录 6.6就是 intuit 开源的一个支持高级 A/B 测试的平台，这类平台可以细粒度到针对某类用户做 A/B 测试，例如针对某个地区的用户，某个年龄段的用户，公司内部用户等等。举了例子，假设一个关键业务的新功能上线，为了降低风险采用 A/B 测试，可以做到先只让公司内部员工能访问到新功能，待新功能验证过，再全量放开给外部用户使用。</li><li>功能开关和 A/B 测试有点相似，但功能开关一般是无状态和全量的，无法做到针对某类特定用户进行测试，而 A/B 测试一般是有状态的，能够跟踪事务和用户级别的状态，可以实现针对某类特定用户进行测试。</li></ul><p><strong>优势：</strong></p><ul><li>用户体验影响小；</li><li>可以使用生产流量测试；</li><li>可以做到针对某类特定目标用户进行测试；</li></ul><p><strong>不足：</strong></p><ul><li>搭建复杂度相对高，有一定技术门槛</li></ul><p><strong>适用场合：</strong></p><ul><li>核心关键业务，比如涉及资金的</li><li>具备一定的 A/B 测试平台研发能力</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/201804131632311" alt="这里写图片描述"><br>针对某类目标用户进行 A/B 测试<br></center><h4 id="影子测试"><a href="#影子测试" class="headerlink" title="影子测试"></a>影子测试</h4><p>对于一些涉及核心业务的遗留系统的升级改造，为了确保万无一失，有一种称为影子测试的大招，采用比较复杂的流量复制、回放和比对技术实现。下面是影子测试的一个样例架构图，</p><center><br><img src="https://img-blog.csdn.net/20180413163342859" alt="这里写图片描述"><br></center><p><strong>实践要点</strong></p><ul><li>目标实现老的 legacy 服务迁移升级到新的 experimental 服务。</li><li>测试开始前，需要在测试环境部署一份 legacy 服务和 experimental 服务，同时将生产数据库复制两份到测试环境。同时需要将生产请求日志收集起来，一般可以通过 kafka 队列收集，然后通过类似 goreplay附录 6.8这样的工具，消费 kafka 里头的请求日志，复制回放，将请求分发到 legacy 服务和 experimental 服务，收到响应后进行比对，如果所有响应比对成功，则可以认为 legacy 服务和 experimental 服务在功能逻辑上是等价的；如果有响应比对失败，则认为两者在功能逻辑上不等价，需要修复 experimental 并重新进行影子测试，直到全部比对成功。根据系统复杂度和关键性不同，比对测试时间短的可能需要几周，长的可达半年之久。</li><li>影子测试因为旁路在独立测试环境中进行，可以对生产流量完全无影响。</li><li>影子测试一般适用于遗留系统的等价重构迁移，例如.net 转 Java，或者 SQLServer 数据库升级为 MySQL 数据库，且外部依赖不能太多，否则需要开发很多 mock，测试部署成本会很高，且比对测试更加复杂和不稳定。</li><li>当当网有一个比较成功的交易系统.NET 转 Java 迁移项目附录 6.9，采用了影子测试技术，值得参考借鉴。</li></ul><p><strong>优势：</strong></p><ul><li>对生产用户体验完全无影响</li><li>可以使用生产真实流量进行测试（复制比对）</li></ul><p><strong>不足：</strong></p><ul><li>搭建复杂度很高，技术门槛高，数据库的导出复制是难点</li><li>外部依赖不能太多，否则测试部署成本很高，且比对测试更加复杂和不稳定</li></ul><p><strong>适用场合：</strong></p><ul><li>核心关键业务，比如涉及资金的</li><li>具备一定影子测试平台研发能力，包括流量复制、数据库导出复制和分发比对系统。</li></ul><p><strong>流量模式</strong></p><center><br><img src="https://img-blog.csdn.net/20180413163538922" alt="这里写图片描述"><br>影子测试对生产流量无影响<br></center><h3 id="四、比较"><a href="#四、比较" class="headerlink" title="四、比较"></a>四、比较</h3><p>下表对各种发布策略，从各个维度进行综合比较，供参考：</p><center><br><img src="https://img-blog.csdn.net/20180413163634468" alt="这里写图片描述"><br></center><h3 id="五、结论和建议"><a href="#五、结论和建议" class="headerlink" title="五、结论和建议"></a>五、结论和建议</h3><p>下面是对发布策略的一些选型建议，供不同阶段公司参考：</p><ul><li>蛮力发布一般是不建议采用的，除非是开发测试环境，用户体验不敏感的非关键应用，或者是创业期什么都缺时候的无奈之举。</li><li>如果暂时还不具备研发较复杂的滚动发布工具和配套智能 LB，则功能开关是一种不错的轻量级发布技术，投入相对较小的成本，可以让研发人员灵活定制发布逻辑。</li><li>金丝雀发布通过少量新版本服务器接收生产流量的方式去验证新版本，可以显著降低风险。金丝雀发布适用于大部分场景，一般成长型公司就可以采用。</li><li>对于达到一定业务体量的公司，考虑到用户体验对业务的关键性，则需要投入研发资源开发支持滚动式发布的工具和配套的智能 LB，实现自动化和零停机的发布。滚动式发布一般和金丝雀发布配合，先发一台金丝雀去验证流量，再按批次增量发布。</li><li>随着轻量级虚拟化（例如容器）的普及，双服务器组发布方式具有更快的发布和回退速度，是值得投入的高级发布技术。蓝绿部署仅适用于双服务器组，滚动式发布既可以在单服务器组上实现，也可以在双服务器组上实现。</li><li>对于涉及关键核心业务的新功能上线，采用 A/B 测试，可以显著降低发布风险，A/B 测试是唯一一种支持针对特定用户组进行生产测试的高级发布技术。当然 A/B 测试的投入不低，建议有一定研发能力的组织采用。</li><li>对于关键核心业务的迁移重构，为确保万无一失，最后的一个大招是影子测试，影子测试对生产流量和用户完全无影响。当然这个大招的投入成本和门槛都高，建议有足够业务体量和研发能力的组织投入。</li><li>上述的各种发布策略并不是非此即彼的，一个公司常常会综合采用多种发布技术作为互补，实现灵活的发布能力。例如主流的发布手段是金丝雀 + 滚动式发布，某些业务线可能根据业务场景需要采用功能开关发布，还有一些业务线则可能采用高级的 A/B 测试发布手段。</li></ul><h3 id="六、附录"><a href="#六、附录" class="headerlink" title="六、附录"></a>六、附录</h3><p><a href="https://github.com/ContainerSolutions/k8s-deployment-strategies" target="_blank" rel="noopener">https://github.com/ContainerSolutions/k8s-deployment-strategies</a></p><p><a href="https://opensource.com/article/18/2/feature-flags-ring-deployment-model" target="_blank" rel="noopener">https://opensource.com/article/18/2/feature-flags-ring-deployment-model</a></p><p><a href="https://github.com/ctripcorp/apollo" target="_blank" rel="noopener">https://github.com/ctripcorp/apollo</a></p><p><a href="http://www.ff4j.org/" target="_blank" rel="noopener">http://www.ff4j.org/</a></p><p><a href="https://launchdarkly.com/" target="_blank" rel="noopener">https://launchdarkly.com/</a></p><p><a href="https://github.com/intuit/wasabi" target="_blank" rel="noopener">https://github.com/intuit/wasabi</a></p><p><a href="https://blog.zenika.com/2017/04/19/migration-dun-legacy-avec-goreplay/" target="_blank" rel="noopener">https://blog.zenika.com/2017/04/19/migration-dun-legacy-avec-goreplay/</a></p><p><a href="https://github.com/buger/goreplay" target="_blank" rel="noopener">https://github.com/buger/goreplay</a></p><p><a href="http://blog.shurenyun.com/untitled-9/" target="_blank" rel="noopener">http://blog.shurenyun.com/untitled-9/</a></p><p><a href="https://en.wikipedia.org/wiki/A/B_testing" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/A/B_testing</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;根据 2017 年的 DevOps 发展报告，高效能组织和低效能组织在软件交付的效率上有数量级上的差异。技术组织的软件交付能力是一种综合能力，涉及众多环节，其中发布是尤为重要的环节。&lt;/p&gt;
&lt;p&gt;作为技术人员，大家可能听说过“滚动发布”和“蓝绿发布”等术语，但是很多人并不
      
    
    </summary>
    
      <category term="linux总结" scheme="https://www.zhangqifei.top/categories/linux%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="发布" scheme="https://www.zhangqifei.top/tags/%E5%8F%91%E5%B8%83/"/>
    
  </entry>
  
  <entry>
    <title>吐血推荐珍藏的Chrome插件</title>
    <link href="https://www.zhangqifei.top/2018/01/08/%E6%B5%8F%E8%A7%88%E5%99%A8/%E5%90%90%E8%A1%80%E6%8E%A8%E8%8D%90%E7%8F%8D%E8%97%8F%E7%9A%84Chrome%E6%8F%92%E4%BB%B6/"/>
    <id>https://www.zhangqifei.top/2018/01/08/浏览器/吐血推荐珍藏的Chrome插件/</id>
    <published>2018-01-08T00:33:59.000Z</published>
    <updated>2019-05-22T03:36:38.518Z</updated>
    
    <content type="html"><![CDATA[<p>你应该知道的的Chrome插件！！！</p><h2 id="Momentum"><a href="#Momentum" class="headerlink" title="Momentum"></a>Momentum</h2><p>装逼利器，教你如何优雅的使用Chrome，新打开一个Tab的时候再也不是一片空白，每天一副精美图片，给你们看下我今天的桌面感受下。<a href="https://www.investopedia.com/terms/m/momentum.asp" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/0.png" width="500" height="200" alt="Momentum" align="center"></center><h2 id="OneTab"><a href="#OneTab" class="headerlink" title="OneTab"></a>OneTab</h2><p>　　强烈推荐，使用场景是这样的，我们使用Chrome经常会一次打开好多tab，很多是会用到的，又不舍得关，内存又耗着，这个时候点击下OneTab，直接把所有tab回收，然后每天的历史都给你记录着，接着你可以一键还原某一天的tab，真乃为Chrome而生。<a href="http://chromecj.com/productivity/2014-11/280.html" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/onetab.png" width="500" height="200" alt="OneTab" align="center"></center><h2 id="ZenHub"><a href="#ZenHub" class="headerlink" title="ZenHub"></a>ZenHub</h2><p>ZenHub增压您GitHub上的工作流程.ZenHub是第一个也是唯一的项目管理套件的作品本身内GitHub上;提高您的工作流程，专为初创内置功能，快速移动的工程团队，以及开源社区。该产品是一款浏览器扩展，注入先进的功能，包括实时拖动和拖放发行任务板，通过 1按钮同行的反馈，并直接上传任何文件类型到GitHub的接口支持。 ZenHub可以很容易地集中所有进程到GitHub上，保持你的团队的精益和敏捷。 <a href="https://www.zenhub.com/" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/zenhub.png" width="500" height="200" alt="ZenHub" align="center"></center><h2 id="草料二维码"><a href="#草料二维码" class="headerlink" title="草料二维码"></a>草料二维码</h2><p>点击生成当前网址二维码,草料二维码插件，实现快速获取二维码。<a href="https://cli.im/" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/1.png" width="500" height="200" alt="草料二维码" align="center"></center><h2 id="Adblock-Plus"><a href="#Adblock-Plus" class="headerlink" title="Adblock Plus"></a>Adblock Plus</h2><p>您有没有遇到过在使用chrome浏览器看视频或者是阅读文章的时候突然冒出一个大尺度的广告挡住了您的视线，不过这也可能还算是好的，如果那个大尺度的广告还没有关闭按钮的话我想您可能都有骂人的冲动了吧，而对于一篇自己喜欢的文章或者是喜爱的电影来说又舍不得放弃该怎么办？而今天为大家推荐的这款广告拦截插件：Adblock Plus可以轻松地帮您脱离”困境“。<a href="https://adblockplus.org/zh_CN/" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/adblock.png" width="500" height="200" alt="Adblock" align="center"></center><h2 id="开发工具箱"><a href="#开发工具箱" class="headerlink" title="开发工具箱"></a>开发工具箱</h2><p>功能比较强大，软件开发中常用的一些小工具这里都有，非常方便和全面<br>字符串编码解码 二维码生成 加密解密 HTML/JS/CSS 常用对照表。<a href="http://www.box3.cn/" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/jskf.png" width="500" height="200" alt="开发工具箱" align="center"></center><h2 id="WEB前端助手-FeHelper"><a href="#WEB前端助手-FeHelper" class="headerlink" title="WEB前端助手(FeHelper)"></a>WEB前端助手(FeHelper)</h2><p>FE助手：包括字符串编解码、代码压缩、美化、JSON格式化、正则表达式、时间转换工具、二维码生成与解码、编码规范检测、页面性能检测、页面取色、Ajax接口调试。<a href="http://www.cnplugins.com/devtool/webqianduanzhushoufehelper/" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/FeHelper.png" width="500" height="200" alt="WEB前端助手" align="center"></center><h2 id="Postman"><a href="#Postman" class="headerlink" title="Postman"></a>Postman</h2><p>这款网页调试工具不仅可以调试简单的css、html、脚本等简单的网页基本信息，它还可以发送几乎所有类型的HTTP请求！Postman在发送网络HTTP请求方面可以说是Chrome插件类产品中的代表产品之一。<a href="http://chromecj.com/web-development/2014-09/60.html" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/postman.png" width="500" height="200" alt="Postman" align="center"></center><h2 id="skyZIP™-Proxy"><a href="#skyZIP™-Proxy" class="headerlink" title="skyZIP™ Proxy"></a>skyZIP™ Proxy</h2><p>skyZIP浏览器扩展是完美的匿名互联网访问，如VPN服务，可以做更多，更快。skyZIP可以通过使用高性能代理服务器来优化网页，从而减少数据使用量。数据节省约50％.许多网站没有优化 - 但skyZIP正在将图像转码为WebP无损格式，因此产生的图像缩小了80％。<br><a href="https://www.skyzip.de/" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/skyzip.png" width="500" height="200" alt="skyZIP™ Proxy" align="center"></center><h2 id="Listen-1"><a href="#Listen-1" class="headerlink" title="Listen 1"></a>Listen 1</h2><p>我想大部分人对听音乐是强需求吧？如果没有音乐，那么你的生活里将不在有色彩。有人喜欢用网易云音乐、有人喜欢用虾米、QQ 音乐等，但是想大家不可能同时装这么多客户端吧？因为版权的原因，每个在线音乐网站都没有做到完全的曲库，你又不可能把每个音乐网站都买上会员，所以有时候你需要去不同的网站搜索音乐，这个时候请使用 Listen 1，简直不要太良心。界面也有点极客范，堪称程序员专属听歌工具。但是，Listen 1 并没有在 Chrome 应用商店上架，而是以开源的方式放在了 GitHub，只需要下载并让 Chrome 以开发者模式加载即可，安装方式见 GitHub 项目描述。<a href="https://github.com/listen1/listen1_chrome_extension" target="_blank" rel="noopener">链接地址</a></p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/listen1.png" width="500" height="200" alt="Listen" align="center"></center><h2 id="iBookmark-Bookmarks-收藏夹"><a href="#iBookmark-Bookmarks-收藏夹" class="headerlink" title="iBookmark Bookmarks 收藏夹"></a>iBookmark Bookmarks 收藏夹</h2><p>打造最好用的Chrome书签收藏夹插件，特性如下：</p><ol><li>将收藏夹以列表展示，相比树形图不用层层点击，可以直接看到所有网址；</li><li>支持搜索，快速查找；</li><li>支持在某分类下面新建收藏站点；</li><li>点击网址icon图标，可以对该书签进行修改以及删除操作；</li><li>支持最常访问统计，将常用网址置顶；</li><li><p>支持最新添加的网址展示。</p><center><img src="http://zhangqifei.top/picture/ifeier/chrome/ibookmark.png" width="500" height="200" alt="收藏夹" align="center"></center></li></ol><center><h3>持续更新中·······</h3></center>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;你应该知道的的Chrome插件！！！&lt;/p&gt;
&lt;h2 id=&quot;Momentum&quot;&gt;&lt;a href=&quot;#Momentum&quot; class=&quot;headerlink&quot; title=&quot;Momentum&quot;&gt;&lt;/a&gt;Momentum&lt;/h2&gt;&lt;p&gt;装逼利器，教你如何优雅的使用Chrome
      
    
    </summary>
    
      <category term="浏览器" scheme="https://www.zhangqifei.top/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
    
      <category term="Chrome" scheme="https://www.zhangqifei.top/tags/Chrome/"/>
    
  </entry>
  
  <entry>
    <title>centos7的变化</title>
    <link href="https://www.zhangqifei.top/2018/01/07/centos7/centos7/"/>
    <id>https://www.zhangqifei.top/2018/01/07/centos7/centos7/</id>
    <published>2018-01-06T17:50:32.000Z</published>
    <updated>2019-05-22T09:02:42.178Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service 停止firewall</span><br><span class="line">systemctl disable firewalld.service 禁止firewall开机启动</span><br><span class="line">firewall-cmd --state 查看默认防火墙状态（关闭后显示notrunning，开启后显示running）</span><br></pre></td></tr></table></figure></li><li><p>启动iptables</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start iptables.service</span><br><span class="line">cat /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></li><li><p>原来在RHEL7开始，使用systemctl工具来管理服务程序，包括了service和chkconfig</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files|grep enabled查看已启动的服务列表</span><br><span class="line">systemctl start firewalld.service启动一个服务</span><br><span class="line">systemctl stop firewalld.service关闭一个服务</span><br><span class="line">systemctl restart firewalld.service重启一个服务</span><br><span class="line">systemctl status firewalld.service显示一个服务的状态：</span><br><span class="line">systemctl enable firewalld.service在开机时启用一个服务</span><br><span class="line">systemctl disable firewalld.service在开机时禁用一个服务</span><br><span class="line">systemctl is-enabled firewalld.service;echo $?查看服务是否开机启动</span><br></pre></td></tr></table></figure></li><li><p>Centos7用ip命令代替ifconfig</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># ip link show                # 显示网络接口信息</span><br><span class="line"># ip link set eth0 upi           # 开启网卡</span><br><span class="line"># ip link set eth0 down          # 关闭网卡</span><br><span class="line"># ip link set eth0 promisc on      # 开启网卡的混合模式</span><br><span class="line"># ip link set eth0 promisc offi     # 关闭网卡的混个模式</span><br><span class="line"># ip link set eth0 txqueuelen 1200   # 设置网卡队列长度</span><br><span class="line"># ip link set eth0 mtu 1400        # 设置网卡最大传输单元</span><br><span class="line"># ip addr show                # 显示网卡IP信息</span><br><span class="line"># ip addr add 192.168.0.1/24 dev eth0 # 设置eth0网卡IP地址192.168.0.1</span><br><span class="line"># ip addr del 192.168.0.1/24 dev eth0 # 删除eth0网卡IP地址</span><br><span class="line"></span><br><span class="line"># ip route list                 # 查看路由信息</span><br><span class="line"># ip route add 192.168.4.0/24  via  192.168.0.254 dev eth0 # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口</span><br><span class="line"># ip route add default via  192.168.0.254  dev eth0    # 设置默认网关为192.168.0.254</span><br><span class="line"># ip route del 192.168.4.0/24      # 删除192.168.4.0网段的网关</span><br><span class="line"># ip route del default          # 删除默认路由</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span clas
      
    
    </summary>
    
      <category term="centos7" scheme="https://www.zhangqifei.top/categories/centos7/"/>
    
    
      <category term="centos7" scheme="https://www.zhangqifei.top/tags/centos7/"/>
    
  </entry>
  
  <entry>
    <title>如何管理自己的时间？</title>
    <link href="https://www.zhangqifei.top/2017/10/09/%E9%9A%8F%E7%AC%94/%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%B6%E9%97%B4/"/>
    <id>https://www.zhangqifei.top/2017/10/09/随笔/如何管理自己的时间/</id>
    <published>2017-10-09T04:35:22.000Z</published>
    <updated>2018-04-23T07:12:14.462Z</updated>
    
    <content type="html"><![CDATA[<p>我们每天都工作，生活。但有时候，每天都很忙碌，却不知道自己在忙些什么。每个人的时间都是有限的，我不想碌碌无为，终其一生。我需要知道自己做了些什么，为什么做，在哪个时候做。我以《Getting Things Done》与《小强升职记》为主，《番茄工作法》为辅，构建自己的时间管理体系。</p><h1 id="Getting-Things-Done"><a href="#Getting-Things-Done" class="headerlink" title="Getting Things Done"></a>Getting Things Done</h1><p>3个东西：确定目标，横向管理，纵向管理</p><p><img src="https://github.com/hirudy/article/blob/master/image/read/%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%B6%E9%97%B4/gtd.png?raw=true" alt="Getting Things Done.png"></p><h4 id="确定目标："><a href="#确定目标：" class="headerlink" title="确定目标："></a>确定目标：</h4><p>你如何判断你的目标，确定做事情的优先级？</p><ul><li>与同龄人沟通，一个人有时候会有太大的孤单感</li><li>与高等级比自己强大的人沟通（比如corey）</li><li>自我测验（如小强升职记）</li></ul><h4 id="横向管理"><a href="#横向管理" class="headerlink" title="横向管理"></a>横向管理</h4><p><img src="https://github.com/hirudy/article/blob/master/image/read/%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%B6%E9%97%B4/gtd_flow.png?raw=true" alt="GTD横向管理流程图"></p><p>这个流程图记录了一件事情如何进入gtd系统，最后被处理的</p><h4 id="纵向管理"><a href="#纵向管理" class="headerlink" title="纵向管理"></a>纵向管理</h4><p>是管理一个比较大的，重要的项目需要做的事情。</p><ul><li>有着自己想达到的目标和原则</li><li>想想可能达到的结果，最好的，最坏的。</li><li>头脑风暴，把跟这个项目关联的，所有信息都记录下来，不做评判</li><li>整理目标原则，整理结果展望，整理头脑风暴信息。</li><li>确定下一步该干什么</li></ul><h4 id="作者任务的观点"><a href="#作者任务的观点" class="headerlink" title="作者任务的观点"></a>作者任务的观点</h4><ul><li>清空大脑（专注）</li><li>生活中只存在两个问题：<ul><li>你知道要达到的目标，但不知道怎么去做？</li><li>你不知道你的目标是什么？</li></ul></li><li>我们的最终目标是把各种工作和情况赶出你的大脑，但绝不丢弃有潜在价值的想法</li></ul><h1 id="小强升职记"><a href="#小强升职记" class="headerlink" title="小强升职记"></a>小强升职记</h1><p>这是一本比较实用的时间管理，个人管理书籍，值得深读，精读，多读。</p><h4 id="寻找种子"><a href="#寻找种子" class="headerlink" title="寻找种子"></a>寻找种子</h4><ul><li>时间日志，找出时间黑洞，找出高效时间段，工作时间段法（基本的时间管理）</li><li>何为重要的事情，寻找自己的价值观，《职业价值观自测表》</li></ul><h4 id="让种子发芽"><a href="#让种子发芽" class="headerlink" title="让种子发芽"></a>让种子发芽</h4><ul><li>四象限法则</li><li>猴子法则：学会说NO, 合理安排时间</li><li>脑袋同时只装一件事情</li><li>gtd</li></ul><h4 id="长出主干和枝桠"><a href="#长出主干和枝桠" class="headerlink" title="长出主干和枝桠"></a>长出主干和枝桠</h4><ul><li>smart原则</li><li>分解</li></ul><h4 id="绿叶充实枝干"><a href="#绿叶充实枝干" class="headerlink" title="绿叶充实枝干"></a>绿叶充实枝干</h4><ul><li>习惯的养成</li></ul><h4 id="摘下够得着的果实"><a href="#摘下够得着的果实" class="headerlink" title="摘下够得着的果实"></a>摘下够得着的果实</h4><ul><li>每日回顾，反思和总结</li><li>处理零时突发事件</li></ul><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h4 id="如何处理中断？"><a href="#如何处理中断？" class="headerlink" title="如何处理中断？"></a>如何处理中断？</h4><p><img src="https://github.com/hirudy/article/blob/master/image/read/%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%B6%E9%97%B4/interrupt_deal.png?raw=true" alt="中断处理.png"></p><h1 id="番茄工作法"><a href="#番茄工作法" class="headerlink" title="番茄工作法"></a>番茄工作法</h1><p>该方法，最总要的一个目的是讲一天的时间分成一个个不可分割的原子时间，确保原子时间内，保持高度集中。</p><p>番茄工作法是一套pdca流程（戴明环）</p><h2 id="五个基本问题"><a href="#五个基本问题" class="headerlink" title="五个基本问题"></a>五个基本问题</h2><h4 id="这是一本什么类型的书？"><a href="#这是一本什么类型的书？" class="headerlink" title="这是一本什么类型的书？"></a>这是一本什么类型的书？</h4><p>实用类型</p><h4 id="这本书描述了什么？"><a href="#这本书描述了什么？" class="headerlink" title="这本书描述了什么？"></a>这本书描述了什么？</h4><p>描述了如何运用番茄工作法，使自己如何在一天中专注的做事情。</p><ul><li>计划：早上起来，计划一天做的事情</li><li>跟踪：执行，定闹钟循环的执行（专注工作-休息-专注工作-休息…）</li><li>记录与分析：记录完成情况（记录中断数），分析改进的方式</li><li>可视化：执行改进方式</li></ul><p>在跟踪中，使用一个个番茄时间跟踪完成。</p><h4 id="作者的观点"><a href="#作者的观点" class="headerlink" title="作者的观点"></a>作者的观点</h4><ul><li>一次只干一件事（专注）</li><li>大项目拆分成小项目 </li><li>分清事情优先级</li><li>总结与反思</li><li>说no, 把预估当成承诺</li><li>清空脑子</li><li>树立自信心（ 前怕狼后怕虎，害怕失败和批评）</li><li>没有什么完美主义（完美主义，碍手碍脚）</li><li>今日待办是一种承诺。</li><li>预估，根据历史记录预估，虽然有一些偏差</li></ul><p>番茄工作法是一套pdca流程（戴明环）</p><h4 id="是否有道理？"><a href="#是否有道理？" class="headerlink" title="是否有道理？"></a>是否有道理？</h4><p>感觉更gtd说的比较像，只是更加专注于每一天的处理控制。</p><blockquote><p>番茄工作法是一套pdca流程（戴明环）</p></blockquote><h4 id="自身经验"><a href="#自身经验" class="headerlink" title="自身经验"></a>自身经验</h4><p>不会做时间管理，真在寻找一种合适自己的方式。感觉该方法比较死板。</p><h4 id="对我的用处"><a href="#对我的用处" class="headerlink" title="对我的用处"></a>对我的用处</h4><ul><li>看该方法是否适合我</li><li>结合gtd构建自己的时间管理系统</li></ul><h2 id="重要句子"><a href="#重要句子" class="headerlink" title="重要句子"></a>重要句子</h2><p>已在作者观点与书的描述中，提炼总结</p><h2 id="提问"><a href="#提问" class="headerlink" title="提问"></a>提问</h2><h4 id="如何处理中断？-1"><a href="#如何处理中断？-1" class="headerlink" title="如何处理中断？"></a>如何处理中断？</h4><p>中断分为内部中断和外部中断。<br>根据事情的紧急情况做区分。</p><ul><li>不紧急：记录在收集箱中，继续当前番茄时间，延后分类处理</li><li>紧急：作废当前番茄时间，处理紧急事情。</li></ul><h4 id="如何预估一个任务需要的时间？"><a href="#如何预估一个任务需要的时间？" class="headerlink" title="如何预估一个任务需要的时间？"></a>如何预估一个任务需要的时间？</h4><p>根据历史预估，然后当天总结反馈。调整，再预估，迭代处理。</p><h1 id="我的时间管理"><a href="#我的时间管理" class="headerlink" title="我的时间管理"></a>我的时间管理</h1><ul><li>确定自己的方向目标</li><li>用滴答清单，在收集箱中随时记录想到的东西</li><li>早上坐地铁，想想今天的事情</li><li>根据目标确定每一天/每一周/每一月的重要事情（四象限法则）</li><li>将复杂项目分解，成具体的可执行的下一步行动</li><li>每一天专注，我不适合使用番茄法。从清单中拿出一件事情，中断根据重要情况，紧急情况做适当处理，参加《小强升职记》中老付的处理方式</li><li>晚上回去，想想今天做了什么，为什么做？有什么改进的地方。</li></ul><p>向往着更好的生活，更自由的时间，我一直在这条路上奔跑，good luck。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我们每天都工作，生活。但有时候，每天都很忙碌，却不知道自己在忙些什么。每个人的时间都是有限的，我不想碌碌无为，终其一生。我需要知道自己做了些什么，为什么做，在哪个时候做。我以《Getting Things Done》与《小强升职记》为主，《番茄工作法》为辅，构建自己的时间管
      
    
    </summary>
    
      <category term="随笔" scheme="https://www.zhangqifei.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>如何阅读一本书？</title>
    <link href="https://www.zhangqifei.top/2017/09/04/%E9%9A%8F%E7%AC%94/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/"/>
    <id>https://www.zhangqifei.top/2017/09/04/随笔/如何阅读一本书/</id>
    <published>2017-09-04T01:35:22.000Z</published>
    <updated>2018-04-23T07:12:14.323Z</updated>
    
    <content type="html"><![CDATA[<p>工欲善其事必先利其器，对于我们这些已经脱离了学校的指导学习的热，如果想要不断提高自己，就必须学会自我驱动学习。在自我驱动学习中，书籍成为我们获取知识的重要途径。如何从一本书中汲取知识成为重中之重。</p><p>我以艾德勒的《如何阅读一本书》为基本框架，以赵周的《这样读书就够了》与秋叶的《如何高效读懂一本书》为辅，构建我的读书体系。</p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>一图胜千言<br><img src="https://github.com/hirudy/article/blob/master/image/read/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93.png?raw=true" alt="如何阅读个人总结"></p><hr><h1 id="读《如何阅读一本书》"><a href="#读《如何阅读一本书》" class="headerlink" title="读《如何阅读一本书》"></a>读《如何阅读一本书》</h1><p>精读，分析阅读。</p><h2 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h2><p><img src="https://github.com/hirudy/article/blob/master/image/read/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6.png?raw=true" alt="如何阅读一本书"></p><h2 id="五个基本问题"><a href="#五个基本问题" class="headerlink" title="五个基本问题"></a>五个基本问题</h2><h4 id="1-这本书什么类型？"><a href="#1-这本书什么类型？" class="headerlink" title="1. 这本书什么类型？"></a>1. 这本书什么类型？</h4><p>实用类型，指导类型，方法论</p><h4 id="2-这本书说了什么？"><a href="#2-这本书说了什么？" class="headerlink" title="2. 这本书说了什么？"></a>2. 这本书说了什么？</h4><p>阅读的价值，阅读的四个层次（基础阅读，检视阅读，分析阅读，主题阅读），他们成包含关系。以及如何做笔记等等</p><h4 id="3-作者观点是？"><a href="#3-作者观点是？" class="headerlink" title="3. 作者观点是？"></a>3. 作者观点是？</h4><p>阅读使人灵活。阅读要主动阅读（提问题，找答案）。</p><h4 id="4-所得是否有道理，还是部分有道理？"><a href="#4-所得是否有道理，还是部分有道理？" class="headerlink" title="4. 所得是否有道理，还是部分有道理？"></a>4. 所得是否有道理，还是部分有道理？</h4><ul><li>比较赞同阅读分层结构。分析阅读与对比阅读。</li><li>有点啰嗦，一个东西不同说法如“要理性判断，不做无理的辩驳”与“尊重知识与个人意见的不同，在做任何评判之前找到理论依据”。</li><li>比较适用于精读一本书或建立某个主题的知识体系。</li><li>这么读，时间成本有点高。</li></ul><h4 id="5-对我有什么价值？我怎么运用？"><a href="#5-对我有什么价值？我怎么运用？" class="headerlink" title="5. 对我有什么价值？我怎么运用？"></a>5. 对我有什么价值？我怎么运用？</h4><ul><li>有一个较为系统的读书方法。全局观。<ul><li>基础阅读，读书识字。</li><li>检视阅读，确定阅读价值与作者的观点，这里需要确定是否有价值，作者大概说了什么。</li><li>分析阅读，确定骨架，主旨，事实上，包含检视阅读。输出思维导图，一些重要思想与主旨。评判作者对与否</li><li>主题阅读，没有完美的书，不听信一家之言。完成一类主题的思维导图输出，构建该主题的知识骨架/框架。如同有招到无招的境界。</li></ul></li><li>构建一个主题（如数据库，摄影等等）的知识体系的方法，就用这种方式。</li></ul><h2 id="重要语句摘录"><a href="#重要语句摘录" class="headerlink" title="重要语句摘录"></a>重要语句摘录</h2><ul><li>阅读技巧不仅仅可以运用于书籍，还可以运用于其他的地方，如报纸，杂志，文章，新闻，甚至是广告。</li><li>一个技能或一个习惯，都是由一系列的动作组成。 为了忘掉这些单一的动作，一开始你必须先学会每一个动作。</li><li>思考、感觉、想象是主动阅读（多提问题，然后寻找答案）的重要组成部分。</li></ul><h2 id="自问自答"><a href="#自问自答" class="headerlink" title="自问自答"></a>自问自答</h2><h4 id="1-第一个主要议题是什么"><a href="#1-第一个主要议题是什么" class="headerlink" title="1. 第一个主要议题是什么"></a>1. 第一个主要议题是什么</h4><p>自我管理的阅读者</p><h4 id="2-第二个主要议题"><a href="#2-第二个主要议题" class="headerlink" title="2. 第二个主要议题"></a>2. 第二个主要议题</h4><p>主动阅读的四个基本问题</p><h4 id="3-如何对书籍分类？"><a href="#3-如何对书籍分类？" class="headerlink" title="3. 如何对书籍分类？"></a>3. 如何对书籍分类？</h4><p>我觉得应该根据用途来区分，毕竟学以致用</p><h4 id="4-检视阅读的两个阶段是在什么时候完成？"><a href="#4-检视阅读的两个阶段是在什么时候完成？" class="headerlink" title="4. 检视阅读的两个阶段是在什么时候完成？"></a>4. 检视阅读的两个阶段是在什么时候完成？</h4><p>第一个阶段，拿到一本新书确认是否有读的必要和价值。<br>第二个阶段，确认可以读，完成一遍粗读，知道在讲什么。</p><h4 id="5-分析阅读的几个阶段是并行完成？"><a href="#5-分析阅读的几个阶段是并行完成？" class="headerlink" title="5. 分析阅读的几个阶段是并行完成？"></a>5. 分析阅读的几个阶段是并行完成？</h4><p>第一二个阶段，如果可能，应该在检视阅读中完成。<br>第三个阶段需要阅读完成，一定思考，理解后。</p><h4 id="6-主题阅读是主题分享？"><a href="#6-主题阅读是主题分享？" class="headerlink" title="6. 主题阅读是主题分享？"></a>6. 主题阅读是主题分享？</h4><p>请一个主题的若干作者一起来讨论一个主题。 分享沙龙<br>无招胜有招。</p><hr><h1 id="读《这样读书就够了》"><a href="#读《这样读书就够了》" class="headerlink" title="读《这样读书就够了》"></a>读《这样读书就够了》</h1><p>检视阅读，粗读</p><h2 id="思维导图-1"><a href="#思维导图-1" class="headerlink" title="思维导图"></a>思维导图</h2><p><img src="https://github.com/hirudy/article/blob/master/image/read/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/%E8%BF%99%E6%A0%B7%E8%AF%BB%E4%B9%A6%E5%B0%B1%E5%A4%9F%E4%BA%86.png?raw=true" alt="这样读书就够了"></p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h4 id="1-这本书什么类型？这本书说了什么？"><a href="#1-这本书什么类型？这本书说了什么？" class="headerlink" title="1. 这本书什么类型？这本书说了什么？"></a>1. 这本书什么类型？这本书说了什么？</h4><ul><li>实用类，关于如何读书，如何拆书，以及拆书现场的一些的东西。</li><li>提出了一个读书方式：拆书帮便签法。</li><li>认为读书带目的</li><li>读一本书，不一定要整本书，选着对自己有价值的读就可以了。</li><li>生存余力=生存力量/生存负债</li></ul><h4 id="2-是否有道理？"><a href="#2-是否有道理？" class="headerlink" title="2. 是否有道理？"></a>2. 是否有道理？</h4><ul><li>这本书有一半的时间在说拆书家如何如何，没啥价值</li><li>比较赞同读书带目的，读书不一定全本书都读，可以选着对自己的有用的部分。</li></ul><h4 id="3-对我有什么价值？"><a href="#3-对我有什么价值？" class="headerlink" title="3. 对我有什么价值？"></a>3. 对我有什么价值？</h4><p>书签法，有点用，其核心大概是：</p><ul><li>用自己的话复述书的核心价值。</li><li>联系自己的相关经验，有相似的地方么</li><li>思考，可以怎么用，进行知识归类。</li></ul><p>可以用于读消遣书，或不需要分析阅读、精读的书。</p><hr><h1 id="读《如何高效读懂一本书》"><a href="#读《如何高效读懂一本书》" class="headerlink" title="读《如何高效读懂一本书》"></a>读《如何高效读懂一本书》</h1><p>检视略读，初步判断，该书，就是一本个人解读的书单。有时间再细看。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;工欲善其事必先利其器，对于我们这些已经脱离了学校的指导学习的热，如果想要不断提高自己，就必须学会自我驱动学习。在自我驱动学习中，书籍成为我们获取知识的重要途径。如何从一本书中汲取知识成为重中之重。&lt;/p&gt;
&lt;p&gt;我以艾德勒的《如何阅读一本书》为基本框架，以赵周的《这样读书就
      
    
    </summary>
    
      <category term="随笔" scheme="https://www.zhangqifei.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>DevOps的八荣八耻</title>
    <link href="https://www.zhangqifei.top/2017/08/19/%E9%9A%8F%E7%AC%94/DevOps%E7%9A%84%E5%85%AB%E8%8D%A3%E5%85%AB%E8%80%BB/"/>
    <id>https://www.zhangqifei.top/2017/08/19/随笔/DevOps的八荣八耻/</id>
    <published>2017-08-19T01:41:22.000Z</published>
    <updated>2019-05-22T03:35:02.324Z</updated>
    
    <content type="html"><![CDATA[<center><br>以可配置为荣 ，以硬编码为耻<br></center><center><br>以可互备为荣 ，以单点为耻<br></center><center><br>以可无状态为荣 ，以有状态为耻<br></center><center><br>以可随便重启为荣 ，以不能迁移为耻<br></center><center><br>以整体交付为荣，以部分交付为耻<br></center><center><br>以标准化为荣，以特殊化为耻<br></center><center><br>以自动化运维为荣，以人肉化运维为耻<br></center><center><br>以无人值守为荣，以人工值班为耻<br></center>]]></content>
    
    <summary type="html">
    
      
      
        &lt;center&gt;&lt;br&gt;以可配置为荣 ，以硬编码为耻&lt;br&gt;&lt;/center&gt;&lt;center&gt;&lt;br&gt;以可互备为荣 ，以单点为耻&lt;br&gt;&lt;/center&gt;&lt;center&gt;&lt;br&gt;以可无状态为荣 ，以有状态为耻&lt;br&gt;&lt;/center&gt;&lt;center&gt;&lt;br&gt;以可随便重启为荣 ，以
      
    
    </summary>
    
      <category term="随笔" scheme="https://www.zhangqifei.top/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
  </entry>
  
  <entry>
    <title>ansible puppet saltstack三款自动化运维工具的对比！</title>
    <link href="https://www.zhangqifei.top/2017/08/10/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/ansible%20puppet%20saltstack%E4%B8%89%E6%AC%BE%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%E7%9A%84%E5%AF%B9%E6%AF%94/"/>
    <id>https://www.zhangqifei.top/2017/08/10/运维自动化工具/ansible puppet saltstack三款自动化运维工具的对比/</id>
    <published>2017-08-10T06:41:22.000Z</published>
    <updated>2019-05-22T03:41:05.235Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、基础介绍"><a href="#一、基础介绍" class="headerlink" title="一、基础介绍"></a>一、基础介绍</h3><ul><li><a href="http://zhangqifei.top/2017/08/09/linux/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7ansible/" target="_blank" rel="noopener">ansible基础介绍可参考</a></li><li><a href="http://zhangqifei.top/2017/08/07/linux/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7puppet/" target="_blank" rel="noopener">puppet基础介绍可参考</a></li><li><a href="http://zhangqifei.top/2017/08/06/linux/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7saltstack/" target="_blank" rel="noopener">saltstack基础介绍可参考</a></li></ul><h3 id="二、技术特性比较"><a href="#二、技术特性比较" class="headerlink" title="二、技术特性比较"></a>二、技术特性比较</h3><table><thead><tr><th>名称</th><th>Puppet</th><th>SaltStack</th><th>Ansible</th></tr></thead><tbody><tr><td>开发语言</td><td>Ruby</td><td>Python</td><td>Python</td></tr><tr><td>客户端</td><td>有</td><td>有</td><td>无</td></tr><tr><td>二次开发</td><td>不支持</td><td>支持</td><td>支持</td></tr><tr><td>通信验证</td><td>是</td><td>是</td><td>是</td></tr><tr><td>同学加密</td><td>标准SSL协议</td><td>AES加密</td><td>OpenSSH</td></tr><tr><td>平台支持</td><td>AIX,BSD,HP-UX,Linux,Mac OS X,Solaris,Windows</td><td>BSD,Linux,Mac OS X,Solaris,Windows</td><td>AIX,BSD,HP-UX,Linux,Mac OS X,Solaris</td></tr><tr><td>配置文件格式</td><td>Ruby语法格式</td><td>YAML</td><td>YAML</td></tr><tr><td>Web UI</td><td>提供</td><td>提供</td><td>提供（商业版本）</td></tr><tr><td>命令执行</td><td>不支持（配置模块可实现）</td><td>支持</td><td>支持</td></tr></tbody></table><h3 id="三、优缺点对比"><a href="#三、优缺点对比" class="headerlink" title="三、优缺点对比"></a>三、优缺点对比</h3><table><thead><tr><th>名称</th><th>优势</th><th>劣势</th><th>成本</th></tr></thead><tbody><tr><td>Puppet</td><td>模块由Ruby或Ruby子集编写<br>push命令可以即可触发变更<br>Web界面生成处理报表、资源清单、实时节点管理<br>代理运行端进行详细、深入的报告和对节点进行配置</td><td>相对其他工具较复杂，需学习Puppet的DSL或Ruby<br>安装过程缺少错误校验和产生错误报表</td><td>开源软件免费<br>SaltStack企业版每年内个节点花费约￥100</td></tr><tr><td>Saltstack</td><td>状态文件可用简单YAML配置模块或复杂的Python/PyDSL脚本<br>与客户端可以基于SSH或在被管节点安装代理<br>Web界面可看到运行的工作、minion状态、事件日志、可在客户端执行命令<br>扩展能力极强</td><td>Web界面像毒药竞争产品不稳定与相对不完善<br>缺乏生成深度报告的能力</td><td>开源软件免费<br>SaltStack企业版每年内个节点花费约￥150，随着数量增加相应的会有折扣</td></tr><tr><td>Ansible</td><td>模块可以用任何语言开发<br>备管节点不需要安装代理软件<br>有Web管理界面、可配置用户、组、资源清单和执行Playbook<br>安装、运行极其简单</td><td>对备管理节点为Windows有待加强<br>Web管理界面是内置的Ansible的一部分<br>需导入资源清单<br>执行效率较低</td><td>开源版本免费<br>Ansible Tower小于10台被管理节点免费<br>超过10太后没年每台需支付￥100~$250的支持服务费用</td></tr></tbody></table><h3 id="四、推荐场景"><a href="#四、推荐场景" class="headerlink" title="四、推荐场景"></a>四、推荐场景</h3><h4 id="4-1-Puppet"><a href="#4-1-Puppet" class="headerlink" title="4.1 Puppet"></a>4.1 Puppet</h4><p>　　Puppet也许是四款工具中最深入人心的。就可用操作、模块和用户界面而言，它是最全面的。Puppet呈现了数据中心协调的全貌，几乎涵盖每一个运行系统，为各大操作系统提供了深入的工具。初始设置比较简单，只需要在需要加以管理的每个系统上安装主服务器和客户端代理软件。</p><p>　　命令行接口(CLI)简单直观，允许通过puppet命令下载和安装模块。然后，需要对配置文件进行更改，好让模块适合所需的任务;应接到指令的客户端与主服务器联系时，会更改配置文件，或者客户端通过立即触发更改配置文件的推送(push)来进行更改。</p><p>　　还有一些模块可以提供和配置云服务器实例和虚拟服务器实例。所有模块和配置都使用基于Ruby的Puppet专属语言或者Ruby本身构建而成，因而除了系统管理技能外，还需要编程专业知识。</p><p>　　Puppet企业版拥有最全面的Web用户界面，允许使用主服务器上的预制模块和菜谱(cookbook)，实时控制被管理的节点。Web用户界面很适合用于管理，但是不允许对模块进行诸多配置。报告工具非常完善，提供了详细信息，以便了解代理软件运行如何、已做出什么样的变更。</p><h4 id="4-2-Ansible"><a href="#4-2-Ansible" class="headerlink" title="4.2 Ansible"></a>4.2 Ansible</h4><p>　　Ansible极其类似Salt，而不太类似Puppet或Chef。Ansible关注的重点是力求精简和快速，而且不需要在节点上安装代理软件。因此，Ansible通过SSH执行所有功能。Ansible基于Python;相比之下，Puppet和Chef基于Ruby。</p><p>　　Ansible可以通过Git软件库克隆，安装到Ansible主服务器上。安装完毕后，需要管理的节点被添加到Ansible配置环境，SSH授权密钥被附加到每个节点上，这与运行Ansible的用户有关。一旦完成了这步，Ansible主服务器可以通过SSH与节点进行通信，执行所有必要的任务。为了与默认情况下不允许根SSH访问的操作系统或发行版协同运行，Ansible接受sudo登录信息，以便在那些系统上以根用户的身份运行命令。</p><p>　　Ansible可以使用Paramiko(基于SSH2协议的Python实现)或标准SSH用于通信，不过还有一种加速模式，允许更快速、更大规模的通信。</p><p>　　针对确保服务在运行，或者触发更新和重新启动之类的简单任务，Ansible可以从命令行来运行，不需要使用配置文件。至于比较复杂的任务，Ansible配置通过名为Playbook的配置文件中的YAML语法来加以处理。Playbook还可以使用模板来扩展其功能。</p><p>　　Ansible有一大批模块，可用于管理各种系统以及亚马逊弹性计算云(EC2)和OpenStack等云计算基础设施。可以用几乎任何一种语言来编写自定义Ansible模块，只要模块输出是有效的JSON。</p><p>　　Ansible的Web用户界面以AnsibleWorks AWX的形式出现，但AWX与CLI并不直接联系在一起。这意味着，除非进行了同步过程，否则CLI里面的配置元素不会出现在Web用户界面中。你可以使用那个内置的同步工具，让两者保持一致，但需要按照预定计划运行同步工具。</p><h4 id="4-3-SaltStack"><a href="#4-3-SaltStack" class="headerlink" title="4.3 SaltStack"></a>4.3 SaltStack</h4><p>　　Salt类似Ansible，因为它也是基于CLI的工具，采用了推送方法实现客户端通信。它可以通过Git或通过程序包管理系统安装到主服务器和客户端上。客户端会向主服务器提出请求，请求在主服务器上得到接受后，就可以控制该客户端了。</p><p>　　Salt可以通过普通的SSH与客户端进行通信，但如果使用名为minion的客户端代理软件，可以大大增强可扩展性。此外，Salt含有一个异步文件服务器，可以为客户端加快文件服务速度，这完全是Salt注重高扩展性的一个体现。</p><p>　　与Ansible一样，你可以直接通过CLI，向客户端发出命令，比如启动服务或安装程序包;你也可以使用名为state的YAML配置文件，处理比较复杂的任务。还有“pillar”，这些是放在集中地方的数据集，YAML配置文件可以在运行期间访问它们。</p><p>　　你可以直接通过CLI，向客户端请求配置信息，比如内核版本或网络接口方面的详细信息。只要使用名为“grain”的库存元素，就可以描述客户端;这样一来，管理员可以轻松向某一种类型的服务器发出命令，不需要依赖已配置群组。比如说，只要使用一个CLI命令，你就可以向运行某个内核版本的每个客户端发送命令。</p><p>　　与Puppet、Chef和Ansible一样，Salt也提供了大量的模块，以处理特定的软件、操作系统和云服务。自定义模块可以用Python或PyDSL来编写。除了Unix管理外，Salt的确提供Windows管理功能，但它还是更擅长管理Unix和Linux系统。</p><p>　　Salt的Web用户界面Halite非常新，功能不如其他系统的Web用户界面来得全面。它提供了事件日志和客户端状态的视图，能够在客户端上运行命令，但除此之外乏善可陈。</p><p>　　Salt的较大优点在于可扩展性和弹性。你可以有多个级别的主服务器。上游主服务器可以控制下游主服务器及其客户端。另一个优点在于对等系统，让客户端可以向主服务器提出问题，然后主服务器从其他服务器得到答案，提供全面信息。如果需要在实时数据库中查询数据，以便完成客户端的配置，这个优点就很方便。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;一、基础介绍&quot;&gt;&lt;a href=&quot;#一、基础介绍&quot; class=&quot;headerlink&quot; title=&quot;一、基础介绍&quot;&gt;&lt;/a&gt;一、基础介绍&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://zhangqifei.top/2017/08/09/linux/
      
    
    </summary>
    
      <category term="运维自动化工具" scheme="https://www.zhangqifei.top/categories/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="运维自动化工具" scheme="https://www.zhangqifei.top/tags/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>运维自动化工具ansible</title>
    <link href="https://www.zhangqifei.top/2017/08/09/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7ansible/"/>
    <id>https://www.zhangqifei.top/2017/08/09/运维自动化工具/运维自动化工具ansible/</id>
    <published>2017-08-09T12:42:22.000Z</published>
    <updated>2019-05-22T03:48:55.106Z</updated>
    
    <content type="html"><![CDATA[<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>ansible是一个基于python开发的轻量级自动化运维管理工具，可以用来批量执行命令，安装程序，支持playbook编排。它通过ssh协议来连接主机，去中心化，相对比puppet和saltstack无需安装客户即可实现文件传输、命令执行、应用部署、配置管理、任务编排等，显得更为简单与轻量。ansible只是提供一种框架，其基于模块工作的，本身没有批量部署。</p><h3 id="企业级自动化运维工具应用实战ansible"><a href="#企业级自动化运维工具应用实战ansible" class="headerlink" title="企业级自动化运维工具应用实战ansible"></a>企业级自动化运维工具应用实战ansible</h3><p>公司计划在年底做一次大型市场促销活动，全面冲刺下交易额，为明年的上市做准备。公司要求各业务组对年底大促做准备，运维部要求所有业务容量进行三倍的扩容，并搭建出多套环境可以共开发和测试人员做测试，运维老大为了在年底有所表现，要求运维部门同学尽快实现，当你接到这个任务时，有没有更快的解决方案？</p><h3 id="Ansible发展史"><a href="#Ansible发展史" class="headerlink" title="Ansible发展史"></a>Ansible发展史</h3><p>Ansible</p><ul><li>创始人，Michael DeHaan（Cobbler 与Func 的作者）</li><li>2012-03-09，发布0.0.1版，红帽收购</li><li>2015-10-17，Red Hat宣布收购（据说是1.5 亿美元）</li></ul><p><strong>同类自动化工具GitHub关注程度（2016-07-10）</strong></p><table><thead><tr><th>同类的自动化运维工具</th><th>Watch（关注）</th><th>Star（点赞）</th><th>Fork（复制）</th><th>Contributors(贡献者)</th></tr></thead><tbody><tr><td>Ansible</td><td>1387</td><td>17716</td><td>5356</td><td>1428</td></tr><tr><td>Saltstack</td><td>530</td><td>6678</td><td>3002</td><td>1520</td></tr><tr><td>Puppet</td><td>463</td><td>4044</td><td>1678</td><td>425</td></tr><tr><td>Chef</td><td>383</td><td>4333</td><td>1806</td><td>464</td></tr><tr><td>Fabric</td><td>379</td><td>7334</td><td>1235</td><td>116</td></tr></tbody></table><h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul><li>模块化：调用特定的模块，完成特定任务</li><li>有Paramiko，PyYAML，Jinja2（模板语言）三个关键模块</li><li>支持自定义模块</li><li>基于Python语言实现</li><li>部署简单，基于python和SSH(默认已安装)，agentless</li><li>安全，基于OpenSSH</li><li>支持playbook编排任务</li><li>幂等性：一个任务执行1遍和执行n遍效果一样，不因重复执行带来意外情况</li><li>无需代理不依赖PKI（无需ssl）</li><li>可使用任何编程语言写模块</li><li>YAML格式，编排任务，支持丰富的数据结构</li><li>较强大的多层解决方案</li></ul><h3 id="ansible架构"><a href="#ansible架构" class="headerlink" title="ansible架构"></a>ansible架构</h3><center><img src="http://zhangqifei.top/picture/ansible/4.png" alt="ansible架构"></center><h3 id="Ansible工作原理"><a href="#Ansible工作原理" class="headerlink" title="Ansible工作原理"></a>Ansible工作原理</h3><p><center><img src="http://zhangqifei.top/picture/ansible/5.png" alt="Ansible工作原理"></center></p><ul><li>ANSIBLE PLAYBOOKS：任务剧本（任务集），编排定义Ansible任务集的配置文件，由Ansible顺序依次执行，通常是JSON格式的YML文件</li><li>INVENTORY：Ansible管理主机的清单/etc/anaible/hosts</li><li>MODULES：Ansible执行命令的功能模块，多数为内置的核心模块，也可自定义</li><li>PLUGINS：模块功能的补充，如连接类型插件、循环插件、变量插件、过滤插件等，该功能不常用</li><li>API：供第三方程序调用的应用程序编程接口</li><li>ANSIBLE：组合INVENTORY、API、MODULES、PLUGINS的绿框，可以理解为是ansible命令工具，其为核心执行工具</li></ul><p><strong>Ansible命令执行来源：</strong></p><ul><li>USER，普通用户，即SYSTEM ADMINISTRATOR</li><li>CMDB（配置管理数据库）API 调用</li><li>PUBLIC/PRIVATE CLOUD API调用</li><li>USER-&gt; Ansible Playbook -&gt; Ansibile</li></ul><p><strong>利用ansible实现管理的方式：</strong></p><ul><li>Ad-Hoc 即ansible命令，主要用于临时命令使用场景</li><li>Ansible-playbook 主要用于长期规划好的，大型项目的场景，需要有前提的规划</li></ul><p><strong>Ansible-playbook（剧本）执行过程：</strong></p><ul><li>将已有编排好的任务集写入Ansible-Playbook</li><li>通过ansible-playbook命令分拆任务集至逐条ansible命令，按预定规则逐条执行</li></ul><p><strong>Ansible主要操作对象：</strong></p><ul><li>HOSTS主机</li><li>NETWORKING网络设备</li></ul><p><strong>注意事项</strong></p><ul><li>执行ansible的主机一般称为主控端，中控，master或堡垒机主控端Py:   thon版本需要2.6或以上</li><li>被控端Python版本小于2.4需要安装python-simplejson</li><li>被控端如开启SELinux需要安装libselinux-python</li><li>windows不能做为主控端</li></ul><h3 id="ansible安装-四种方式"><a href="#ansible安装-四种方式" class="headerlink" title="ansible安装(四种方式)"></a>ansible安装(四种方式)</h3><ul><li>rpm包安装: EPEL源<code>yum install ansible</code></li><li>编译安装:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum -y install python-jinja2 PyYAML python-paramiko </span><br><span class="line">python-babel python-crypto</span><br><span class="line">tar xf ansible-1.5.4.tar.gz</span><br><span class="line">cd ansible-1.5.4</span><br><span class="line">python setup.py build</span><br><span class="line">python setup.py install</span><br><span class="line">mkdir /etc/ansible</span><br><span class="line">cp -r examples/* /etc/ansible</span><br></pre></td></tr></table></figure><ul><li>Git方式安装</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone git://github.com/ansible/ansible.git --recursive</span><br><span class="line">cd ./ansible</span><br><span class="line">source ./hacking/env-setup</span><br></pre></td></tr></table></figure><ul><li>pip安装：pip是安装Python包的管理器，类似yum</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install python-pip python-devel</span><br><span class="line">yum install gcc glibc-devel zibl-devel rpm-bulid openssl-devel</span><br><span class="line">pip install  --upgrade pip</span><br><span class="line">pip install ansible--upgrade</span><br></pre></td></tr></table></figure><ul><li>确认安装：<code>ansible --version</code></li></ul><h3 id="相关文件"><a href="#相关文件" class="headerlink" title="相关文件"></a>相关文件</h3><p><strong>配置文件</strong><br><code>/etc/ansible/ansible.cfg</code> 主配置文件，配置ansible工作特性<br><code>/etc/ansible/hosts</code> 主机清单<br><code>/etc/ansible/roles/</code> 存放角色的目录</p><p><strong>程序</strong><br><code>/usr/bin/ansible</code> 主程序，临时命令执行工具<br><code>/usr/bin/ansible-doc</code> 查看配置文档，模块功能查看工具<br><code>/usr/bin/ansible-galaxy</code> 下载/上传优秀代码或Roles模块的官网平台<br><code>/usr/bin/ansible-playbook</code> 定制自动化任务，编排剧本工具<br><code>/usr/bin/ansible-pull</code> 远程执行命令的工具<br><code>/usr/bin/ansible-vault</code>  文件加密工具<br><code>/usr/bin/ansible-console</code>  基于Console界面与用户交互的执行工具</p><h4 id="主机清单inventory"><a href="#主机清单inventory" class="headerlink" title="主机清单inventory"></a>主机清单inventory</h4><ul><li>ansible的主要功用在于批量主机操作，为了便捷地使用其中的部分主机，可以在inventory file中将其分组命名</li><li>默认的inventory file为<code>/etc/ansible/hosts</code></li><li>inventory file可以有多个，且也可以通过Dynamic Inventory来动态生成</li></ul><p><strong><code>/etc/ansible/hosts</code>文件格式</strong><br>inventory文件遵循INI文件风格，中括号中的字符为组名。可以将同一个主机同时归并到多个不同的组中；此外，当如若目标主机使用了非默认的SSH端口，还可以在主机名称之后使用冒号加端口号来标明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line">[root@centos7 ~]#vim /etc/ansible/hosts</span><br><span class="line">[web]</span><br><span class="line">192.168.109.100</span><br><span class="line">192.168.109.2</span><br><span class="line"></span><br><span class="line">[db]</span><br><span class="line">192.168.109.3</span><br><span class="line">192.168.109.100 //这里默认有个all</span><br><span class="line">[root@centos7 ~]#ansible db -m ping       </span><br><span class="line">192.168.109.100 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: false, </span><br><span class="line">    &quot;ping&quot;: &quot;pong&quot;</span><br><span class="line">&#125;</span><br><span class="line">192.168.109.3 | SUCCESS =&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: false, </span><br><span class="line">    &quot;ping&quot;: &quot;pong&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如果主机名称遵循相似的命名模式，还可以使用列表的方式标识各主机<br>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[websrvs]</span><br><span class="line">www[01:100].example.com</span><br><span class="line"></span><br><span class="line">[dbsrvs]</span><br><span class="line">db-[a:f].example.com</span><br></pre></td></tr></table></figure></p><h3 id="ansible-配置文件"><a href="#ansible-配置文件" class="headerlink" title="ansible 配置文件"></a>ansible 配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Ansible 配置文件/etc/ansible/ansible.cfg （一般保持默认）</span><br><span class="line">[defaults]</span><br><span class="line">#inventory      = /etc/ansible/hosts  # 主机列表配置文件</span><br><span class="line">#library        = /usr/share/my_modules/ # 库文件存放目录</span><br><span class="line">#remote_tmp     = $HOME/.ansible/tmp #临时py命令文件存放在远程主机目录</span><br><span class="line">#local_tmp      = $HOME/.ansible/tmp # 本机的临时命令执行目录</span><br><span class="line">#forks          = 5   # 默认并发数</span><br><span class="line">#sudo_user      = root  # 默认sudo 用户</span><br><span class="line">#ask_sudo_pass  = True  #每次执行ansible命令是否询问ssh密码</span><br><span class="line">#ask_pass       = True   </span><br><span class="line">#remote_port    = 22</span><br><span class="line">#host_key_checking = False  #检查对应服务器的host_key，建议取消注释第一次连接不用输入yes</span><br><span class="line">#log_path = /var/log/ansible.log 生成日志文件</span><br></pre></td></tr></table></figure><h3 id="ansible系列命令"><a href="#ansible系列命令" class="headerlink" title="ansible系列命令"></a>ansible系列命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Ansible系列命令</span><br><span class="line">ansible    ansible-doc    ansible-playbook    ansible-vault ansible-console    ansible-galaxy    ansible-pull </span><br><span class="line"></span><br><span class="line">ansible-doc:显示模块帮助</span><br><span class="line">ansible-doc [options] [module...]</span><br><span class="line">-a              显示所有模块的文档</span><br><span class="line">-l, --list      列出可用模块</span><br><span class="line">-s, --snippet   显示指定模块的playbook片段</span><br><span class="line">示例：</span><br><span class="line">ansible-doc –l       列出所有模块</span><br><span class="line">ansible-doc ping     查看指定模块帮助用法</span><br><span class="line">ansible-doc –s  ping 查看指定模块帮助用法</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">ansible通过ssh实现配置管理、应用部署、任务执行等功能，建议配置ansible端能基于密钥认证的方式联系各被管理节点</span><br><span class="line"></span><br><span class="line">ansible &lt;host-pattern&gt; [-m module_name] [-a args] </span><br><span class="line">--version           显示版本</span><br><span class="line">-m module           指定模块，默认为command</span><br><span class="line">-v                  详细过程–vv-vvv更详细</span><br><span class="line">--list-hosts        显示主机列表，可简写—list</span><br><span class="line">-k, --ask-pass      提示连接密码，默认Key验证</span><br><span class="line">-K, --ask-become-pass  提示输入sudo</span><br><span class="line">-C, --check            检查，并不执行</span><br><span class="line">-T, --timeout=TIMEOUT  执行命令的超时时间，默认10s</span><br><span class="line">-u, --user=REMOTE_USER 执行远程执行的用户</span><br><span class="line">-b, --become           代替旧版的sudo切换</span><br><span class="line"></span><br><span class="line">ansible的Host-pattern</span><br><span class="line">    匹配主机的列表</span><br><span class="line">    All ：表示所有Inventory中的所有主机</span><br><span class="line">        ansible all –m ping </span><br><span class="line">    *  :通配符</span><br><span class="line">        ansible &quot;*&quot; -m ping </span><br><span class="line">        ansible 192.168.1.* -m ping</span><br><span class="line">        ansible &quot;*srvs&quot;  -m ping</span><br><span class="line">    或关系</span><br><span class="line">        ansible &quot;websrvs:appsrvs&quot;  -m ping</span><br><span class="line">        ansible &quot;192.168.1.10:192.168.1.20&quot; -m ping</span><br><span class="line">    逻辑与</span><br><span class="line">        ansible &quot;websrvs:&amp;dbsrvs&quot; –m ping</span><br><span class="line">        在websrvs组并且在dbsrvs组中的主机</span><br><span class="line">    逻辑非</span><br><span class="line">        ansible &apos;websrvs:!dbsrvs&apos; –m ping</span><br><span class="line">        在websrvs组，但不在dbsrvs组中的主机</span><br><span class="line">    综合逻辑</span><br><span class="line">        ansible &apos;websrvs:dbsrvs:&amp;appsrvs:!ftpsrvs&apos; –m ping</span><br><span class="line">    正则表达式</span><br><span class="line">        ansible &quot;websrvs:&amp;dbsrvs&quot; –m ping</span><br><span class="line">        ansible &quot;~(web|db).*\.magedu\.com&quot; –m ping</span><br></pre></td></tr></table></figure><h3 id="ansible命令执行过程"><a href="#ansible命令执行过程" class="headerlink" title="ansible命令执行过程"></a>ansible命令执行过程</h3><p>ansible命令执行过程<code>ansible all -m command -a &#39;ls /root&#39;</code></p><ol><li>加载自己的配置文件默认<code>/etc/ansible/ansible.cfg</code></li><li>加载自己对应的模块文件，如command</li><li>通过ansible将模块或命令生成对应的临时py文件，并将该文件传输至远程服务器的对应执行用户<code>$HOME/.ansible/tmp/ansible-tmp-数字/XXX.PY文件</code></li><li>给文件+x执行</li><li>执行并返回结果</li><li>删除临时py文件，sleep 0退出</li></ol><p>执行状态：<br>绿色：执行成功并且不需要做改变的操作<br>黄色：执行成功并且对目标主机做变更<br>红色：执行失败</p><h4 id="ansible使用示例"><a href="#ansible使用示例" class="headerlink" title="ansible使用示例"></a>ansible使用示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">以wang用户执行ping存活检测</span><br><span class="line">ansible all -m ping -u wang -k</span><br><span class="line">以wang sudo至root执行ping存活检测</span><br><span class="line">ansible all -m ping -u wang –b -k</span><br><span class="line">以wangsudo至mage用户执行ping存活检测</span><br><span class="line">ansible all -m ping -u wang –b -k --become-user mage</span><br><span class="line">以wang sudo至root用户执行ls</span><br><span class="line">ansible all -m command -u wang--become-user=root -a &apos;ls/root&apos; -b –k -K</span><br></pre></td></tr></table></figure><h3 id="ansible常用模块"><a href="#ansible常用模块" class="headerlink" title="ansible常用模块"></a>ansible常用模块</h3><h4 id="Command：在远程主机执行命令，默认模块，可忽略-m选项"><a href="#Command：在远程主机执行命令，默认模块，可忽略-m选项" class="headerlink" title="Command：在远程主机执行命令，默认模块，可忽略-m选项"></a>Command：在远程主机执行命令，默认模块，可忽略-m选项</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">命令：</span><br><span class="line">chdir：    ＃运行该命令之前，切换到该目录。</span><br><span class="line">creates：  ＃一个文件当它已经存在时，这个步骤将不运行。</span><br><span class="line"></span><br><span class="line">ansible srvs -m command -a &apos;service vsftpd start&apos; </span><br><span class="line">ansible srvs -m command -a &apos;echo magedu |passwd --stdin wang&apos;   不成功此命令不支持$VARNAME &lt; &gt; | ;&amp; 等，用shell模块实现</span><br></pre></td></tr></table></figure><h4 id="Shell：和command相似，用shell执行命令"><a href="#Shell：和command相似，用shell执行命令" class="headerlink" title="Shell：和command相似，用shell执行命令"></a>Shell：和command相似，用shell执行命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m shell -a &apos;echo xxxxx |passwd –stdin wang&apos; </span><br><span class="line">调用bash执行命令类似cat /tmp/stanley.md | awk -F&apos;|&apos; &apos;&#123;print $1,$2&#125;&apos; &amp;&gt; /tmp/example.txt这些复杂命令，即使使用shell也可能会失败，解决办法：写到脚本时，copy到远程，执行，再把需要的结果拉回执行命令的机器</span><br><span class="line">[root@centos7 ~]#ansible all -m shell -a &apos;echo $HOSTNAME&apos;</span><br><span class="line">192.168.109.100 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">centos7.magedu.com</span><br><span class="line">192.168.109.2 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">centos7</span><br><span class="line">192.168.109.3 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">centos6.9</span><br></pre></td></tr></table></figure><h4 id="Script：运行脚本"><a href="#Script：运行脚本" class="headerlink" title="Script：运行脚本"></a>Script：运行脚本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f1.sh</span><br><span class="line">hostname</span><br><span class="line">date .... 定义了一些脚本等</span><br><span class="line"></span><br><span class="line">snsible websrvs -m script -a &apos;f1.sh&apos;</span><br></pre></td></tr></table></figure><h4 id="Copy-从服务器复制文件到客户端"><a href="#Copy-从服务器复制文件到客户端" class="headerlink" title="Copy:从服务器复制文件到客户端,"></a>Copy:从服务器复制文件到客户端,</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m copy -a &quot;src=/root/f1.sh dest=/tmp/f2.sh    owner=wang mode=600 backup=yes&quot; </span><br><span class="line">如目标存在，默认覆盖，此处指定先备份</span><br><span class="line"></span><br><span class="line">ansible srv -m copy -a &quot;content=&apos;test content\n&apos; dest=/tmp/f1.txt&quot; 利用内容，直接生成目标文件</span><br></pre></td></tr></table></figure><h4 id="cron：计划任务"><a href="#cron：计划任务" class="headerlink" title="cron：计划任务"></a>cron：计划任务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持时间：minute，hour，day，month，weekday</span><br><span class="line">ansible srv -m cron -a &quot;minute=*/5 job=&apos;/usr/bin/ntpdate 172.16.0.1 &amp;&gt;/dev/null&apos; name=Synctime&quot; 创建任务</span><br><span class="line">ansible srv -a &apos;crontab -l&apos; 查看任务</span><br><span class="line">ansible srv -m cron -a &apos;state=absent name=Synctime&apos;  删除任务</span><br><span class="line">计划任务目录路径 /var/spool/cron/root</span><br><span class="line">ansible srv -m cron -a &apos;disabled=yes job=&quot;/usr/bin/ntpdate 172.16.0.1 &amp;&gt;/dev/null&quot; name=Synctime&apos;</span><br><span class="line">disables=yes 前面加上注释 no的话取消注释</span><br></pre></td></tr></table></figure><h4 id="fetch-从客户端取文件至服务器端，copy相反，目录可先tar"><a href="#fetch-从客户端取文件至服务器端，copy相反，目录可先tar" class="headerlink" title="fetch:从客户端取文件至服务器端，copy相反，目录可先tar"></a>fetch:从客户端取文件至服务器端，copy相反，目录可先tar</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m fetch -a &apos;src=/root/a.sh dest=/data/scripts&apos;</span><br></pre></td></tr></table></figure><h4 id="file：设置文件属性"><a href="#file：设置文件属性" class="headerlink" title="file：设置文件属性"></a>file：设置文件属性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m file -a &quot;path=/root/a.sh state=touch owner=wang mode=755&quot; //创建空文件 并设置权限等</span><br><span class="line"></span><br><span class="line">ansible web -m file -a &apos;src=/app/testfile  dest=/app/testfile-link state=link&apos; //创建软连接</span><br></pre></td></tr></table></figure><h4 id="hostname：管理主机名"><a href="#hostname：管理主机名" class="headerlink" title="hostname：管理主机名"></a>hostname：管理主机名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible web -m hostname -a &quot;name=websrv&quot;</span><br></pre></td></tr></table></figure><h4 id="yum：管理包"><a href="#yum：管理包" class="headerlink" title="yum：管理包"></a>yum：管理包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m yum -a &apos;name=httpd state=latest&apos;  安装</span><br><span class="line">ansible srv -m yum -a &apos;name=httpd,tftp state=latest&apos;  安装多个</span><br><span class="line">ansible srv -m yum -a &apos;name=httpd state=latest update_cache=yes&apos;  </span><br><span class="line">update_cache=yes 相当于yum clean all</span><br><span class="line">ansible srv -m yum -a &apos;name=httpd state=absent&apos;  删除</span><br></pre></td></tr></table></figure><h4 id="service：管理服务"><a href="#service：管理服务" class="headerlink" title="service：管理服务"></a>service：管理服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m service -a &apos;name=httpd state=stopped enabled=yes&apos;关闭并且设置开机启动 不支持多个命令</span><br><span class="line">ansible srv -m service -a &apos;name=httpd state=started&apos;启动</span><br><span class="line">ansible srv –m service –a &apos;name=httpd state=reloaded&apos;</span><br><span class="line">ansible srv -m service -a &apos;name=httpd state=restarted&apos;重启</span><br></pre></td></tr></table></figure><h4 id="user：管理用户"><a href="#user：管理用户" class="headerlink" title="user：管理用户"></a>user：管理用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m user -a &apos;name=user1 comment=&quot;test user&quot; uid=2048 home=/app/user1 group=root&apos;创建普通用户</span><br><span class="line">ansible srv -m user -a &apos;name=sysuser1 system=yes home=/app/sysuser1 &apos;创建系统用户</span><br><span class="line">ansible srv -m user -a &apos;name=user1 state=absent remove=yes&apos; 删除用户及家目录等数据</span><br></pre></td></tr></table></figure><h4 id="Group：管理组"><a href="#Group：管理组" class="headerlink" title="Group：管理组"></a>Group：管理组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ansible srv -m group -a &quot;name=testgroup system=yes&quot;</span><br><span class="line">ansible srv -m group -a &quot;name=testgroup state=absent&quot;</span><br></pre></td></tr></table></figure><h3 id="ansible系列命令-1"><a href="#ansible系列命令-1" class="headerlink" title="ansible系列命令"></a>ansible系列命令</h3><h4 id="ansible-galaxy"><a href="#ansible-galaxy" class="headerlink" title="ansible-galaxy"></a>ansible-galaxy</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">连接https://galaxy.ansible.com 下载相应的roles</span><br><span class="line">中文 http://www.ansible.com.cn/index.html</span><br><span class="line"></span><br><span class="line">列出所有已安装的galaxy </span><br><span class="line">    ansible-galaxy list</span><br><span class="line">安装galaxy</span><br><span class="line">    ansible-galaxy install geerlingguy.redis</span><br><span class="line">删除galaxy</span><br><span class="line">    ansible-galaxy remove geerlingguy.redis</span><br></pre></td></tr></table></figure><h4 id="ansible-pull"><a href="#ansible-pull" class="headerlink" title="ansible-pull"></a>ansible-pull</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ansible-pull</span><br><span class="line">推送命令至远程，效率无限提升，对运维要求较高</span><br></pre></td></tr></table></figure><h4 id="Ansible-playbook"><a href="#Ansible-playbook" class="headerlink" title="Ansible-playbook"></a>Ansible-playbook</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook hello.yml</span><br><span class="line">例子：</span><br><span class="line">vim hello.yml</span><br><span class="line">- hosts: test</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">  - name: hello world </span><br><span class="line">    command: wall &quot;hello world&quot;</span><br></pre></td></tr></table></figure><h4 id="Ansible-vault"><a href="#Ansible-vault" class="headerlink" title="Ansible-vault"></a>Ansible-vault</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">功能：管理加密解密yml文件</span><br><span class="line">    ansible-vault [create|decrypt|edit|encrypt|rekey|view]</span><br><span class="line">    ansible-vault encrypt hello.yml 加密</span><br><span class="line">    ansible-vault decrypt hello.yml 解密</span><br><span class="line">    ansible-vault view hello.yml 查看</span><br><span class="line">    ansible-vault edit hello.yml 编辑加密文件</span><br><span class="line">    ansible-vault rekey hello.yml 修改口令</span><br><span class="line">    ansible-vault create new.yml 创建新文件</span><br></pre></td></tr></table></figure><h4 id="Ansible-console"><a href="#Ansible-console" class="headerlink" title="Ansible-console"></a>Ansible-console</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Ansible-console：2.0+新增，可交互执行命令，支持tab</span><br><span class="line">    root@test(2)[f:10] $</span><br><span class="line">        执行用户@当前操作的主机组(当前组的主机数量)[f:并发数]$</span><br><span class="line">    设置并发数：forks n  例如：forks 10</span><br><span class="line">    切换组：cd 主机组例如：cd web</span><br><span class="line">    列出当前组主机列表：list</span><br><span class="line">    列出所有的内置命令：?或help</span><br><span class="line">示例：</span><br><span class="line">root@all (2)[f:5]$ list</span><br><span class="line">root@all (2)[f:5]$ cd appsrvs</span><br><span class="line">root@appsrvs (2)[f:5]$ list </span><br><span class="line">root@appsrvs(2)[f:5]$ yum name=httpd state=present</span><br><span class="line">root@appsrvs(2)[f:5]$ service name=httpd state=started</span><br></pre></td></tr></table></figure><h3 id="playbook"><a href="#playbook" class="headerlink" title="playbook"></a>playbook</h3><ul><li>playbook是由一个或多个“play”组成的列表</li><li>play的主要功能在于将事先归并为一组的主机装扮成事先通过ansible中的task定义好的角色。从根本上来讲，所谓task无非是调用ansible的一个module。将多个play组织在一个playbook中，即可以让它们联同起来按事先编排的机制同唱一台大戏</li><li>Playbook采用YAML语言编写</li></ul><p><center><img src="http://zhangqifei.top/picture/ansible/6.png" alt="playbook"></center></p><h4 id="YAML介绍"><a href="#YAML介绍" class="headerlink" title="YAML介绍"></a>YAML介绍</h4><ul><li>YAML是一个可读性高的用来表达资料序列的格式。YAML参考了其他多种语言，包括：XML、C语言、Python、Perl以及电子邮件格式RFC2822等。Clark Evans在2001年在首次发表了这种语言，另外IngydötNet与Oren Ben-Kiki也是这语言的共同设计者</li><li>YAML Ain’tMarkup Language，即YAML不是XML。不过，在开发的这种语言时，YAML的意思其实是：”Yet Another Markup Language”（仍是一种标记语言）</li><li>特性<ul><li>YAML的可读性好</li><li>YAML和脚本语言的交互性好</li><li>YAML使用实现语言的数据类型</li><li>YAML有一个一致的信息模型</li><li>YAML易于实现</li><li>YAML可以基于流来处理</li><li>YAML表达能力强，扩展性好</li></ul></li></ul><p>更多的内容及规范参见<a href="http://www.yaml.org" target="_blank" rel="noopener">http://www.yaml.org</a></p><h4 id="YAML语法简介"><a href="#YAML语法简介" class="headerlink" title="YAML语法简介"></a>YAML语法简介</h4><ul><li>在单一档案中，可用连续三个连字号(——)区分多个档案。另外，还有选择性的连续三个点号( … )用来表示档案结尾</li><li>次行开始正常写Playbook的内容，一般建议写明该Playbook的功能</li><li>使用#号注释代码</li><li>缩进必须是统一的，不能空格和tab混用</li><li>缩进的级别也必须是一致的，同样的缩进代表同样的级别，程序判别配置的级别是通过缩进结合换行来实现的</li><li>YAML文件内容和Linux系统大小写判断方式保持一致，是区别大小写的，k/v的值均需大小写敏感</li><li>k/v的值可同行写也可换行写。同行使用:分隔</li><li>v可是个字符串，也可是另一个列表一个完整的代码块功能需最少元素需包括name: task</li><li>一个name只能包括一个task</li><li>YAML文件扩展名通常为yml或yaml</li></ul><h5 id="YAML语法简介-1"><a href="#YAML语法简介-1" class="headerlink" title="YAML语法简介"></a>YAML语法简介</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Dictionary：字典，通常由多个key与value构成</span><br><span class="line">示例：</span><br><span class="line">---</span><br><span class="line"># An employee record</span><br><span class="line">name: Example Developer</span><br><span class="line">job: Developers</span><br><span class="line">kill: Elite</span><br><span class="line">也可以将key:value放置于&#123;&#125;中进行表示，用,分隔多个key:value</span><br><span class="line">示例：</span><br><span class="line">---</span><br><span class="line"># An employee record</span><br><span class="line">&#123;name: Example Developer, job: Developer, skill: Elite&#125;</span><br></pre></td></tr></table></figure><h3 id="YAML语法"><a href="#YAML语法" class="headerlink" title="YAML语法"></a>YAML语法</h3><p>YAML的语法和其他高阶语言类似，并且可以简单表达清单、散列表、标量等数据结构。其结构（Structure）通过空格来展示，序列（Sequence）里的项用”-“来代表，Map里的键值对用”:”分隔<br>示例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">name: John Smith</span><br><span class="line">age: 41</span><br><span class="line">gender: Male</span><br><span class="line">spouse:</span><br><span class="line">  name: Jane Smith</span><br><span class="line">  age: 37</span><br><span class="line">  gender: Female</span><br><span class="line">children:</span><br><span class="line">  - name: Jimmy Smith</span><br><span class="line">    age: 17</span><br><span class="line">    gender: Male</span><br><span class="line">  - name: Jenny Smith</span><br><span class="line">    age 13</span><br><span class="line">    gender: Female</span><br></pre></td></tr></table></figure></p><h3 id="Playbook核心元素"><a href="#Playbook核心元素" class="headerlink" title="Playbook核心元素"></a>Playbook核心元素</h3><ul><li>Hosts      执行的远程主机列表</li><li>Tasks      任务集</li><li>Varniables 内置变量或自定义变量在playbook中调用</li><li>Templates  模板，可替换模板文件中的变量并实现一些简单逻辑的文件</li><li>Handlers   和notity结合使用，由特定条件触发的操作，满足条件方才执行，否则不执行</li><li>tags       标签指定某条任务执行，用于选择运行playbook中的部分代码。ansible具有幂等性，因此会自动跳过没有变化的部分，即便如此，有些代码为测试其确实没有发生变化的时间依然会非常地长。此时，如果确信其没有变化，就可以通过tags跳过此些代码片断<code>ansible-playbook –t tagsname useradd.yml</code><br>示例:安装httpd 并且开机启动<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim test1.yml</span><br><span class="line">- hosts: web</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">    - name: install package</span><br><span class="line">      yum: name=httpd start=present</span><br><span class="line">    - name: start service</span><br><span class="line">      service: name=httpd state=started enabled=yes</span><br><span class="line">      </span><br><span class="line">ansible-playbook test1.yml 执行</span><br></pre></td></tr></table></figure></li></ul><h5 id="playbook基础组件"><a href="#playbook基础组件" class="headerlink" title="playbook基础组件"></a>playbook基础组件</h5><ul><li>Hosts：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">playbook中的每一个play的目的都是为了让某个或某些主机以某个指定的用户身份执行任务。hosts用于指定要执行指定任务的主机，须事先定义在主机清单中</span><br><span class="line">可以是如下形式：</span><br><span class="line">one.example.com</span><br><span class="line">one.example.com:two.example.com</span><br><span class="line">192.168.1.50</span><br><span class="line">192.168.1.*</span><br><span class="line"></span><br><span class="line">Websrvs:dbsrvs两个组的并集</span><br><span class="line">Websrvs:&amp;dbsrvs两个组的交集</span><br><span class="line">webservers:!phoenix  在websrvs组，但不在dbsrvs组</span><br><span class="line">示例:-hosts: websrvs：dbsrvs</span><br></pre></td></tr></table></figure><ul><li>remote_user: </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">可用于Host和task中。也可以通过指定其通过sudo的方式在远程主机上执行任务，其可用于play全局或某任务；此外，甚至可以在sudo时使用sudo_user指定sudo时切换的用户</span><br><span class="line">- hosts: websrvs</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">    -name: test connection</span><br><span class="line">    ping: </span><br><span class="line">    remote_user: magedu</span><br><span class="line">    sudo: yes       默认sudo为root</span><br><span class="line">    sudo_user:wang  sudo为wang</span><br></pre></td></tr></table></figure><ul><li>task列表和action</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">play的主体部分是task list。task list中的各任务按次序逐个在hosts中指定的所有主机上执行，即在所有主机上完成第一个任务后再开始第二个。在运行自下而下某playbook时，如果中途发生错误，所有已执行任务都将回滚，因此，在更正playbook后重新执行一次即可</span><br><span class="line"></span><br><span class="line">task的目的是使用指定的参数执行模块，而在模块参数中可以使用变量。模块执行是幂等的，这意味着多次执行是安全的，因为其结果均一致</span><br><span class="line"></span><br><span class="line">每个task都应该有其name，用于playbook的执行结果输出，建议其内容尽可能清晰地描述任务执行步骤。如果未提供name，则action的结果将用于输出</span><br></pre></td></tr></table></figure><ul><li>tasks：任务列表<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">格式：</span><br><span class="line">    (1) action: module arguments</span><br><span class="line">    (2) module: arguments 建议使用</span><br><span class="line">    注意：shell和command模块后面跟命令，而非key=value</span><br><span class="line">某任务的状态在运行后为changed时，可通过“notify&quot;通知给相应的handlers</span><br><span class="line">任务可以通过&quot;tags&quot;打标签，而后可在ansible-playbook命令上使用-t指定进行调用</span><br><span class="line">示例：</span><br><span class="line">tasks:</span><br><span class="line">  - name: disable selinux</span><br><span class="line">    command: /sbin/setenforce 0</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">如果命令或脚本的退出码不为零，可以使用如下方式替代</span><br><span class="line">tasks:</span><br><span class="line">  - name: run this command and ignore the result</span><br><span class="line">    shell: /usr/bin/somecommand|| /bin/true</span><br><span class="line"></span><br><span class="line">或者使用ignore_errors来忽略错误信息：</span><br><span class="line">tasks:</span><br><span class="line">  - name: run this command and ignore the result</span><br><span class="line">    shell: /usr/bin/somecommand</span><br><span class="line">    ignore_errors: True</span><br><span class="line">    </span><br><span class="line">运行playbook的方式</span><br><span class="line">    ansible-playbook &lt;filename.yml&gt; ... [options]</span><br><span class="line">常见选项</span><br><span class="line">    --check 只检测可能会发生的改变，但不真正执行操作</span><br><span class="line">    --list-hosts 列出运行任务的主机</span><br><span class="line">    --limit 主机列表只针对主机列表中的主机执行</span><br><span class="line">    -v 显示过程-vv-vvv更详细</span><br><span class="line">示例</span><br><span class="line">    ansible-playbook  file.yml --check 只检测</span><br><span class="line">    ansible-playbook  file.yml </span><br><span class="line">    ansible-playbook  file.yml --limit websrvs</span><br></pre></td></tr></table></figure><h4 id="Playbook-VS-ShellScripts"><a href="#Playbook-VS-ShellScripts" class="headerlink" title="Playbook VS ShellScripts"></a>Playbook VS ShellScripts</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">SHELL脚本</span><br><span class="line">#!/bin/bash</span><br><span class="line"># 安装Apache</span><br><span class="line">yum install --quiet -y httpd</span><br><span class="line"># 复制配置文件</span><br><span class="line">cp /path/to/config/httpd.conf /etc/httpd/conf/httpd.conf</span><br><span class="line">cp /path/to/httpd-vhosts.conf /etc/httpd/conf/httpd-vhosts.conf</span><br><span class="line"># 启动Apache，并设置开机启动</span><br><span class="line">service httpd start </span><br><span class="line">chkconfig httpd on</span><br><span class="line"></span><br><span class="line">Playbook定义</span><br><span class="line">---</span><br><span class="line">  - hosts: all</span><br><span class="line">    tasks: </span><br><span class="line">      - name: &quot;安装Apache&quot;</span><br><span class="line">        command: yum install -q -y httpd</span><br><span class="line">      - name: &quot;复制配置文件&quot;</span><br><span class="line">        command: cp /tmp/httpd.conf/ etc/httpd/conf/httpd.conf</span><br><span class="line">        command: cp /tmp/httpd-vhosts.conf/ etc/httpd/conf/httpd-vhosts.conf</span><br><span class="line">      - name: &quot;启动Apache，并设置开机启动&quot;</span><br><span class="line">        service: name=httpd state=started enabled=yes</span><br></pre></td></tr></table></figure><h5 id="示例system-yml："><a href="#示例system-yml：" class="headerlink" title="示例system.yml："></a>示例system.yml：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---</span><br><span class="line">  - hosts: allre</span><br><span class="line">    mote_user: root</span><br><span class="line">    </span><br><span class="line">    tasks:</span><br><span class="line">      - name: create mysql user</span><br><span class="line">        user: name=mysql system=yes uid=36</span><br><span class="line">      - name: create a group </span><br><span class="line">        group: name=httpd system=yes</span><br></pre></td></tr></table></figure><h4 id="Playbook示例"><a href="#Playbook示例" class="headerlink" title="Playbook示例"></a>Playbook示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：httpd.yml</span><br><span class="line"></span><br><span class="line">- hosts: websrvs</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">    - name: Install httpd</span><br><span class="line">      yum: name=httpd state=present</span><br><span class="line">    - name: Install configure file</span><br><span class="line">      copy: src=files/httpd.conf dest=/etc/httpd/conf/</span><br><span class="line">    - name: start service</span><br><span class="line">      service: name=httpd state=started enabled=yes</span><br></pre></td></tr></table></figure><h4 id="handlers和notify结合使用触发条件"><a href="#handlers和notify结合使用触发条件" class="headerlink" title="handlers和notify结合使用触发条件"></a>handlers和notify结合使用触发条件</h4><ul><li>Handlers</li><li>是task列表，这些task与前述的task并没有本质上的不同,用于当关注的资源发生变化时，才会采取一定的操作</li><li>notify这个action可用于在每个play的最后被触发，这样可以避免多次有改变发生时每次都执行指定的操作，仅在所有的变化发生完成后一次性地执行指定操作。在notify中列出的操作称为handler，也即notify中调用handler中定义的操作</li></ul><h4 id="Playbook中handlers使用"><a href="#Playbook中handlers使用" class="headerlink" title="Playbook中handlers使用"></a>Playbook中handlers使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- hosts:websrvs</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">    - name: Install httpd </span><br><span class="line">      yum: name=httpd state=present</span><br><span class="line">    - name: Install configure file</span><br><span class="line">      copy: src=files/httpd.conf dest=/etc/httpd/conf/</span><br><span class="line">      notify: restart httpd</span><br><span class="line">    - name: ensure apache is running</span><br><span class="line">      service: name=httpd state=started enabled=yes</span><br><span class="line">    </span><br><span class="line">    handlers:</span><br><span class="line">      - name: restart httpd</span><br><span class="line">        service: name=httpd status=restarted</span><br></pre></td></tr></table></figure><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- hosts: websrvs</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">    - name: add group nginx</span><br><span class="line">      tags: user</span><br><span class="line">      user: name=nginx state=present</span><br><span class="line">    - name: add user nginx</span><br><span class="line">      user: name=nginx state=present group=nginx</span><br><span class="line">    - name: Install Nginx</span><br><span class="line">      yum: name=nginx state=present</span><br><span class="line">    - name: config </span><br><span class="line">      copy: src=/root/config.txt dest=/etc/nginx/nginx.conf</span><br><span class="line">      notify:</span><br><span class="line">        - Restart Nginx</span><br><span class="line">        - Check Nginx Process</span><br><span class="line">    </span><br><span class="line">    handlers:</span><br><span class="line">      - name: Restart Nginx</span><br><span class="line">        service: name=nginx state=restarted enabled=yes</span><br><span class="line">      - name: Check Nginx process</span><br><span class="line">        shell:  killall -0 nginx &gt; /tmp/nginx.log</span><br></pre></td></tr></table></figure></p><h4 id="Playbook中tags使用"><a href="#Playbook中tags使用" class="headerlink" title="Playbook中tags使用"></a>Playbook中tags使用</h4><p>示例：httpd.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- hosts: websrvs</span><br><span class="line">  remote_user: root</span><br><span class="line">  </span><br><span class="line">  tasks:</span><br><span class="line">    - name: Install httpd</span><br><span class="line">      yum: name=httpd state=present</span><br><span class="line">    - name: Install configure file</span><br><span class="line">      copy: src=files/httpd.conf dest=/etc/httpd/conf/</span><br><span class="line">      tags: conf</span><br><span class="line">    - name: start httpd service</span><br><span class="line">      tags: service</span><br><span class="line">      service: name=httpd state=started enabled=yes </span><br><span class="line">      </span><br><span class="line">ansible-playbook –t conf httpd.yml</span><br><span class="line">    -t //--tags</span><br></pre></td></tr></table></figure></p><h6 id="综合实例：安装httpd-并且启动端口是8080"><a href="#综合实例：安装httpd-并且启动端口是8080" class="headerlink" title="综合实例：安装httpd 并且启动端口是8080"></a>综合实例：安装httpd 并且启动端口是8080</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">本机先安装httpd 把httpd配置文件 /etc/httpd/conf/httpd.conf 里面端口改为8080</span><br><span class="line"></span><br><span class="line">[root@centos7 app]#cat httpd.yml </span><br><span class="line">---</span><br><span class="line">- hosts: web</span><br><span class="line">  remote_user: root</span><br><span class="line"></span><br><span class="line">  tasks:</span><br><span class="line">    - name: install httpd</span><br><span class="line">      yum: name=httpd</span><br><span class="line">    - name: copy config file</span><br><span class="line">      copy: src=/app/httpd.conf dest=/etc/httpd/conf/</span><br><span class="line">    - name: start httpd</span><br><span class="line">      service: name=httpd state=started enabled=yes</span><br><span class="line">      </span><br><span class="line">[root@centos7 app]#ansible-playbook httpd.yml</span><br><span class="line">现在把端口改为80</span><br><span class="line">[root@centos7 app]#cat httpd.yml </span><br><span class="line">---</span><br><span class="line">- hosts: web</span><br><span class="line">  remote_user: root</span><br><span class="line"></span><br><span class="line">  tasks:</span><br><span class="line">    - name: install httpd</span><br><span class="line">      yum: name=httpd</span><br><span class="line">    - name: copy config file</span><br><span class="line">      copy: src=/app/httpd.conf dest=/etc/httpd/conf/</span><br><span class="line">      notify: restart httpd</span><br><span class="line">    - name: start httpd</span><br><span class="line">      service: name=httpd state=started enabled=yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  handlers:</span><br><span class="line">    - name: restart httpd</span><br><span class="line">      service: name=httpd state=restarted</span><br><span class="line">[root@centos7 app]#ansible-playbook --limit 192.18.109.1  httpd.yml 只针对这一台机器</span><br><span class="line"></span><br><span class="line">[root@centos7 app]#ansible web -m shell -a &apos;ss -ntl|grep 80&apos;</span><br><span class="line">192.168.109.100 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">LISTEN     0      128         :::80                      :::*                 </span><br><span class="line">192.168.109.2 | SUCCESS | rc=0 &gt;&gt;</span><br><span class="line">LISTEN     0      128         :::80                      :::*</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;基本概念&quot;&gt;&lt;a href=&quot;#基本概念&quot; class=&quot;headerlink&quot; title=&quot;基本概念&quot;&gt;&lt;/a&gt;基本概念&lt;/h3&gt;&lt;p&gt;ansible是一个基于python开发的轻量级自动化运维管理工具，可以用来批量执行命令，安装程序，支持playbook编排
      
    
    </summary>
    
      <category term="运维自动化工具" scheme="https://www.zhangqifei.top/categories/%E8%BF%90%E7%BB%B4%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="ansible" scheme="https://www.zhangqifei.top/tags/ansible/"/>
    
  </entry>
  
</feed>
