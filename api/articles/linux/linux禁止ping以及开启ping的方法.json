{"title":"linux禁止ping以及开启ping的方法","slug":"linux/linux禁止ping以及开启ping的方法","date":"2016-03-06T01:42:22.000Z","updated":"2018-04-12T04:45:08.671Z","comments":true,"path":"api/articles/linux/linux禁止ping以及开启ping的方法.json","excerpt":"Linux默认是允许Ping响应的，系统是否允许Ping由2个因素决定的：A、内核参数，B、防火墙，需要2个因素同时允许才能允许Ping，2个因素有任意一个禁Ping就无法Ping。<br>A、内核参数<br>1<br>2<br>[root@centos7 ~]# cat /proc/sys/net/ipv4/icmp_echo_ignore_all <br>0 //（0表示允许，1表示禁止）。<br>","covers":null,"content":"<p>Linux默认是允许Ping响应的，系统是否允许Ping由2个因素决定的：<strong>A、内核参数</strong>，<strong>B、防火墙</strong>，需要2个因素同时允许才能允许Ping，2个因素有任意一个禁Ping就无法Ping。<br>A、内核参数<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@centos7 ~]# cat /proc/sys/net/ipv4/icmp_echo_ignore_all </span><br><span class=\"line\">0 //（0表示允许，1表示禁止）。</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>B、防火墙（注：此处的方法的前提是内核配置是默认值，也就是没有禁止Ping）<br>这里以Iptables防火墙为例，其他防火墙操作方法可参考防火墙的官方文档。</p>\n<p>允许PING设置<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT</span><br><span class=\"line\">iptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT</span><br><span class=\"line\">或者也可以临时停止防火墙操作的。</span><br><span class=\"line\">service iptables stop</span><br></pre></td></tr></table></figure></p>\n<p>禁止PING设置</p>\n<pre><code>[root@centos7 ~]# iptables -A INPUT -p icmp --icmp-type 8 -s 0/0 -j DROP\n</code></pre>","more":"<p>B、防火墙（注：此处的方法的前提是内核配置是默认值，也就是没有禁止Ping）<br>这里以Iptables防火墙为例，其他防火墙操作方法可参考防火墙的官方文档。</p>\n<p>允许PING设置<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT</span><br><span class=\"line\">iptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT</span><br><span class=\"line\">或者也可以临时停止防火墙操作的。</span><br><span class=\"line\">service iptables stop</span><br></pre></td></tr></table></figure></p>\n<p>禁止PING设置</p>\n<pre><code>[root@centos7 ~]# iptables -A INPUT -p icmp --icmp-type 8 -s 0/0 -j DROP\n</code></pre>","categories":[{"name":"linux","path":"api/categories/linux.json"}],"tags":[{"name":"ping","path":"api/tags/ping.json"}]}