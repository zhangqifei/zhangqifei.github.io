{"title":"CentOS 6.x和CentOS 7.x的区别?","slug":"linux/CentOS 6.x和CentOS 7.x的区别","date":"2018-05-06T18:00:04.000Z","updated":"2018-05-06T18:28:28.388Z","comments":true,"path":"api/articles/linux/CentOS 6.x和CentOS 7.x的区别.json","excerpt":"系统初始化技术演变——开机启动流程CentOS 6：采用了INIT技术，整个开机过程是自检BIOS——MBR引导——GRUB加载——加载内核——启动INIT进程——读取INITTAB配置文件，根据配置文件指定的模式按顺序来启动进程服务。INIT技术让启动流程很清晰，依赖SHELL脚本。因为启动进程时是按顺序一个一个启动，所以速度慢，会因为某个服务卡住而影响系统的启动。CentOS 7：采用了systemd技术。这是替代INIT的新技术，采用了并行方式来启动进程，所以启动速度更快，并且兼容INIT的命令以降低迁移成本。PS：通过ps命令查看PID为1的进程可以得知当前系统所采用的技术<br>","covers":null,"content":"<h3 id=\"系统初始化技术演变——开机启动流程\"><a href=\"#系统初始化技术演变——开机启动流程\" class=\"headerlink\" title=\"系统初始化技术演变——开机启动流程\"></a>系统初始化技术演变——开机启动流程</h3><p>CentOS 6：采用了<code>INIT</code>技术，整个开机过程是自检BIOS——MBR引导——GRUB加载——加载内核——启动INIT进程——读取INITTAB配置文件，根据配置文件指定的模式按顺序来启动进程服务。INIT技术让启动流程很清晰，依赖SHELL脚本。因为启动进程时是按顺序一个一个启动，所以速度慢，会因为某个服务卡住而影响系统的启动。</p>\n<p>CentOS 7：采用了<code>systemd</code>技术。这是替代INIT的新技术，采用了并行方式来启动进程，所以启动速度更快，并且兼容INIT的命令以降低迁移成本。</p>\n<blockquote>\n<p>PS：通过ps命令查看PID为1的进程可以得知当前系统所采用的技术<br><a id=\"more\"></a></p>\n</blockquote>\n<h3 id=\"桌面系统\"><a href=\"#桌面系统\" class=\"headerlink\" title=\"桌面系统\"></a>桌面系统</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] GNOME 2.x</span><br><span class=\"line\">[CentOS7] GNOME 3.x（GNOME Shell）</span><br></pre></td></tr></table></figure>\n<h3 id=\"文件系统\"><a href=\"#文件系统\" class=\"headerlink\" title=\"文件系统\"></a>文件系统</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] ext4</span><br><span class=\"line\">[CentOS7] xfs</span><br></pre></td></tr></table></figure>\n<h3 id=\"内核版本\"><a href=\"#内核版本\" class=\"headerlink\" title=\"内核版本\"></a>内核版本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] 2.6.x-x</span><br><span class=\"line\">[CentOS7] 3.10.x-x</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动加载器\"><a href=\"#启动加载器\" class=\"headerlink\" title=\"启动加载器\"></a>启动加载器</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] GRUB Legacy (+efibootmgr)</span><br><span class=\"line\">[CentOS7] GRUB2</span><br></pre></td></tr></table></figure>\n<h3 id=\"防火墙\"><a href=\"#防火墙\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] iptables</span><br><span class=\"line\">[CentOS7] firewalld</span><br></pre></td></tr></table></figure>\n<h3 id=\"默认数据库\"><a href=\"#默认数据库\" class=\"headerlink\" title=\"默认数据库\"></a>默认数据库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] MySQL</span><br><span class=\"line\">[CentOS7] MariaDB</span><br></pre></td></tr></table></figure>\n<h3 id=\"文件结构\"><a href=\"#文件结构\" class=\"headerlink\" title=\"文件结构\"></a>文件结构</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] /bin, /sbin, /lib, and /lib64在/下</span><br><span class=\"line\">[CentOS7] /bin, /sbin, /lib, and /lib64移到/usr下</span><br></pre></td></tr></table></figure>\n<h3 id=\"主机名\"><a href=\"#主机名\" class=\"headerlink\" title=\"主机名\"></a>主机名</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] /etc/sysconfig/network</span><br><span class=\"line\">[CentOS7] /etc/hostname</span><br></pre></td></tr></table></figure>\n<h3 id=\"时间同步\"><a href=\"#时间同步\" class=\"headerlink\" title=\"时间同步\"></a>时间同步</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ ntp</span><br><span class=\"line\">$ ntpq -p</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ chrony</span><br><span class=\"line\">$ chronyc sources</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改时间\"><a href=\"#修改时间\" class=\"headerlink\" title=\"修改时间\"></a>修改时间</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ vim /etc/sysconfig/clock</span><br><span class=\"line\">   ZONE=&quot;Asia/Tokyo&quot;</span><br><span class=\"line\">   UTC=fales</span><br><span class=\"line\">$ sudo ln -s /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ timedatectl set-timezone Asia/Tokyo</span><br><span class=\"line\">$ timedatectl status</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改地区\"><a href=\"#修改地区\" class=\"headerlink\" title=\"修改地区\"></a>修改地区</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ vim /etc/sysconfig/i18n</span><br><span class=\"line\">   LANG=&quot;ja_JP.utf8&quot;</span><br><span class=\"line\">$ /etc/sysconfig/i18n</span><br><span class=\"line\">$ locale</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ localectl set-locale LANG=ja_JP.utf8</span><br><span class=\"line\">$ localectl status</span><br></pre></td></tr></table></figure>\n<h3 id=\"服务相关\"><a href=\"#服务相关\" class=\"headerlink\" title=\"服务相关\"></a>服务相关</h3><h4 id=\"启动停止\"><a href=\"#启动停止\" class=\"headerlink\" title=\"启动停止\"></a>启动停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ service service_name start</span><br><span class=\"line\">$ service service_name stop</span><br><span class=\"line\">$ service sshd restart/status/reload</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl start service_name</span><br><span class=\"line\">$ systemctl stop service_name</span><br><span class=\"line\">$ systemctl restart/status/reload sshd</span><br></pre></td></tr></table></figure>\n<h4 id=\"自启动\"><a href=\"#自启动\" class=\"headerlink\" title=\"自启动\"></a>自启动</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ chkconfig service_name on/off</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl enable service_name</span><br><span class=\"line\">$ systemctl disable service_name</span><br></pre></td></tr></table></figure>\n<h4 id=\"服务一览\"><a href=\"#服务一览\" class=\"headerlink\" title=\"服务一览\"></a>服务一览</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ chkconfig --list</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl list-unit-files</span><br><span class=\"line\">$ systemctl --type service</span><br></pre></td></tr></table></figure>\n<h4 id=\"强制停止\"><a href=\"#强制停止\" class=\"headerlink\" title=\"强制停止\"></a>强制停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ kill -9 &lt;PID&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl kill --signal=9 sshd</span><br></pre></td></tr></table></figure>\n<h3 id=\"网络\"><a href=\"#网络\" class=\"headerlink\" title=\"网络\"></a>网络</h3><h4 id=\"网络信息\"><a href=\"#网络信息\" class=\"headerlink\" title=\"网络信息\"></a>网络信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ netstat</span><br><span class=\"line\">$ netstat -I</span><br><span class=\"line\">$ netstat -n</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ ip n</span><br><span class=\"line\">$ ip -s l</span><br><span class=\"line\">$ ss</span><br></pre></td></tr></table></figure>\n<h4 id=\"IP地址MAC地址\"><a href=\"#IP地址MAC地址\" class=\"headerlink\" title=\"IP地址MAC地址\"></a>IP地址MAC地址</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ ifconfig -a</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ ip address show</span><br></pre></td></tr></table></figure>\n<h4 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ route -n</span><br><span class=\"line\">$ route -A inet6 -n</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ ip route show</span><br><span class=\"line\">$ ip -6 route show</span><br></pre></td></tr></table></figure>\n<h3 id=\"yum\"><a href=\"#yum\" class=\"headerlink\" title=\"yum\"></a>yum</h3><p>yum源上的优化<br>在centos6的时候，默认是从官方源下载rpm包的，由于是国外的yum源很慢不能用，CentOS7在这里做了优化，当我们使用yum安装软件的时候，默认不会再从官方下载，而是自动寻找离自己地理位置最近的yum源开始下载。</p>\n<h3 id=\"重启关闭与启动级别\"><a href=\"#重启关闭与启动级别\" class=\"headerlink\" title=\"重启关闭与启动级别\"></a>重启关闭与启动级别</h3><h4 id=\"关闭\"><a href=\"#关闭\" class=\"headerlink\" title=\"关闭\"></a>关闭</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ shutdown -h now </span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ poweroff</span><br><span class=\"line\">$ systemctl poweroff</span><br></pre></td></tr></table></figure>\n<h4 id=\"重启\"><a href=\"#重启\" class=\"headerlink\" title=\"重启\"></a>重启</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ reboot</span><br><span class=\"line\">$ shutdown -r now</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ reboot</span><br><span class=\"line\">$ systemctl reboot</span><br></pre></td></tr></table></figure>\n<h4 id=\"单用户模式\"><a href=\"#单用户模式\" class=\"headerlink\" title=\"单用户模式\"></a>单用户模式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ init 3</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl rescue</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动模式\"><a href=\"#启动模式\" class=\"headerlink\" title=\"启动模式\"></a>启动模式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">[GUICUI]</span><br><span class=\"line\">$ vim /etc/inittab</span><br><span class=\"line\">  id:3:initdefault:</span><br><span class=\"line\">[CUIGUI]</span><br><span class=\"line\">$ startx</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">[GUICUI]</span><br><span class=\"line\">$ systemctl isolate multi-user.target</span><br><span class=\"line\">[CUIGUI]</span><br><span class=\"line\">$systemctl isolate graphical.target</span><br></pre></td></tr></table></figure>\n<h4 id=\"默认\"><a href=\"#默认\" class=\"headerlink\" title=\"默认\"></a>默认</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ systemctl set-default graphical.target</span><br><span class=\"line\">$ systemctl set-default multi-user.target</span><br></pre></td></tr></table></figure>\n<h4 id=\"当前\"><a href=\"#当前\" class=\"headerlink\" title=\"当前\"></a>当前</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ systemctl get-default</span><br></pre></td></tr></table></figure>\n<h3 id=\"运行级别runlevel\"><a href=\"#运行级别runlevel\" class=\"headerlink\" title=\"运行级别runlevel\"></a>运行级别runlevel</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/inittab 是无效的 system target 替代</span><br><span class=\"line\">永久生效下次登录生效</span><br><span class=\"line\">systemctl get-default graphical.target 切换到5</span><br><span class=\"line\">systemctl get-default multi-user.target 切换到3</span><br><span class=\"line\"></span><br><span class=\"line\">临时生效的话 </span><br><span class=\"line\">init3</span><br><span class=\"line\"></span><br><span class=\"line\">只有五种运行级别</span><br><span class=\"line\">[root@centos7 ~]# ls -lh /usr/lib/systemd/system/runlevel*.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 15 Apr 20 22:31 /usr/lib/systemd/system/runlevel0.target -&gt; poweroff.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 13 Apr 20 22:31 /usr/lib/systemd/system/runlevel1.target -&gt; rescue.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 17 Apr 20 22:31 /usr/lib/systemd/system/runlevel2.target -&gt; multi-user.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 17 Apr 20 22:31 /usr/lib/systemd/system/runlevel3.target -&gt; multi-user.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 17 Apr 20 22:31 /usr/lib/systemd/system/runlevel4.target -&gt; multi-user.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 16 Apr 20 22:31 /usr/lib/systemd/system/runlevel5.target -&gt; graphical.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 13 Apr 20 22:31 /usr/lib/systemd/system/runlevel6.target -&gt; reboot.target</span><br></pre></td></tr></table></figure>","more":"</p>\n</blockquote>\n<h3 id=\"桌面系统\"><a href=\"#桌面系统\" class=\"headerlink\" title=\"桌面系统\"></a>桌面系统</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] GNOME 2.x</span><br><span class=\"line\">[CentOS7] GNOME 3.x（GNOME Shell）</span><br></pre></td></tr></table></figure>\n<h3 id=\"文件系统\"><a href=\"#文件系统\" class=\"headerlink\" title=\"文件系统\"></a>文件系统</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] ext4</span><br><span class=\"line\">[CentOS7] xfs</span><br></pre></td></tr></table></figure>\n<h3 id=\"内核版本\"><a href=\"#内核版本\" class=\"headerlink\" title=\"内核版本\"></a>内核版本</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] 2.6.x-x</span><br><span class=\"line\">[CentOS7] 3.10.x-x</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动加载器\"><a href=\"#启动加载器\" class=\"headerlink\" title=\"启动加载器\"></a>启动加载器</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] GRUB Legacy (+efibootmgr)</span><br><span class=\"line\">[CentOS7] GRUB2</span><br></pre></td></tr></table></figure>\n<h3 id=\"防火墙\"><a href=\"#防火墙\" class=\"headerlink\" title=\"防火墙\"></a>防火墙</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] iptables</span><br><span class=\"line\">[CentOS7] firewalld</span><br></pre></td></tr></table></figure>\n<h3 id=\"默认数据库\"><a href=\"#默认数据库\" class=\"headerlink\" title=\"默认数据库\"></a>默认数据库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] MySQL</span><br><span class=\"line\">[CentOS7] MariaDB</span><br></pre></td></tr></table></figure>\n<h3 id=\"文件结构\"><a href=\"#文件结构\" class=\"headerlink\" title=\"文件结构\"></a>文件结构</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] /bin, /sbin, /lib, and /lib64在/下</span><br><span class=\"line\">[CentOS7] /bin, /sbin, /lib, and /lib64移到/usr下</span><br></pre></td></tr></table></figure>\n<h3 id=\"主机名\"><a href=\"#主机名\" class=\"headerlink\" title=\"主机名\"></a>主机名</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6] /etc/sysconfig/network</span><br><span class=\"line\">[CentOS7] /etc/hostname</span><br></pre></td></tr></table></figure>\n<h3 id=\"时间同步\"><a href=\"#时间同步\" class=\"headerlink\" title=\"时间同步\"></a>时间同步</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ ntp</span><br><span class=\"line\">$ ntpq -p</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ chrony</span><br><span class=\"line\">$ chronyc sources</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改时间\"><a href=\"#修改时间\" class=\"headerlink\" title=\"修改时间\"></a>修改时间</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ vim /etc/sysconfig/clock</span><br><span class=\"line\">   ZONE=&quot;Asia/Tokyo&quot;</span><br><span class=\"line\">   UTC=fales</span><br><span class=\"line\">$ sudo ln -s /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ timedatectl set-timezone Asia/Tokyo</span><br><span class=\"line\">$ timedatectl status</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改地区\"><a href=\"#修改地区\" class=\"headerlink\" title=\"修改地区\"></a>修改地区</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ vim /etc/sysconfig/i18n</span><br><span class=\"line\">   LANG=&quot;ja_JP.utf8&quot;</span><br><span class=\"line\">$ /etc/sysconfig/i18n</span><br><span class=\"line\">$ locale</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ localectl set-locale LANG=ja_JP.utf8</span><br><span class=\"line\">$ localectl status</span><br></pre></td></tr></table></figure>\n<h3 id=\"服务相关\"><a href=\"#服务相关\" class=\"headerlink\" title=\"服务相关\"></a>服务相关</h3><h4 id=\"启动停止\"><a href=\"#启动停止\" class=\"headerlink\" title=\"启动停止\"></a>启动停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ service service_name start</span><br><span class=\"line\">$ service service_name stop</span><br><span class=\"line\">$ service sshd restart/status/reload</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl start service_name</span><br><span class=\"line\">$ systemctl stop service_name</span><br><span class=\"line\">$ systemctl restart/status/reload sshd</span><br></pre></td></tr></table></figure>\n<h4 id=\"自启动\"><a href=\"#自启动\" class=\"headerlink\" title=\"自启动\"></a>自启动</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ chkconfig service_name on/off</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl enable service_name</span><br><span class=\"line\">$ systemctl disable service_name</span><br></pre></td></tr></table></figure>\n<h4 id=\"服务一览\"><a href=\"#服务一览\" class=\"headerlink\" title=\"服务一览\"></a>服务一览</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ chkconfig --list</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl list-unit-files</span><br><span class=\"line\">$ systemctl --type service</span><br></pre></td></tr></table></figure>\n<h4 id=\"强制停止\"><a href=\"#强制停止\" class=\"headerlink\" title=\"强制停止\"></a>强制停止</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ kill -9 &lt;PID&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl kill --signal=9 sshd</span><br></pre></td></tr></table></figure>\n<h3 id=\"网络\"><a href=\"#网络\" class=\"headerlink\" title=\"网络\"></a>网络</h3><h4 id=\"网络信息\"><a href=\"#网络信息\" class=\"headerlink\" title=\"网络信息\"></a>网络信息</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ netstat</span><br><span class=\"line\">$ netstat -I</span><br><span class=\"line\">$ netstat -n</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ ip n</span><br><span class=\"line\">$ ip -s l</span><br><span class=\"line\">$ ss</span><br></pre></td></tr></table></figure>\n<h4 id=\"IP地址MAC地址\"><a href=\"#IP地址MAC地址\" class=\"headerlink\" title=\"IP地址MAC地址\"></a>IP地址MAC地址</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ ifconfig -a</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ ip address show</span><br></pre></td></tr></table></figure>\n<h4 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ route -n</span><br><span class=\"line\">$ route -A inet6 -n</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ ip route show</span><br><span class=\"line\">$ ip -6 route show</span><br></pre></td></tr></table></figure>\n<h3 id=\"yum\"><a href=\"#yum\" class=\"headerlink\" title=\"yum\"></a>yum</h3><p>yum源上的优化<br>在centos6的时候，默认是从官方源下载rpm包的，由于是国外的yum源很慢不能用，CentOS7在这里做了优化，当我们使用yum安装软件的时候，默认不会再从官方下载，而是自动寻找离自己地理位置最近的yum源开始下载。</p>\n<h3 id=\"重启关闭与启动级别\"><a href=\"#重启关闭与启动级别\" class=\"headerlink\" title=\"重启关闭与启动级别\"></a>重启关闭与启动级别</h3><h4 id=\"关闭\"><a href=\"#关闭\" class=\"headerlink\" title=\"关闭\"></a>关闭</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ shutdown -h now </span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ poweroff</span><br><span class=\"line\">$ systemctl poweroff</span><br></pre></td></tr></table></figure>\n<h4 id=\"重启\"><a href=\"#重启\" class=\"headerlink\" title=\"重启\"></a>重启</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ reboot</span><br><span class=\"line\">$ shutdown -r now</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ reboot</span><br><span class=\"line\">$ systemctl reboot</span><br></pre></td></tr></table></figure>\n<h4 id=\"单用户模式\"><a href=\"#单用户模式\" class=\"headerlink\" title=\"单用户模式\"></a>单用户模式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">$ init 3</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">$ systemctl rescue</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动模式\"><a href=\"#启动模式\" class=\"headerlink\" title=\"启动模式\"></a>启动模式</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[CentOS6]</span><br><span class=\"line\">[GUICUI]</span><br><span class=\"line\">$ vim /etc/inittab</span><br><span class=\"line\">  id:3:initdefault:</span><br><span class=\"line\">[CUIGUI]</span><br><span class=\"line\">$ startx</span><br><span class=\"line\"></span><br><span class=\"line\">[CentOS7]</span><br><span class=\"line\">[GUICUI]</span><br><span class=\"line\">$ systemctl isolate multi-user.target</span><br><span class=\"line\">[CUIGUI]</span><br><span class=\"line\">$systemctl isolate graphical.target</span><br></pre></td></tr></table></figure>\n<h4 id=\"默认\"><a href=\"#默认\" class=\"headerlink\" title=\"默认\"></a>默认</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ systemctl set-default graphical.target</span><br><span class=\"line\">$ systemctl set-default multi-user.target</span><br></pre></td></tr></table></figure>\n<h4 id=\"当前\"><a href=\"#当前\" class=\"headerlink\" title=\"当前\"></a>当前</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ systemctl get-default</span><br></pre></td></tr></table></figure>\n<h3 id=\"运行级别runlevel\"><a href=\"#运行级别runlevel\" class=\"headerlink\" title=\"运行级别runlevel\"></a>运行级别runlevel</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/inittab 是无效的 system target 替代</span><br><span class=\"line\">永久生效下次登录生效</span><br><span class=\"line\">systemctl get-default graphical.target 切换到5</span><br><span class=\"line\">systemctl get-default multi-user.target 切换到3</span><br><span class=\"line\"></span><br><span class=\"line\">临时生效的话 </span><br><span class=\"line\">init3</span><br><span class=\"line\"></span><br><span class=\"line\">只有五种运行级别</span><br><span class=\"line\">[root@centos7 ~]# ls -lh /usr/lib/systemd/system/runlevel*.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 15 Apr 20 22:31 /usr/lib/systemd/system/runlevel0.target -&gt; poweroff.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 13 Apr 20 22:31 /usr/lib/systemd/system/runlevel1.target -&gt; rescue.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 17 Apr 20 22:31 /usr/lib/systemd/system/runlevel2.target -&gt; multi-user.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 17 Apr 20 22:31 /usr/lib/systemd/system/runlevel3.target -&gt; multi-user.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 17 Apr 20 22:31 /usr/lib/systemd/system/runlevel4.target -&gt; multi-user.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 16 Apr 20 22:31 /usr/lib/systemd/system/runlevel5.target -&gt; graphical.target</span><br><span class=\"line\">lrwxrwxrwx. 1 root root 13 Apr 20 22:31 /usr/lib/systemd/system/runlevel6.target -&gt; reboot.target</span><br></pre></td></tr></table></figure>","categories":[{"name":"linux","path":"api/categories/linux.json"}],"tags":[{"name":"CentOS","path":"api/tags/CentOS.json"}]}